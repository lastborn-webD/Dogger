/**
 * crisp-client
 * @version v4.2.2 439a0bf
 * @author Crisp IM SAS
 * @date 2/2/2026
 */
const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["stylesheets/common_default_439a0bf.css","stylesheets/features/overlay_default_439a0bf.css","stylesheets/features/browsing_default_439a0bf.css","stylesheets/features/call_default_439a0bf.css","stylesheets/features/chat_default_439a0bf.css"])))=>i.map(i=>d[i]);
var t=null;function e(){if(null===t)throw new Error("Client not initialized");return t}function s(t){const e=Object.create(null);for(const s of t.split(","))e[s]=1;return t=>t in e}const i={},n=[],r=()=>{},o=()=>!1,l=t=>111===t.charCodeAt(0)&&110===t.charCodeAt(1)&&(t.charCodeAt(2)>122||t.charCodeAt(2)<97),u=t=>t.startsWith("onUpdate:"),a=Object.assign,h=(t,e)=>{const s=t.indexOf(e);s>-1&&t.splice(s,1)},c=Object.prototype.hasOwnProperty,d=(t,e)=>c.call(t,e),D=Array.isArray,f=t=>"[object Map]"===E(t),p=t=>"[object Set]"===E(t),m=t=>"[object Date]"===E(t),g=t=>"function"==typeof t,F=t=>"string"==typeof t,v=t=>"symbol"==typeof t,w=t=>null!==t&&"object"==typeof t,b=t=>(w(t)||g(t))&&g(t.then)&&g(t.catch),y=Object.prototype.toString,E=t=>y.call(t),C=t=>"[object Object]"===E(t),k=t=>F(t)&&"NaN"!==t&&"-"!==t[0]&&""+parseInt(t,10)===t,A=s(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),B=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},x=/-\w/g,j=B(t=>t.replace(x,t=>t.slice(1).toUpperCase())),I=/\B([A-Z])/g,S=B(t=>t.replace(I,"-$1").toLowerCase()),R=B(t=>t.charAt(0).toUpperCase()+t.slice(1)),O=B(t=>t?`on${R(t)}`:""),z=(t,e)=>!Object.is(t,e),P=(t,...e)=>{for(let s=0;s<t.length;s++)t[s](...e)},T=(t,e,s,i=!1)=>{Object.defineProperty(t,e,{configurable:!0,enumerable:!1,writable:i,value:s})},L=t=>{const e=parseFloat(t);return isNaN(e)?t:e};let M;const q=()=>M||(M="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{});function U(t){if(D(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=F(i)?W(i):U(i);if(n)for(const t in n)e[t]=n[t]}return e}if(F(t)||w(t))return t}const V=/;(?![^(]*\))/g,N=/:([^]+)/,H=/\/\*[^]*?\*\//g;function W(t){const e={};return t.replace(H,"").split(V).forEach(t=>{if(t){const s=t.split(N);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function J(t){let e="";if(F(t))e=t;else if(D(t))for(let s=0;s<t.length;s++){const i=J(t[s]);i&&(e+=i+" ")}else if(w(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const G=s("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function K(t){return!!t||""===t}function Y(t,e){if(t===e)return!0;let s=m(t),i=m(e);if(s||i)return!(!s||!i)&&t.getTime()===e.getTime();if(s=v(t),i=v(e),s||i)return t===e;if(s=D(t),i=D(e),s||i)return!(!s||!i)&&function(t,e){if(t.length!==e.length)return!1;let s=!0;for(let i=0;s&&i<t.length;i++)s=Y(t[i],e[i]);return s}(t,e);if(s=w(t),i=w(e),s||i){if(!s||!i)return!1;if(Object.keys(t).length!==Object.keys(e).length)return!1;for(const s in t){const i=t.hasOwnProperty(s),n=e.hasOwnProperty(s);if(i&&!n||!i&&n||!Y(t[s],e[s]))return!1}}return String(t)===String(e)}function Z(t,e){return t.findIndex(t=>Y(t,e))}const X=t=>!(!t||!0!==t.Fe),Q=t=>F(t)?t:null==t?"":D(t)||w(t)&&(t.toString===y||!g(t.toString))?X(t)?Q(t.value):JSON.stringify(t,tt,2):String(t),tt=(t,e)=>X(e)?tt(t,e.value):f(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[e,s],i)=>(t[et(e,i)+" =>"]=s,t),{})}:p(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>et(t))}:v(e)?et(e):!w(e)||D(e)||C(e)?e:String(e),et=(t,e="")=>{var s;return v(t)?`Symbol(${null!=(s=t.description)?s:e})`:t};function st(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}let it,nt;class rt{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=it,!t&&it&&(this.index=(it.scopes||(it.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){let t,e;if(this._isPaused=!0,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){let t,e;if(this._isPaused=!1,this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=it;try{return it=this,t()}finally{it=e}}}on(){1===++this._on&&(this.prevScope=it,it=this)}off(){this._on>0&&0===--this._on&&(it=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){let e,s;for(this._active=!1,e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const t=this.parent.scopes.pop();t&&t!==this&&(this.parent.scopes[this.index]=t,t.index=this.index)}this.parent=void 0}}}const ot=new WeakSet;class lt{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,it&&it.active&&it.effects.push(this)}pause(){this.flags|=64}resume(){64&this.flags&&(this.flags&=-65,ot.has(this)&&(ot.delete(this),this.trigger()))}notify(){2&this.flags&&!(32&this.flags)||8&this.flags||ct(this)}run(){if(!(1&this.flags))return this.fn();this.flags|=2,kt(this),ft(this);const t=nt,e=bt;nt=this,bt=!0;try{return this.fn()}finally{pt(this),nt=t,bt=e,this.flags&=-3}}stop(){if(1&this.flags){for(let t=this.deps;t;t=t.nextDep)gt(t);this.deps=this.depsTail=void 0,kt(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){64&this.flags?ot.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){_t(this)&&this.run()}get dirty(){return _t(this)}}let ut,at,ht=0;function ct(t,e=!1){if(t.flags|=8,e)return t.next=at,void(at=t);t.next=ut,ut=t}function dt(){ht++}function Dt(){if(--ht>0)return;if(at){let t=at;for(at=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let t;for(;ut;){let s=ut;for(ut=void 0;s;){const i=s.next;if(s.next=void 0,s.flags&=-9,1&s.flags)try{s.trigger()}catch(e){t||(t=e)}s=i}}if(t)throw t}function ft(t){for(let e=t.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function pt(t){let e,s=t.depsTail,i=s;for(;i;){const t=i.prevDep;-1===i.version?(i===s&&(s=t),gt(i),Ft(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=t}t.deps=e,t.depsTail=s}function _t(t){for(let e=t.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(mt(e.dep.computed)||e.dep.version!==e.version))return!0;return!!t._dirty}function mt(t){if(4&t.flags&&!(16&t.flags))return;if(t.flags&=-17,t.globalVersion===$t)return;if(t.globalVersion=$t,!t.isSSR&&128&t.flags&&(!t.deps&&!t._dirty||!_t(t)))return;t.flags|=2;const e=t.dep,s=nt,i=bt;nt=t,bt=!0;try{ft(t);const s=t.fn(t._value);(0===e.version||z(s,t._value))&&(t.flags|=128,t._value=s,e.version++)}catch(n){throw e.version++,n}finally{nt=s,bt=i,pt(t),t.flags&=-3}}function gt(t,e=!1){const{dep:s,prevSub:i,nextSub:n}=t;if(i&&(i.nextSub=n,t.prevSub=void 0),n&&(n.prevSub=i,t.nextSub=void 0),s.subs===t&&(s.subs=i,!i&&s.computed)){s.computed.flags&=-5;for(let t=s.computed.deps;t;t=t.nextDep)gt(t,!0)}e||--s.sc||!s.map||s.map.delete(s.key)}function Ft(t){const{prevDep:e,nextDep:s}=t;e&&(e.nextDep=s,t.prevDep=void 0),s&&(s.prevDep=e,t.nextDep=void 0)}function vt(t,e){t.effect instanceof lt&&(t=t.effect.fn);const s=new lt(t);e&&a(s,e);try{s.run()}catch(n){throw s.stop(),n}const i=st(s.run,s);return i.effect=s,i}function wt(t){t.effect.stop()}let bt=!0;const yt=[];function Et(){yt.push(bt),bt=!1}function Ct(){const t=yt.pop();bt=void 0===t||t}function kt(t){const{cleanup:e}=t;if(t.cleanup=void 0,e){const t=nt;nt=void 0;try{e()}finally{nt=t}}}let $t=0;class At{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class Bt{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.Be=!0}track(t){if(!nt||!bt||nt===this.computed)return;let e=this.activeLink;if(void 0===e||e.sub!==nt)e=this.activeLink=new At(nt,this),nt.deps?(e.prevDep=nt.depsTail,nt.depsTail.nextDep=e,nt.depsTail=e):nt.deps=nt.depsTail=e,xt(e);else if(-1===e.version&&(e.version=this.version,e.nextDep)){const t=e.nextDep;t.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=t),e.prevDep=nt.depsTail,e.nextDep=void 0,nt.depsTail.nextDep=e,nt.depsTail=e,nt.deps===e&&(nt.deps=t)}return e}trigger(t){this.version++,$t++,this.notify(t)}notify(t){dt();try{0;for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Dt()}}}function xt(t){if(t.dep.sc++,4&t.sub.flags){const e=t.dep.computed;if(e&&!t.dep.subs){e.flags|=20;for(let t=e.deps;t;t=t.nextDep)xt(t)}const s=t.dep.subs;s!==t&&(t.prevSub=s,s&&(s.nextSub=t)),t.dep.subs=t}}const jt=new WeakMap,It=Symbol(""),St=Symbol(""),Rt=Symbol("");function Ot(t,e,s){if(bt&&nt){let e=jt.get(t);e||jt.set(t,e=new Map);let i=e.get(s);i||(e.set(s,i=new Bt),i.map=e,i.key=s),i.track()}}function zt(t,e,s,i,n,r){const o=jt.get(t);if(!o)return void $t++;const l=t=>{t&&t.trigger()};if(dt(),"clear"===e)o.forEach(l);else{const n=D(t),r=n&&k(s);if(n&&"length"===s){const t=Number(i);o.forEach((e,s)=>{("length"===s||s===Rt||!v(s)&&s>=t)&&l(e)})}else switch((void 0!==s||o.has(void 0))&&l(o.get(s)),r&&l(o.get(Rt)),e){case"add":n?r&&l(o.get("length")):(l(o.get(It)),f(t)&&l(o.get(St)));break;case"delete":n||(l(o.get(It)),f(t)&&l(o.get(St)));break;case"set":f(t)&&l(o.get(It))}}Dt()}function Pt(t){const e=ke(t);return e===t?e:(Ot(e,0,Rt),Ee(t)?e:e.map(Ae))}function Tt(t){return Ot(t=ke(t),0,Rt),t}function Lt(t,e){return ye(t)?be(t)?Be(Ae(e)):Be(e):Ae(e)}const Mt={__proto__:null,[Symbol.iterator](){return qt(this,Symbol.iterator,t=>Lt(this,t))},concat(...t){return Pt(this).concat(...t.map(t=>D(t)?Pt(t):t))},entries(){return qt(this,"entries",t=>(t[1]=Lt(this,t[1]),t))},every(t,e){return Vt(this,"every",t,e,void 0,arguments)},filter(t,e){return Vt(this,"filter",t,e,t=>t.map(t=>Lt(this,t)),arguments)},find(t,e){return Vt(this,"find",t,e,t=>Lt(this,t),arguments)},findIndex(t,e){return Vt(this,"findIndex",t,e,void 0,arguments)},findLast(t,e){return Vt(this,"findLast",t,e,t=>Lt(this,t),arguments)},findLastIndex(t,e){return Vt(this,"findLastIndex",t,e,void 0,arguments)},forEach(t,e){return Vt(this,"forEach",t,e,void 0,arguments)},includes(...t){return Ht(this,"includes",t)},indexOf(...t){return Ht(this,"indexOf",t)},join(t){return Pt(this).join(t)},lastIndexOf(...t){return Ht(this,"lastIndexOf",t)},map(t,e){return Vt(this,"map",t,e,void 0,arguments)},pop(){return Wt(this,"pop")},push(...t){return Wt(this,"push",t)},reduce(t,...e){return Nt(this,"reduce",t,e)},reduceRight(t,...e){return Nt(this,"reduceRight",t,e)},shift(){return Wt(this,"shift")},some(t,e){return Vt(this,"some",t,e,void 0,arguments)},splice(...t){return Wt(this,"splice",t)},toReversed(){return Pt(this).toReversed()},toSorted(t){return Pt(this).toSorted(t)},toSpliced(...t){return Pt(this).toSpliced(...t)},unshift(...t){return Wt(this,"unshift",t)},values(){return qt(this,"values",t=>Lt(this,t))}};function qt(t,e,s){const i=Tt(t),n=i[e]();return i===t||Ee(t)||(n._next=n.next,n.next=()=>{const t=n._next();return t.done||(t.value=s(t.value)),t}),n}const Ut=Array.prototype;function Vt(t,e,s,i,n,r){const o=Tt(t),l=o!==t&&!Ee(t),u=o[e];if(u!==Ut[e]){const e=u.apply(t,r);return l?Ae(e):e}let a=s;o!==t&&(l?a=function(e,i){return s.call(this,Lt(t,e),i,t)}:s.length>2&&(a=function(e,i){return s.call(this,e,i,t)}));const h=u.call(o,a,i);return l&&n?n(h):h}function Nt(t,e,s,i){const n=Tt(t);let r=s;return n!==t&&(Ee(t)?s.length>3&&(r=function(e,i,n){return s.call(this,e,i,n,t)}):r=function(e,i,n){return s.call(this,e,Lt(t,i),n,t)}),n[e](r,...i)}function Ht(t,e,s){const i=ke(t);Ot(i,0,Rt);const n=i[e](...s);return-1!==n&&!1!==n||!Ce(s[0])?n:(s[0]=ke(s[0]),i[e](...s))}function Wt(t,e,s=[]){Et(),dt();const i=ke(t)[e].apply(t,s);return Dt(),Ct(),i}const Jt=s("__proto__,__v_isRef,__isVue"),Gt=new Set(Object.getOwnPropertyNames(Symbol).filter(t=>"arguments"!==t&&"caller"!==t).map(t=>Symbol[t]).filter(v));function Kt(t){v(t)||(t=String(t));const e=ke(this);return Ot(e,0,t),e.hasOwnProperty(t)}class Yt{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if("__v_skip"===e)return t.Be;const i=this._isReadonly,n=this._isShallow;if("__v_isReactive"===e)return!i;if("__v_isReadonly"===e)return i;if("__v_isShallow"===e)return n;if("__v_raw"===e)return s===(i?n?pe:fe:n?De:de).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const r=D(t);if(!i){let t;if(r&&(t=Mt[e]))return t;if("hasOwnProperty"===e)return Kt}const o=Reflect.get(t,e,xe(t)?t:s);if(v(e)?Gt.has(e):Jt(e))return o;if(i||Ot(t,0,e),n)return o;if(xe(o)){const t=r&&k(e)?o:o.value;return i&&w(t)?Fe(t):t}return w(o)?i?Fe(o):me(o):o}}class Zt extends Yt{constructor(t=!1){super(!1,t)}set(t,e,s,i){let n=t[e];const r=D(t)&&k(e);if(!this._isShallow){const t=ye(n);if(Ee(s)||ye(s)||(n=ke(n),s=ke(s)),!r&&xe(n)&&!xe(s))return t||(n.value=s),!0}const o=r?Number(e)<t.length:d(t,e),l=Reflect.set(t,e,s,xe(t)?t:i);return t===ke(i)&&(o?z(s,n)&&zt(t,"set",e,s):zt(t,"add",e,s)),l}deleteProperty(t,e){const s=d(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&zt(t,"delete",e,void 0),i}has(t,e){const s=Reflect.has(t,e);return v(e)&&Gt.has(e)||Ot(t,0,e),s}ownKeys(t){return Ot(t,0,D(t)?"length":It),Reflect.ownKeys(t)}}class Xt extends Yt{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const Qt=new Zt,te=new Xt,ee=new Zt(!0),se=new Xt(!0),ie=t=>t,ne=t=>Reflect.getPrototypeOf(t);function re(t){return function(...e){return"delete"!==t&&("clear"===t?void 0:this)}}function oe(t,e){const s={get(s){const i=this.__v_raw,n=ke(i),r=ke(s);t||(z(s,r)&&Ot(n,0,s),Ot(n,0,r));const{has:o}=ne(n),l=e?ie:t?Be:Ae;return o.call(n,s)?l(i.get(s)):o.call(n,r)?l(i.get(r)):void(i!==n&&i.get(s))},get size(){const e=this.__v_raw;return!t&&Ot(ke(e),0,It),e.size},has(e){const s=this.__v_raw,i=ke(s),n=ke(e);return t||(z(e,n)&&Ot(i,0,e),Ot(i,0,n)),e===n?s.has(e):s.has(e)||s.has(n)},forEach(s,i){const n=this,r=n.__v_raw,o=ke(r),l=e?ie:t?Be:Ae;return!t&&Ot(o,0,It),r.forEach((t,e)=>s.call(i,l(t),l(e),n))}};a(s,t?{add:re("add"),set:re("set"),delete:re("delete"),clear:re("clear")}:{add(t){e||Ee(t)||ye(t)||(t=ke(t));const s=ke(this);return ne(s).has.call(s,t)||(s.add(t),zt(s,"add",t,t)),this},set(t,s){e||Ee(s)||ye(s)||(s=ke(s));const i=ke(this),{has:n,get:r}=ne(i);let o=n.call(i,t);o||(t=ke(t),o=n.call(i,t));const l=r.call(i,t);return i.set(t,s),o?z(s,l)&&zt(i,"set",t,s):zt(i,"add",t,s),this},delete(t){const e=ke(this),{has:s,get:i}=ne(e);let n=s.call(e,t);n||(t=ke(t),n=s.call(e,t)),i&&i.call(e,t);const r=e.delete(t);return n&&zt(e,"delete",t,void 0),r},clear(){const t=ke(this),e=0!==t.size,s=t.clear();return e&&zt(t,"clear",void 0,void 0),s}});return["keys","values","entries",Symbol.iterator].forEach(i=>{s[i]=function(t,e,s){return function(...i){const n=this.__v_raw,r=ke(n),o=f(r),l="entries"===t||t===Symbol.iterator&&o,u="keys"===t&&o,a=n[t](...i),h=s?ie:e?Be:Ae;return!e&&Ot(r,0,u?St:It),{next(){const{value:t,done:e}=a.next();return e?{value:t,done:e}:{value:l?[h(t[0]),h(t[1])]:h(t),done:e}},[Symbol.iterator](){return this}}}}(i,t,e)}),s}function le(t,e){const s=oe(t,e);return(e,i,n)=>"__v_isReactive"===i?!t:"__v_isReadonly"===i?t:"__v_raw"===i?e:Reflect.get(d(s,i)&&i in e?s:e,i,n)}const ue={get:le(!1,!1)},ae={get:le(!1,!0)},he={get:le(!0,!1)},ce={get:le(!0,!0)},de=new WeakMap,De=new WeakMap,fe=new WeakMap,pe=new WeakMap;function _e(t){return t.Be||!Object.isExtensible(t)?0:function(t){switch(t){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}((t=>E(t).slice(8,-1))(t))}function me(t){return ye(t)?t:we(t,!1,Qt,ue,de)}function ge(t){return we(t,!1,ee,ae,De)}function Fe(t){return we(t,!0,te,he,fe)}function ve(t){return we(t,!0,se,ce,pe)}function we(t,e,s,i,n){if(!w(t))return t;if(t.__v_raw&&(!e||!t.__v_isReactive))return t;const r=_e(t);if(0===r)return t;const o=n.get(t);if(o)return o;const l=new Proxy(t,2===r?i:s);return n.set(t,l),l}function be(t){return ye(t)?be(t.__v_raw):!(!t||!t.__v_isReactive)}function ye(t){return!(!t||!t.__v_isReadonly)}function Ee(t){return!(!t||!t.__v_isShallow)}function Ce(t){return!!t&&!!t.__v_raw}function ke(t){const e=t&&t.__v_raw;return e?ke(e):t}function $e(t){return!d(t,"__v_skip")&&Object.isExtensible(t)&&T(t,"__v_skip",!0),t}const Ae=t=>w(t)?me(t):t,Be=t=>w(t)?Fe(t):t;function xe(t){return!!t&&!0===t.Fe}function je(t){return function(t,e){if(xe(t))return t;return new Ie(t,e)}(t,!1)}class Ie{constructor(t,e){this.dep=new Bt,this.Fe=!0,this.__v_isShallow=!1,this._rawValue=e?t:ke(t),this._value=e?t:Ae(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Ee(t)||ye(t);t=s?t:ke(t),z(t,e)&&(this._rawValue=t,this._value=s?t:Ae(t),this.dep.trigger())}}const Se={get:(t,e,s)=>{return"__v_raw"===e?t:xe(i=Reflect.get(t,e,s))?i.value:i;var i},set:(t,e,s,i)=>{const n=t[e];return xe(n)&&!xe(s)?(n.value=s,!0):Reflect.set(t,e,s,i)}};function Re(t){return be(t)?t:new Proxy(t,Se)}class Oe{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new Bt(this),this.Fe=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=$t-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(8&this.flags)&&nt!==this)return ct(this,!0),!0}get value(){const t=this.dep.track();return mt(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function ze(t,e,s=!1){let i,n;g(t)?i=t:(i=t.get,n=t.set);return new Oe(i,n,s)}const Pe={},Te=new WeakMap;let Le;function Me(t,e,s=i){const{immediate:n,deep:o,once:l,scheduler:u,augmentJob:a,call:c}=s,d=t=>o?t:Ee(t)||!1===o||0===o?qe(t,1):qe(t);let f,p,m,F,v=!1,w=!1;if(xe(t)?(p=()=>t.value,v=Ee(t)):be(t)?(p=()=>d(t),v=!0):D(t)?(w=!0,v=t.some(t=>be(t)||Ee(t)),p=()=>t.map(t=>xe(t)?t.value:be(t)?d(t):g(t)?c?c(t,2):t():void 0)):p=g(t)?e?c?()=>c(t,2):t:()=>{if(m){Et();try{m()}finally{Ct()}}const e=Le;Le=f;try{return c?c(t,3,[F]):t(F)}finally{Le=e}}:r,e&&o){const t=p,e=!0===o?1/0:o;p=()=>qe(t(),e)}const b=it,y=()=>{f.stop(),b&&b.active&&h(b.effects,f)};if(l&&e){const t=e;e=(...e)=>{t(...e),y()}}let E=w?new Array(t.length).fill(Pe):Pe;const C=t=>{if(1&f.flags&&(f.dirty||t))if(e){const t=f.run();if(o||v||(w?t.some((t,e)=>z(t,E[e])):z(t,E))){m&&m();const s=Le;Le=f;try{const s=[t,E===Pe?void 0:w&&E[0]===Pe?[]:E,F];E=t,c?c(e,3,s):e(...s)}finally{Le=s}}}else f.run()};return a&&a(C),f=new lt(p),f.scheduler=u?()=>u(C,!1):C,F=t=>function(t,e=!1,s=Le){if(s){let e=Te.get(s);e||Te.set(s,e=[]),e.push(t)}}(t,!1,f),m=f.onStop=()=>{const t=Te.get(f);if(t){if(c)c(t,4);else for(const e of t)e();Te.delete(f)}},e?n?C(!0):E=f.run():u?u(st(C,null,!0),!0):f.run(),y.pause=st(f.pause,f),y.resume=st(f.resume,f),y.stop=y,y}function qe(t,e=1/0,s){if(e<=0||!w(t)||t.Be)return t;if(((s=s||new Map).get(t)||0)>=e)return t;if(s.set(t,e),e--,xe(t))qe(t.value,e,s);else if(D(t))for(let i=0;i<t.length;i++)qe(t[i],e,s);else if(p(t)||f(t))t.forEach(t=>{qe(t,e,s)});else if(C(t)){for(const i in t)qe(t[i],e,s);for(const i of Object.getOwnPropertySymbols(t))Object.prototype.propertyIsEnumerable.call(t,i)&&qe(t[i],e,s)}return t}const Ue={URL_CLIENT:"",URL_IMAGE:""},Ve={PROJECT_NAME:"crisp-client",REVISION:"439a0bf",PROTOCOL:"__CRISP__INTERNAL__PROTOCOL__",get URL_CLIENT(){return Ue.URL_CLIENT||"https://client.crisp.chat"},set URL_CLIENT(t){Ue.URL_CLIENT=t},URL_RELAY_CLIENT:"https://client.relay.crisp.chat",URL_RELAY_STREAM:"https://stream.relay.crisp.chat",URL_WEBSITE:"https://crisp.chat",URL_GO:"https://go.crisp.chat",get URL_IMAGE(){return Ue.URL_IMAGE||"https://image.crisp.chat"},set URL_IMAGE(t){Ue.URL_IMAGE=t},URL_GAME:"https://game.crisp.chat",URL_HUGO:"https://hugo.ai",PLATFORM_NAME:"crisp-client@v2",PLATFORM_SIGNATURE_KEY:"1k/2y/2u/2z/38/1e/3d/38/2y/23/1e/1y/29/34/1j/26",SOCKET_AFFINITY:!0,RTC_ICE:[{urls:["stun:stun.media.crisp.chat:3478","stun:stun.media.crisp.chat:3479"]},{urls:["turn:turn.media.crisp.chat:3478?transport=udp","turn:turn.media.crisp.chat:3478?transport=tcp","turn:turn.media.crisp.chat:3479?transport=udp","turn:turn.media.crisp.chat:3479?transport=tcp","turns:turn.media.crisp.chat:443?transport=tcp"],username:"client_9F9kh",credential:"DPCEHTqUb7jiJ2mvnzcUmFV4mKK6c8jntUXo4gC8tYCbHTocuy9YJiCxpQ4tmG3p"}],CIRCUIT_BREAKER_DOMAINS:[],CIRCUIT_BREAKER_AGENTS:["Trident","Googlebot","Bingbot","Slurp","DuckDuckBot","Baiduspider","YandexBot","GTmetrix","Lighthouse","Acunetix","Ahrefs","SemrushBot","SiteAuditBot","SplitSignalBot","HeadlessChrome"],CIRCUIT_BREAKER_ENGINES:[{element:"head link[rel='icon'][type='image/x-icon'][href^='https://sellpass.io']"},{element:"head script[src*='/cdn.sellix.io/']"},{element:"head link[rel='preconnect'][href^='https://cdn.sellix.io/']"},{element:"head link[rel='preconnect'][href^='https://api.sellsn.io']"},{element:"head link[rel='author'][href^='https://ereemby.com/']"},{element:"body script[src$='/aiz-core.js']"}],ENVIRONMENT:"production",TEST:!1,LOCALE_DEFAULT:"en",LOCALE_AVAILABLE:["af","ar-ae","ar-sa","ar-ye","ar","az","bg","bn","ca","ckb","cs","da","de","el","en","eo","es","et","eu","fa","fi","fo","fr","gu","he","hi","hr","hu","hy","id","is","it","ja","ka","ko","lt","lv","ml","mn","ms","nl-be","nl","no","pl","ps","pt-br","pt","ro","ru","sk","sl","sr-cyrl-cs","sr","sv","ta","th","tr","uk","uz","vi","zh-hk","zh-tw","zh"],LOCALE_WEBSITE:["en","fr","es","pt","de","nl","fi","pl","tr"],FILE_PREVIEW:{IMAGE:["image/jpeg","image/jpg","image/webp","image/png","image/gif"],VIDEO:["video/mp4","video/webm"]},THEME:{DEFAULT_COLOR:"default",AVAILABLE_COLORS:{default:{10:"#F0F2F5",20:"#EFF5FE",100:"#E2EEFF",200:"#66788A",500:"#1972F5",600:"#055EE1",700:"#0057D7",800:"#0051C8",900:"#004AB5",reverse:"#FFFFFF"},red:{10:"#F0F2F5",20:"#F9F3F3",100:"#FFE5E4",200:"#66788A",500:"#E51E0F",600:"#CC1B0E",700:"#C5170A",800:"#B81206",900:"#A71004",reverse:"#FFFFFF"},pink:{10:"#F0F2F5",20:"#F7F2F2",100:"#FFE0EB",200:"#66788A",500:"#F11D64",600:"#DB165A",700:"#CE1454",800:"#C20F4D",900:"#B40A45",reverse:"#FFFFFF"},purple:{10:"#F0F2F5",20:"#F8F3FA",100:"#FADDFF",200:"#66788A",500:"#B520CF",600:"#9B19B2",700:"#9614AE",800:"#8A0DA1",900:"#800896",reverse:"#FFFFFF"},deep_purple:{10:"#F0F2F5",20:"#F6F5FA",100:"#EDE2FF",200:"#66788A",500:"#682AD5",600:"#581FBB",700:"#5019B0",800:"#441599",900:"#3B0F89",reverse:"#FFFFFF"},indigo:{10:"#F0F2F5",20:"#F5F5FB",100:"#DDE2FF",200:"#66788A",500:"#2943D1",600:"#1732C4",700:"#112BB9",800:"#0F249A",900:"#091C87",reverse:"#FFFFFF"},blue:{10:"#F0F2F5",20:"#EFF5FE",100:"#E2EEFF",200:"#66788A",500:"#1972F5",600:"#055EE1",700:"#0057D7",800:"#0051C8",900:"#004AB5",reverse:"#FFFFFF"},light_blue:{10:"#F0F2F5",20:"#EFF5F7",100:"#DCF0F9",200:"#66788A",500:"#009FDF",600:"#008CCB",700:"#0088C5",800:"#007EB7",900:"#0076AB",reverse:"#FFFFFF"},cyan:{10:"#F0F2F5",20:"#F1F7F7",100:"#DBF7F9",200:"#66788A",500:"#01A2B4",600:"#009CAE",700:"#008A9A",800:"#008493",900:"#007B89",reverse:"#FFFFFF"},teal:{10:"#F0F2F5",20:"#E7F4F4",100:"#D6EEE9",200:"#66788A",500:"#00947C",600:"#00816C",700:"#007B66",800:"#00705D",900:"#006655",reverse:"#FFFFFF"},green:{10:"#F0F2F5",20:"#EDF5ED",100:"#D6F3D7",200:"#66788A",500:"#28A52D",600:"#1A941F",700:"#148919",800:"#0F7B13",900:"#0A6C0E",reverse:"#FFFFFF"},light_green:{10:"#F0F2F5",20:"#F0F7F0",100:"#DFF6C6",200:"#66788A",500:"#6EB700",600:"#64A500",700:"#5E9C00",800:"#528800",900:"#487800",reverse:"#FFFFFF"},amber:{10:"#F0F2F5",20:"#F6F4ED",100:"#FFF0C1",200:"#66788A",500:"#E1AE01",600:"#CD9E00",700:"#C49700",800:"#B88E00",900:"#A37E00",reverse:"#FFFFFF"},orange:{10:"#F0F2F5",20:"#F5F5EF",100:"#FFECCF",200:"#66788A",500:"#EC6800",600:"#E16300",700:"#CE5B00",800:"#BE5400",900:"#B54F00",reverse:"#FFFFFF"},deep_orange:{10:"#F0F2F5",20:"#FDF5F5",100:"#FFE8E0",200:"#66788A",500:"#E45300",600:"#CD4A00",700:"#C24702",800:"#B84200",900:"#AC3E00",reverse:"#FFFFFF"},brown:{10:"#F0F2F5",20:"#F7F1EF",100:"#F2EAE7",200:"#66788A",500:"#924B32",600:"#8C462D",700:"#7F3D25",800:"#75361F",900:"#692E19",reverse:"#FFFFFF"},grey:{10:"#F0F2F5",20:"#F4F4F4",100:"#E5E5E5",200:"#66788A",500:"#7A7A7A",600:"#6B6B6B",700:"#646464",800:"#5B5B5B",900:"#505050",reverse:"#FFFFFF"},blue_grey:{10:"#F0F2F5",20:"#F2F7F8",100:"#DCEDF6",200:"#66788A",500:"#447991",600:"#3C7189",700:"#32657C",800:"#2A5A70",900:"#27556A",reverse:"#FFFFFF"},black:{10:"#F0F2F5",20:"#F2F2F2",100:"#E9E9E9",200:"#66788A",500:"#2A2A2A",600:"#313131",700:"#454545",800:"#525252",900:"#5B5B5B",reverse:"#FFFFFF"}}}},Ne="development"===Ve.ENVIRONMENT,He=void 0!==window.console,We=Ne&&He,Je="anonymous";var Ge=(t,e,s)=>{};const Ke=new class{constructor(){this.ze=/^(Error)/,this.Le=/^(\s*at\s+)/,this.Ue=/(?:(.+?)(?:\s+\(|@))?(?:(.+?):(\d+):(\d+))/}setLogSink(t){if("function"!=typeof t)throw new Error("Invalid function");Ge=t}warn(...t){const e=this.Ve("warn",...t);Ge("warn",e[0],t)}error(...t){const e=this.Ve("error",...t);We&&console.error(...e),Ge("error",e[0],t)}info(...t){const e=this.Ve("info",...t);Ge("info",e[0],t)}log(...t){const e=this.Ve("log",...t);Ge("log",e[0],t)}debug(...t){const e=this.Ve("debug",...t);Ge("debug",e[0],t)}He(){try{let t=(new Error).stack;t=t.replace(this.ze,"").trim();let e=t.split("\n")[3]||"";e=e.replace(this.Le,"").trim();const s=e.match(this.Ue);if(s){const[,t=Je,e="unknown",i="?",n="?"]=s,r=t.split("/")[0]||Je,o=r.includes(".")?r.split(".")[0]:null;return{function:r,class:o,file:e.split("/").pop(),line:i,column:n}}return{function:"unknown",class:null,file:"unknown",line:"?",column:"?"}}catch{return{function:"unknown",class:null,file:"unknown",line:"?",column:"?"}}}Ve(t,...e){const s=this.He();let i;i=s.function===Je?`${s.file}:${s.line}`:s.class?`${s.class}:${s.function}`:`${s.function}`;return[`[${t.toUpperCase()}] [${i}]`,...e]}};const Ye=[];class Ze{constructor(){es(function(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}(this.reset,this),0)}reset(){}}function Xe(t,e){if("object"!=typeof t||!t)return t;if("object"!=typeof e||!e)return t;for(let s in e)e.hasOwnProperty(s)&&("object"!=typeof e[s]||null===e[s]||Array.isArray(e[s])?t[s]=e[s]:(("object"!=typeof t[s]||null===t[s]||Array.isArray(t[s]))&&(t[s]={}),Xe(t[s],e[s])));return t}function Qe(t,e,s){let i=JSON.parse(JSON.stringify(t)),n=me(Object.assign(e,t));return es(()=>{Xe(n,i)},1),"function"==typeof n.reset&&es(n.reset,0),n}function ts(t,e,s){if(!t)throw new Error("Cannot inject session store without a session identifier");if(!(t in s)){let i={};!function(t,e){Qe(JSON.parse(JSON.stringify(t)),e)}(e,i),s[t]=i}return s[t]}function es(t,e=0){Ye.push({fn:t,priority:e}),Ye.sort((t,e)=>e.priority-t.priority)}function ss(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}var is=Object.defineProperty,ns=Object.defineProperties,rs=Object.getOwnPropertyDescriptors,os=Object.getOwnPropertySymbols,ls=Object.prototype.hasOwnProperty,us=Object.prototype.propertyIsEnumerable,as=(t,e,s)=>e in t?is(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s,hs=(t,e)=>{for(var s in e||(e={}))ls.call(e,s)&&as(t,s,e[s]);if(os)for(var s of os(e))us.call(e,s)&&as(t,s,e[s]);return t},cs=(t,e)=>ns(t,rs(e)),ds=(t,e,s)=>(as(t,"symbol"!=typeof e?e+"":e,s),s);let Ds=!1;const fs=[],ps=Promise.resolve(),_s=t=>ps.then(t),ms=t=>{fs.includes(t)||fs.push(t),Ds||(Ds=!0,_s(gs))},gs=()=>{for(const t of fs)t();fs.length=0,Ds=!1};setInterval(()=>{gs()},1e3);const Fs=Array.isArray,vs=t=>"string"==typeof t,ws=t=>null!==t&&"object"==typeof t,bs=t=>{const e=Object.create(null);return s=>e[s]||(e[s]=t(s))},ys=/-(\w)/g,Es=bs(t=>t.replace(ys,(t,e)=>e?e.toUpperCase():"")),Cs=/\B([A-Z])/g,ks=bs(t=>t.replace(Cs,"-$1").toLowerCase());function $s(t){if(Fs(t)){const e={};for(let s=0;s<t.length;s++){const i=t[s],n=vs(i)?js(i):$s(i);if(n)for(const t in n)e[t]=n[t]}return e}if(vs(t)||ws(t))return t}const As=/;(?![^(]*\))/g,Bs=/:([^]+)/,xs=/\/\*[^]*?\*\//g;function js(t){const e={};return t.replace(xs,"").split(As).forEach(t=>{if(t){const s=t.split(Bs);s.length>1&&(e[s[0].trim()]=s[1].trim())}}),e}function Is(t){let e="";if(vs(t))e=t;else if(Fs(t))for(let s=0;s<t.length;s++){const i=Is(t[s]);i&&(e+=i+" ")}else if(ws(t))for(const s in t)t[s]&&(e+=s+" ");return e.trim()}const Ss=/^(spellcheck|draggable|form|list|type)$/,Rs=({el:t,get:e,effect:s,arg:i,modifiers:n})=>{let r;"class"===i&&(t._class=t.className),s(()=>{let s=e();if(i)(null==n?void 0:n.camel)&&(i=Es(i)),Os(t,i,s,r);else{for(const e in s)Os(t,e,s[e],r&&r[e]);for(const e in r)(!s||!(e in s))&&Os(t,e,null)}r=s})},Os=(t,e,s,i)=>{if("class"===e)t.setAttribute("class",Is(t._class?[t._class,s]:s)||"");else if("style"===e){s=$s(s);const{style:e}=t;if(s)if(vs(s))s!==i&&(e.cssText=s);else{for(const t in s)Ps(e,t,s[t]);if(i&&!vs(i))for(const t in i)null==s[t]&&Ps(e,t,"")}else t.removeAttribute("style")}else t instanceof SVGElement||!(e in t)||Ss.test(e)?"true-value"===e?t._trueValue=s:"false-value"===e?t._falseValue=s:null!=s?t.setAttribute(e,s):t.removeAttribute(e):(t[e]=s,"value"===e&&(t._value=s))},zs=/\s*!important$/,Ps=(t,e,s)=>{Fs(s)?s.forEach(s=>Ps(t,e,s)):e.startsWith("--")?t.setProperty(e,s):zs.test(s)?t.setProperty(ks(e),s.replace(zs,""),"important"):t[e]=s},Ts=(t,e)=>{const s=t.getAttribute(e);return null!=s&&t.removeAttribute(e),s},Ls=/^[A-Za-z_$][\w$]*(?:\.[A-Za-z_$][\w$]*|\['[^']*?']|\["[^"]*?"]|\[\d+]|\[[A-Za-z_$][\w$]*])*$/,Ms=["ctrl","shift","alt","meta"],qs={stop:t=>t.stopPropagation(),prevent:t=>t.preventDefault(),self:t=>t.target!==t.currentTarget,ctrl:t=>!t.ctrlKey,shift:t=>!t.shiftKey,alt:t=>!t.altKey,meta:t=>!t.metaKey,left:t=>"button"in t&&0!==t.button,middle:t=>"button"in t&&1!==t.button,right:t=>"button"in t&&2!==t.button,exact:(t,e)=>Ms.some(s=>t[`${s}Key`]&&!e[s])},Us=({el:t,get:e,exp:s,arg:i,ctx:n,modifiers:r})=>{if(i){var o=t=>{Ls.test(s)?e(`${s}`)(t):(n.scope.$event=t,e(`${s}`),delete n.scope.$event)};if("vue:mounted"===i)return void _s(o);if("vue:unmounted"===i)return()=>o();if(r){"click"===i&&(r.right&&(i="contextmenu"),r.middle&&(i="mouseup"));const t=o;o=e=>{if(!("key"in e)||ks(e.key)in r){for(const t in r){const s=qs[t];if(s&&s(e,r))return}return t(e)}}}((t,e,s,i)=>{t.addEventListener(e,s,i)})(t,i,o,r)}},Vs=({el:t,get:e,effect:s})=>{s(()=>{t.textContent=Ns(e())})},Ns=t=>null==t?"":ws(t)?JSON.stringify(t,null,2):String(t),Hs={true:!0,false:!1,null:null,undefined:void 0},Ws={};"+ - * / % === !== == != < > <= >= && || ! =".split(" ").forEach(function(t){Ws[t]=!0});const Js={n:"\n",f:"\f",r:"\r",t:"\t",i:"\v",o:"'",u:'"'};class Gs{constructor(){}h(t){for(this.text=t,this.index=0,this.l=[];this.text.length>this.index;){var e=this.text.charAt(this.index);if('"'===e||"'"===e)this.p(e);else if(this.v(e)||"."===e&&this.v(this.m()))this.k();else if(this.I(this.A()))this.j();else if("?"===e&&"."===this.m())this.l.push({index:this.index,text:"?.",C:!0}),this.index+=2;else if(this.is(e,"(){}[].,;:?"))this.l.push({index:this.index,text:e}),this.index++;else if(this.S(e))this.index++;else{var s=e+this.m(),i=s+this.m(2),n=Ws[s],r=Ws[i];if(Ws[e]||n||r){var o=r?i:n?s:e;this.l.push({index:this.index,text:o,operator:!0}),this.index+=o.length}else this.$("Unexpected next character ",this.index,this.index+1)}}return this.l}is(t,e){return-1!==e.indexOf(t)}m(t){var e=t||1;return this.text.length>this.index+e&&this.text.charAt(this.index+e)}v(t){return t>="0"&&"9">=t&&"string"==typeof t}S(t){return" "===t||"\r"===t||"\t"===t||"\n"===t||"\v"===t||"Â "===t}I(t){return this.U(t)}U(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t}M(t){return this.T(t)}T(t,e){return this.U(t,e)||this.v(t)}codePointAt(t){return 1===t.length?t.charCodeAt(0):(t.charCodeAt(0)<<10)+t.charCodeAt(1)-56613888}A(){var t=this.text.charAt(this.index),e=this.m();if(!e)return t;var s=t.charCodeAt(0),i=e.charCodeAt(0);return 55296>s||s>56319||56320>i||i>57343?t:t+e}L(t){return"-"===t||"+"===t||this.v(t)}$(t,e,s){s=s||this.index;var i=void 0!==e?"s "+e+"-"+this.index+" ["+this.text.substring(e,s)+"]":" "+s;throw Error("Lexer Error: "+t+" at column"+i+" in expression ["+this.text+"].")}k(){for(var t="",e=this.index;this.text.length>this.index;){var s=this.text.charAt(this.index).toLowerCase();if("."===s||this.v(s))t+=s;else{var i=this.m();if("e"===s&&this.L(i))t+=s;else if(this.L(s)&&i&&this.v(i)&&"e"===t.charAt(t.length-1))t+=s;else{if(!this.L(s)||i&&this.v(i)||"e"!==t.charAt(t.length-1))break;this.$("Invalid exponent")}}this.index++}this.l.push({index:e,text:t,N:!0,value:+t})}j(){var t=this.index;for(this.index+=this.A().length;this.text.length>this.index;){var e=this.A();if(!this.M(e))break;this.index+=e.length}this.l.push({index:t,text:this.text.slice(t,this.index),identifier:!0})}p(t){var e=this.index;this.index++;for(var s="",i=t,n=!1;this.text.length>this.index;){var r=this.text.charAt(this.index);if(i+=r,n){if("u"===r){var o=this.text.substring(this.index+1,this.index+5);o.match(/[\da-f]{4}/i)||this.$("Invalid unicode escape [\\u"+o+"]"),this.index+=4,s+=String.fromCharCode(parseInt(o,16))}else s+=Js[r]||r;n=!1}else if("\\"===r)n=!0;else{if(r===t)return this.index++,void this.l.push({index:e,text:i,N:!0,value:s});s+=r}this.index++}this.$("Unterminated quote",e)}}function Ks(t){return t.type===Zs.O||t.type===Zs.P}const Ys=class{constructor(t,e){ds(this,"wt",{$t:{type:Ys.X},Ut:{type:Ys.Y}}),this.q=t,this.options=e}et(t){this.text=t,this.l=this.q.h(t);const e=this.it();return 0!==this.l.length&&this.$("is an unexpected token",this.l[0]),e}it(){const t=[];for(;;)if(this.l.length>0&&!this.m("}",")",";","]")&&t.push(this.rt()),!this.nt(";"))return{type:Ys.V,body:t}}rt(){return{type:Ys.B,st:this.st()}}st(){return this.ot()}ot(){const t=this.ut();if(this.nt("=")){if(!Ks(t))throw Error("Trying to assign a value to a non l-value");return{type:Ys.D,left:t,right:this.ot(),operator:"="}}return t}ut(){const t=this.ht();let e,s;return this.nt("?")&&(e=this.st(),this.ct(":"))?(s=this.st(),{type:Ys.R,test:t,alternate:e,lt:s}):t}ht(){let t=this.ft();for(;this.nt("||");)t={type:Ys.G,operator:"||",left:t,right:this.ft()};return t}ft(){let t=this.vt();for(;this.nt("&&");)t={type:Ys.G,operator:"&&",left:t,right:this.vt()};return t}vt(){let t,e=this.dt();for(;t=this.nt("==","!=","===","!==");)e={type:Ys.W,operator:t.text,left:e,right:this.dt()};return e}dt(){let t,e=this.yt();for(;t=this.nt("<",">","<=",">=");)e={type:Ys.W,operator:t.text,left:e,right:this.yt()};return e}yt(){let t,e=this.xt();for(;t=this.nt("+","-");)e={type:Ys.W,operator:t.text,left:e,right:this.xt()};return e}xt(){let t,e=this.bt();for(;t=this.nt("*","/","%");)e={type:Ys.W,operator:t.text,left:e,right:this.bt()};return e}bt(){let t;return(t=this.nt("+","-","!"))?{type:Ys.Z,operator:t.text,prefix:!0,kt:this.bt()}:this.gt()}gt(){let t,e;for(this.nt("(")?(t=this.st(),this.ct(")")):this.nt("[")?t=this.Et():this.nt("{")?t=this.object():this.wt.hasOwnProperty(this.m().text)?t=Object.assign({},this.wt[this.ct().text]):Hs.hasOwnProperty(this.m().text)?t={type:Ys.F,value:Hs[this.ct().text]}:this.m().identifier?t=this.identifier():this.m().N?t=this.N():this.$("not a primary expression",this.m());e=this.nt("(","[",".","?.");)"("===e.text?(t={type:Ys._,It:t,arguments:this.At()},this.ct(")")):"["===e.text?(t={type:Ys.P,object:t,jt:this.st(),computed:!0},this.ct("]")):"."===e.text?t={type:Ys.P,object:t,jt:this.identifier(),computed:!1}:"?."===e.text&&(this.m("[")?(this.ct("["),t={type:Ys.P,object:t,jt:this.st(),computed:!0,optional:!0},this.ct("]")):t={type:Ys.P,object:t,jt:this.identifier(),computed:!1,optional:!0});return t}At(){const t=[];if(")"!==this.Ct().text)do{t.push(this.st())}while(this.nt(","));return t}identifier(){const t=this.ct();return t.identifier||this.$("is not a valid identifier",t),{type:Ys.O,name:t.text}}N(){return{type:Ys.F,value:this.ct().value}}Et(){const t=[];if("]"!==this.Ct().text)do{if(this.m("]"))break;t.push(this.st())}while(this.nt(","));return this.ct("]"),{type:Ys.H,elements:t}}object(){const t=[];let e;if("}"!==this.Ct().text)do{if(this.m("}"))break;e={type:Ys.J,kind:"init"},this.m().N?(e.key=this.N(),e.computed=!1,this.ct(":"),e.value=this.st()):this.m().identifier?(e.key=this.identifier(),e.computed=!1,this.m(":")?(this.ct(":"),e.value=this.st()):e.value=e.key):this.m("[")?(this.ct("["),e.key=this.st(),this.ct("]"),e.computed=!0,this.ct(":"),e.value=this.st()):this.$("invalid key",this.m()),t.push(e)}while(this.nt(","));return this.ct("}"),{type:Ys.K,properties:t}}$(t,e){throw Error(`Syntax Error: Token '${e.text}' ${t} at column ${e.index+1} of the expression [${this.text}] starting at [${this.text.substring(e.index)}].`)}ct(t){if(0===this.l.length)throw Error("Unexpected end of expression: "+this.text);const e=this.nt(t);return e||this.$("is unexpected, expecting ["+t+"]",this.m()),e}Ct(){if(0===this.l.length)throw Error("Unexpected end of expression: "+this.text);return this.l[0]}m(t,e,s,i){return this.St(0,t,e,s,i)}St(t,e,s,i,n){if(this.l.length>t){const r=this.l[t],o=r.text;if(o===e||o===s||o===i||o===n||!e&&!s&&!i&&!n)return r}return!1}nt(t,e,s,i){const n=this.m(t,e,s,i);return!!n&&(this.l.shift(),n)}};let Zs=Ys;function Xs(t,e){let s,i;const n=t.Mt=function(t,e){switch(t.type){case"MemberExpression":if(t.computed)return!1;break;case"UnaryExpression":return 1;case"BinaryExpression":return"+"!==t.operator&&1;case"CallExpression":return!1}return void 0===e?2:e}(t,e);switch(t.type){case Zs.V:s=!0,t.body.forEach(function(t){Xs(t.st,n),s=s&&t.st.N}),t.N=s;break;case Zs.F:t.N=!0,t.Tt=[];break;case Zs.Z:Xs(t.kt,n),t.N=t.kt.N,t.Tt=t.kt.Tt;break;case Zs.W:Xs(t.left,n),Xs(t.right,n),t.N=t.left.N&&t.right.N,t.Tt=t.left.Tt.concat(t.right.Tt);break;case Zs.G:Xs(t.left,n),Xs(t.right,n),t.N=t.left.N&&t.right.N,t.Tt=t.N?[]:[t];break;case Zs.R:Xs(t.test,n),Xs(t.alternate,n),Xs(t.lt,n),t.N=t.test.N&&t.alternate.N&&t.lt.N,t.Tt=t.N?[]:[t];break;case Zs.O:t.N=!1,t.Tt=[t];break;case Zs.P:Xs(t.object,n),t.computed&&Xs(t.jt,n),t.N=t.object.N&&(!t.computed||t.jt.N),t.Tt=t.N?[]:[t];break;case Zs._:s=!1,i=[],t.arguments.forEach(function(t){Xs(t,n),s=s&&t.N,i.push.apply(i,t.Tt)}),t.N=s,t.Tt=[t];break;case Zs.D:Xs(t.left,n),Xs(t.right,n),t.N=t.left.N&&t.right.N,t.Tt=[t];break;case Zs.H:s=!0,i=[],t.elements.forEach(function(t){Xs(t,n),s=s&&t.N,i.push.apply(i,t.Tt)}),t.N=s,t.Tt=i;break;case Zs.K:s=!0,i=[],t.properties.forEach(function(t){Xs(t.value,n),s=s&&t.value.N,i.push.apply(i,t.value.Tt),t.computed&&(Xs(t.key,!1),s=s&&t.key.N,i.push.apply(i,t.key.Tt))}),t.N=s,t.Tt=i;break;case Zs.X:case Zs.Y:t.N=!1,t.Tt=[]}}ds(Zs,"V",1),ds(Zs,"B",2),ds(Zs,"D",3),ds(Zs,"R",4),ds(Zs,"G",5),ds(Zs,"W",6),ds(Zs,"Z",7),ds(Zs,"_",8),ds(Zs,"P",9),ds(Zs,"O",10),ds(Zs,"F",11),ds(Zs,"H",12),ds(Zs,"J",13),ds(Zs,"K",14),ds(Zs,"X",15),ds(Zs,"Y",16),ds(Zs,"tt",17);let Qs=class{compile(t){const e=this;let s,i;Xs(t),(s=function(t){if(1===t.body.length&&Ks(t.body[0].st))return{type:Zs.D,left:t.body[0].st,right:{type:Zs.tt},operator:"="}}(t))&&(i=this.Lt(s));const n=function(t){if(1!==t.length)return;const e=t[0].st,s=e.Tt;return 1!==s.length||s[0]!==e?s:void 0}(t.body);let r;n&&(r=[],n.forEach(function(t,s){const i=e.Lt(t);i.Mt=t.Mt,t.input=i,r.push(i),t.Nt=s}));const o=[];t.body.forEach(function(t){o.push(e.Lt(t.st))});const l=0===t.body.length?noop:1===t.body.length?o[0]:function(t,e){let s;return o.forEach(function(i){s=i(t,e)}),s};return i&&(l.assign=function(t,e,s){return i(t,s,e)}),r&&(l.inputs=r),l}Lt(t,e,s){let i,n,r,o=this;if(t.input)return this.inputs(t.input,t.Nt);switch(t.type){case Zs.F:return this.value(t.value,e);case Zs.Z:return n=this.Lt(t.kt),this["unary"+t.operator](n,e);case Zs.W:case Zs.G:return i=this.Lt(t.left),n=this.Lt(t.right),this["binary"+t.operator](i,n,e);case Zs.R:return this["ternary?:"](this.Lt(t.test),this.Lt(t.alternate),this.Lt(t.lt),e);case Zs.O:return o.identifier(t.name,e,s);case Zs.P:return i=this.Lt(t.object,!1,!!s),t.computed||(n=t.jt.name),t.computed&&(n=this.Lt(t.jt)),t.computed?this.Ot(i,n,e,s,t.optional):this.Pt(i,n,e,s,t.optional);case Zs._:return r=[],t.arguments.forEach(function(t){r.push(o.Lt(t))}),n=this.Lt(t.It,!0),function(t,s,i,o){const l=n(t,s,i,o);let u;if(null!=l.value){const e=[];for(let n=0;r.length>n;++n)e.push(r[n](t,s,i,o));u=l.value.apply(l.context,e)}return e?{value:u}:u};case Zs.D:return i=this.Lt(t.left,!0,1),n=this.Lt(t.right),function(t,s,r,o){const l=i(t,s,r,o),u=n(t,s,r,o);return l.context[l.name]=u,e?{value:u}:u};case Zs.H:return r=[],t.elements.forEach(function(t){r.push(o.Lt(t))}),function(t,s,i,n){const o=[];for(let e=0;r.length>e;++e)o.push(r[e](t,s,i,n));return e?{value:o}:o};case Zs.K:return r=[],t.properties.forEach(function(t){r.push(t.computed?{key:o.Lt(t.key),computed:!0,value:o.Lt(t.value)}:{key:t.key.type===Zs.O?t.key.name:""+t.key.value,computed:!1,value:o.Lt(t.value)})}),function(t,s,i,n){const o={};for(let e=0;r.length>e;++e)r[e].computed?o[r[e].key(t,s,i,n)]=r[e].value(t,s,i,n):o[r[e].key]=r[e].value(t,s,i,n);return e?{value:o}:o};case Zs.X:return function(t){return e?{value:t}:t};case Zs.Y:return function(t,s){return e?{value:s}:s};case Zs.tt:return function(t,s,i){return e?{value:i}:i}}}"unary+"(t,e){return function(s,i,n,r){let o=t(s,i,n,r);return o=void 0!==o?+o:0,e?{value:o}:o}}"unary-"(t,e){return function(s,i,n,r){let o=t(s,i,n,r);return o=void 0!==o?-o:-0,e?{value:o}:o}}"unary!"(t,e){return function(s,i,n,r){const o=!t(s,i,n,r);return e?{value:o}:o}}"binary+"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o),u=(h=e(i,n,r,o),void 0===(a=l)?h:void 0===h?a:a+h);var a,h;return s?{value:u}:u}}"binary-"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o),u=e(i,n,r,o),a=(void 0!==l?l:0)-(void 0!==u?u:0);return s?{value:a}:a}}"binary*"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)*e(i,n,r,o);return s?{value:l}:l}}"binary/"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)/e(i,n,r,o);return s?{value:l}:l}}"binary%"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)%e(i,n,r,o);return s?{value:l}:l}}"binary==="(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)===e(i,n,r,o);return s?{value:l}:l}}"binary!=="(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)!==e(i,n,r,o);return s?{value:l}:l}}"binary=="(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)==e(i,n,r,o);return s?{value:l}:l}}"binary!="(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)!=e(i,n,r,o);return s?{value:l}:l}}"binary<"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)<e(i,n,r,o);return s?{value:l}:l}}"binary>"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)>e(i,n,r,o);return s?{value:l}:l}}"binary<="(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)<=e(i,n,r,o);return s?{value:l}:l}}"binary>="(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)>=e(i,n,r,o);return s?{value:l}:l}}"binary&&"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)&&e(i,n,r,o);return s?{value:l}:l}}"binary||"(t,e,s){return function(i,n,r,o){const l=t(i,n,r,o)||e(i,n,r,o);return s?{value:l}:l}}"ternary?:"(t,e,s,i){return function(n,r,o,l){const u=t(n,r,o,l)?e(n,r,o,l):s(n,r,o,l);return i?{value:u}:u}}value(t,e){return function(){return e?{context:void 0,name:void 0,value:t}:t}}identifier(t,e,s){return function(i,n,r,o){const l=n&&t in n?n:i;s&&1!==s&&l&&null==l[t]&&(l[t]={});const u=l?l[t]:void 0;return e?{context:l,name:t,value:u}:u}}Ot(t,e,s,i,n){return function(r,o,l,u){const a=t(r,o,l,u);let h,c;return n&&null==a?c=void 0:null!=a&&(h=e(r,o,l,u),h+="",i&&1!==i&&a&&!a[h]&&(a[h]={}),c=a[h]),s?{context:a,name:h,value:c}:c}}Pt(t,e,s,i,n){return function(r,o,l,u){const a=t(r,o,l,u);let h;return n&&null==a?h=void 0:(i&&1!==i&&a&&null==a[e]&&(a[e]={}),h=null!=a?a[e]:void 0),s?{context:a,name:e,value:h}:h}}inputs(t,e){return function(s,i,n,r){return r?r[e]:t(s,i,n)}}};class ti{constructor(t,e){this.et=new Zs(t,e),this.qt=new Qs}parse(t){const e=this.Vt(t),s=this.qt.compile(e.et);return s.Bt=0===(i=e.et).body.length||1===i.body.length&&(i.body[0].st.type===Zs.F||i.body[0].st.type===Zs.H||i.body[0].st.type===Zs.K),s.N=function(t){return t.N}(e.et),s.Dt=e.Dt,s;var i}Vt(t){let e=!1;return":"===(t=t.trim()).charAt(0)&&":"===t.charAt(1)&&(e=!0,t=t.substring(2)),{et:this.et.et(t),Dt:e}}}const ei=new function(t={}){const e=new Gs,s=new ti(e,t);function i(t){return s.parse(t)}return i.parse=function(t){return s.parse(t)},i},si=(t,e,s)=>ii(t,e),ii=(t,e,s)=>{try{return ei(e)(t)}catch(i){console.error(i)}},ni={bind:Rs,on:Us,show:({el:t,get:e,effect:s})=>{const i=t.style.display;s(()=>{t.style.display=e()?i:"none"})},text:Vs,html:({el:t,get:e,effect:s})=>{s(()=>{t.innerHTML=e()})},effect:({el:t,ctx:e,exp:s,effect:i})=>{_s(()=>i(()=>ii(e.scope,s)))}},ri=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,oi=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,li=/^\(|\)$/g,ui=/^[{[]\s*((?:[\w_$]+\s*,?\s*)+)[\]}]$/,ai=(t,e,s)=>{const i=e.match(ri);if(!i)return;const n=t.nextSibling,r=t.parentElement,o=new Text("");r.insertBefore(o,t),r.removeChild(t);const l=i[2].trim();let u,a,h,c,d=i[1].trim().replace(li,"").trim(),D=!1,f="key",p=t.getAttribute(f)||t.getAttribute(f=":key")||t.getAttribute(f="v-bind:key");p&&(t.removeAttribute(f),"key"===f&&(p=JSON.stringify(p))),(c=d.match(oi))&&(d=d.replace(oi,"").trim(),a=c[1].trim(),c[2]&&(h=c[2].trim())),(c=d.match(ui))&&(u=c[1].split(",").map(t=>t.trim()),D="["===d[0]);let m,g,F,v=!1;const w=(t,e,i,n)=>{const r={};u?u.forEach((t,s)=>r[t]=e[D?s:t]):r[d]=e,n?(a&&(r[a]=n),h&&(r[h]=i)):a&&(r[a]=i);const o=vi(s,r),l=p?si(o.scope,p):i;return t.set(l,i),o.key=l,o},b=(e,s)=>{const i=new bi(t,e);return i.key=e.key,i.insert(r,s),i};return s.effect(()=>{const t=si(s.scope,l),e=F;if([g,F]=(t=>{const e=new Map,s=[];if(Fs(t))for(let i=0;i<t.length;i++)s.push(w(e,t[i],i));else if("number"==typeof t)for(let i=0;i<t;i++)s.push(w(e,i+1,i));else if(ws(t)){let i=0;for(const n in t)s.push(w(e,t[n],i++,n))}return[s,e]})(t),v){for(let e=0;e<m.length;e++)F.has(m[e].key)||m[e].remove();const t=[];let s,i,n=g.length;for(;n--;){const l=g[n],u=e.get(l.key);let a;null==u?a=b(l,s?s.el:o):(a=m[u],Object.assign(a.ctx.scope,l.scope),u!==n&&(m[u+1]!==s||i===s)&&(i=a,a.insert(r,s?s.el:o))),t.unshift(s=a)}m=t}else m=g.map(t=>b(t,o)),v=!0}),n},hi=({el:t,ctx:{scope:{$refs:e}},get:s,effect:i})=>{let n;return i(()=>{const i=s();e[i]=t,n&&i!==n&&delete e[n],n=i}),()=>{n&&delete e[n]}},ci=/^(?:v-|:|@)/,di=/\.([\w-]+)/g;let Di=!1;const fi=(t,e)=>{const s=t.nodeType;if(1===s){const s=t;if(s.hasAttribute("v-pre"))return;let i;if(Ts(s,"v-cloak"),i=Ts(s,"v-if"))return((t,e,s)=>{const i=t.parentElement,n=new Comment("v-if");i.insertBefore(n,t);const r=[{exp:e,el:t}];let o,l;for(;(o=t.nextElementSibling)&&(l=null,""===Ts(o,"v-else")||(l=Ts(o,"v-else-if")));)i.removeChild(o),r.push({exp:l,el:o});const u=t.nextSibling;i.removeChild(t);let a,h=-1;const c=()=>{a&&(i.insertBefore(n,a.el),a.remove(),a=void 0)};return s.effect(()=>{for(let t=0;t<r.length;t++){const{exp:e,el:o}=r[t];if(!e||si(s.scope,e))return void(t!==h&&(c(),a=new bi(o,s),a.insert(i,n),i.removeChild(n),h=t))}h=-1,c()}),u})(s,i,e);if(i=Ts(s,"v-for"))return ai(s,i,e);if((i=Ts(s,"v-scope"))||""===i){const t=i?si(e.scope,i):{};e=vi(e,t),t.$template&&gi(s,t.$template)}const n=null!=Ts(s,"v-once");n&&(Di=!0),(i=Ts(s,"ref"))&&mi(s,hi,`"${i}"`,e),pi(s,e);const r=[];for(const{name:t,value:o}of[...s.attributes])ci.test(t)&&"v-cloak"!==t&&("v-model"===t?r.unshift([t,o]):"@"===t[0]||/^v-on\b/.test(t)?r.push([t,o]):_i(s,t,o,e));for(const[t,o]of r)_i(s,t,o,e);n&&(Di=!1)}else if(3===s){const s=t.data;if(s.includes(e.delimiters[0])){let i,n=[],r=0;for(;i=e.delimitersRE.exec(s);){const t=s.slice(r,i.index);t&&n.push(JSON.stringify(t)),n.push(`$s(${i[1]})`),r=i.index+i[0].length}r<s.length&&n.push(JSON.stringify(s.slice(r))),mi(t,Vs,n.join("+"),e)}}else 11===s&&pi(t,e)},pi=(t,e)=>{let s=t.firstChild;for(;s;)s=fi(s,e)||s.nextSibling},_i=(t,e,s,i)=>{let n,r,o,l=e.replace(di,(t,e)=>((o||(o={}))[e]=!0,""));if(":"===l[0])n=Rs,r=l.slice(1);else if("@"===l[0])n=Us,r=l.slice(1);else{const t=l.indexOf(":"),e=t>0?l.slice(2,t):l.slice(2);n=ni[e]||i.dirs[e],r=t>0?l.slice(t+1):void 0}n&&(n===Rs&&"ref"===r&&(n=hi),mi(t,n,s,i,r,o),t.removeAttribute(e))},mi=(t,e,s,i,n,r)=>{const o=e({el:t,get:(t=s)=>si(i.scope,t),effect:i.effect,ctx:i,exp:s,arg:n,modifiers:r});o&&i.cleanups.push(o)},gi=(t,e)=>{if("#"===e[0]){const s=document.querySelector(e);return void t.appendChild(s.content.cloneNode(!0))}t.innerHTML=e},Fi=(t,e)=>{const s=cs(hs({delimiters:["{{","}}"],delimitersRE:/\{\{([^]+?)\}\}/g},e),{scope:e?e.scope:t.reactive({}),dirs:e?e.dirs:{},effects:[],blocks:[],cleanups:[],effect:e=>{if(Di)return ms(e),e;const i=t.effect(e,{scheduler:()=>ms(i)});return s.effects.push(i),i},remove:t.remove,stop:t.stop,reactive:t.reactive});return s},vi=(t,e={})=>{const s=t.scope,i=Object.create(s);Object.defineProperties(i,Object.getOwnPropertyDescriptors(e)),i.$refs=Object.create(s.$refs);const n=t.reactive(new Proxy(i,{set:(t,e,i,r)=>r!==n||Object.prototype.hasOwnProperty.call(t,e)?Reflect.set(t,e,i,r):Reflect.set(s,e,i)}));return wi(n),cs(hs({},t),{scope:n,remove:t.remove,stop:t.stop,reactive:t.reactive})},wi=t=>{for(const e of Object.keys(t))"function"==typeof t[e]&&(t[e]=ss(t[e],t))};let bi=class{constructor(t,e,s=!1){ds(this,"template"),ds(this,"ctx"),ds(this,"key"),ds(this,"parentCtx"),ds(this,"isFragment"),ds(this,"start"),ds(this,"end"),this.isFragment=t instanceof HTMLTemplateElement,s?this.template=t:this.isFragment?this.template=t.content.cloneNode(!0):this.template=t.cloneNode(!0),s?this.ctx=e:(this.parentCtx=e,e.blocks.push(this),this.ctx=Fi({reactive:e.reactive,effect:e.effect,remove:e.remove,stop:e.stop},e)),fi(this.template,this.ctx)}get el(){return this.start||this.template}insert(t,e=null){if(this.isFragment)if(this.start){let s,i=this.start;for(;i&&(s=i.nextSibling,t.insertBefore(i,e),i!==this.end);)i=s}else this.start=new Text(""),this.end=new Text(""),t.insertBefore(this.end,e),t.insertBefore(this.start,this.end),t.insertBefore(this.template,this.end);else t.insertBefore(this.template,e)}remove(){if(this.parentCtx&&this.parentCtx.remove(this.parentCtx.blocks,this),this.start){const t=this.start.parentNode;let e,s=this.start;for(;s&&(e=s.nextSibling,t.removeChild(s),s!==this.end);)s=e}else this.template.parentNode.removeChild(this.template);this.teardown()}teardown(){this.ctx.blocks.forEach(t=>{t.teardown()}),this.ctx.effects.forEach(this.ctx.stop),this.ctx.cleanups.forEach(t=>t())}};const yi=t=>t.replace(/[-.*+?^${}()|[\]\/\\]/g,"\\$&"),Ei=(t,e)=>{const s=Fi(t);if(e&&(s.scope=t.reactive(e),wi(s.scope),e.$delimiters)){const[t,i]=s.delimiters=e.$delimiters;s.delimitersRE=new RegExp(yi(t)+"([^]+?)"+yi(i),"g")}let i;return s.scope.$s=Ns,s.scope.$nextTick=_s,s.scope.$refs=Object.create(null),{directive(t,e){return e?(s.dirs[t]=e,this):s.dirs[t]},mount(t){if("string"==typeof t&&!(t=document.querySelector(t)))return;let e;return e=(t=t||document.documentElement).hasAttribute("v-scope")?[t]:[...t.querySelectorAll("[v-scope]")].filter(t=>!t.matches("[v-scope] [v-scope]")),e.length||(e=[t]),i=e.map(t=>new bi(t,s,!0)),this},unmount(){i.forEach(t=>t.teardown())}}};const Ci=Qe({users_available:!1,last_available:0,was_availability_online:!1,availability:"away"},{receive(t=!1,s=!1){if(Ci.users_available=t,!0===s){let t=(new Date).getTime();Ci.last_available=t}e().Action.event("website:availability:changed",Ci.users_available)},apply(){let t=!0===Ci.users_available?"online":"away";Ci.availability=t,!1===Ci.was_availability_online&&"online"===t&&(Ci.was_availability_online=!0)}});function ki(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}let $i=class{constructor(t){this.parent=t,this.smiley_map={angry:":@",blushing:":$",confused:"x)",cool:"8)",crying:":'(",embarrassed:":/",heart:"<3",laughing:":'D",sad:":(",sick:":S","small-smile":":)","big-smile":":D","thumbs-up":"[+1]",surprised:":o",tongue:":P",winking:";)"},this.We={angry:"((?:=|:)(?:-)?@)",blushing:"((?:=|:)(?:-)?\\$)",cool:"(8(?:-)?\\))",confused:"(x(?:-)?\\))",crying:"((?:=|:)'(?:-)?\\()",embarrassed:"((?:=|:)(?:-)?\\/)",heart:"(&lt;3)",laughing:"((?:=|:)(?:-)?'D)",sad:"((?:=|:)(?:-)?(?:\\(|\\|))",sick:"((?:=|:)(?:-)?S)","small-smile":"((?:=|:)(?:-)?\\))","big-smile":"((?:=|:)(?:-)?D)","thumbs-up":"(\\[\\+1\\])",surprised:"((?:=|:)(?:-)?o)",tongue:"((?:=|:)(?:-)?P)",winking:"(;(?:-)?\\))"},this.Je()}code(t,e="small"){return this.parent.template.render("smiley",{name:t,size:e})}parse(t){let e,s,i,n,r,o=t;for(e in this.Ge)if(this.Ge.hasOwnProperty(e))for(s=this.Ge[e];null!==(r=o.match(s));)i="small",o===r[2]&&(i="large"),n=this.code(e,i),o=o.replace(s,`$1${n}$3`);return o}count(t){let e,s,i=0,n=t;for(e in this.Ge)if(this.Ge.hasOwnProperty(e))for(s=this.Ge[e];!0===s.test(n);)i++,n=n.replace(s,"$1[]$3");return i}name(t){let e,s,i=null;for(e in this.Ge)if(this.Ge.hasOwnProperty(e)&&(s=this.Ge[e],t.match(s))){i=e;break}return i}Je(){let t;for(t in this.Ge={},this.We)this.Ge[t]=new RegExp(`(^|\\s|\\()${this.We[t]}($|\\s|\\))`,"i")}},Ai=class{constructor(t){this.parent=t,this.Ke=/[#*0-9]\uFE0F?\u20E3|[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u23CF\u23ED-\u23EF\u23F1\u23F2\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB\u25FC\u25FE\u2600-\u2604\u260E\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262A\u262E\u262F\u2638-\u263A\u2640\u2642\u2648-\u2653\u265F\u2660\u2663\u2665\u2666\u2668\u267B\u267E\u267F\u2692\u2694-\u2697\u2699\u269B\u269C\u26A0\u26A7\u26AA\u26B0\u26B1\u26BD\u26BE\u26C4\u26C8\u26CF\u26D1\u26E9\u26F0-\u26F5\u26F7\u26F8\u26FA\u2702\u2708\u2709\u270F\u2712\u2714\u2716\u271D\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u27A1\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B55\u3030\u303D\u3297\u3299]\uFE0F?|[\u261D\u270C\u270D](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\u270A\u270B](?:\uD83C[\uDFFB-\uDFFF])?|[\u23E9-\u23EC\u23F0\u23F3\u25FD\u2693\u26A1\u26AB\u26C5\u26CE\u26D4\u26EA\u26FD\u2705\u2728\u274C\u274E\u2753-\u2755\u2795-\u2797\u27B0\u27BF\u2B50]|\u26D3\uFE0F?(?:\u200D\uD83D\uDCA5)?|\u26F9(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\u2764\uFE0F?(?:\u200D(?:\uD83D\uDD25|\uD83E\uDE79))?|\uD83C(?:[\uDC04\uDD70\uDD71\uDD7E\uDD7F\uDE02\uDE37\uDF21\uDF24-\uDF2C\uDF36\uDF7D\uDF96\uDF97\uDF99-\uDF9B\uDF9E\uDF9F\uDFCD\uDFCE\uDFD4-\uDFDF\uDFF5\uDFF7]\uFE0F?|[\uDF85\uDFC2\uDFC7](?:\uD83C[\uDFFB-\uDFFF])?|[\uDFC4\uDFCA](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDFCB\uDFCC](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDCCF\uDD8E\uDD91-\uDD9A\uDE01\uDE1A\uDE2F\uDE32-\uDE36\uDE38-\uDE3A\uDE50\uDE51\uDF00-\uDF20\uDF2D-\uDF35\uDF37-\uDF43\uDF45-\uDF4A\uDF4C-\uDF7C\uDF7E-\uDF84\uDF86-\uDF93\uDFA0-\uDFC1\uDFC5\uDFC6\uDFC8\uDFC9\uDFCF-\uDFD3\uDFE0-\uDFF0\uDFF8-\uDFFF]|\uDDE6\uD83C[\uDDE8-\uDDEC\uDDEE\uDDF1\uDDF2\uDDF4\uDDF6-\uDDFA\uDDFC\uDDFD\uDDFF]|\uDDE7\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEF\uDDF1-\uDDF4\uDDF6-\uDDF9\uDDFB\uDDFC\uDDFE\uDDFF]|\uDDE8\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDEE\uDDF0-\uDDF7\uDDFA-\uDDFF]|\uDDE9\uD83C[\uDDEA\uDDEC\uDDEF\uDDF0\uDDF2\uDDF4\uDDFF]|\uDDEA\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDED\uDDF7-\uDDFA]|\uDDEB\uD83C[\uDDEE-\uDDF0\uDDF2\uDDF4\uDDF7]|\uDDEC\uD83C[\uDDE6\uDDE7\uDDE9-\uDDEE\uDDF1-\uDDF3\uDDF5-\uDDFA\uDDFC\uDDFE]|\uDDED\uD83C[\uDDF0\uDDF2\uDDF3\uDDF7\uDDF9\uDDFA]|\uDDEE\uD83C[\uDDE8-\uDDEA\uDDF1-\uDDF4\uDDF6-\uDDF9]|\uDDEF\uD83C[\uDDEA\uDDF2\uDDF4\uDDF5]|\uDDF0\uD83C[\uDDEA\uDDEC-\uDDEE\uDDF2\uDDF3\uDDF5\uDDF7\uDDFC\uDDFE\uDDFF]|\uDDF1\uD83C[\uDDE6-\uDDE8\uDDEE\uDDF0\uDDF7-\uDDFB\uDDFE]|\uDDF2\uD83C[\uDDE6\uDDE8-\uDDED\uDDF0-\uDDFF]|\uDDF3\uD83C[\uDDE6\uDDE8\uDDEA-\uDDEC\uDDEE\uDDF1\uDDF4\uDDF5\uDDF7\uDDFA\uDDFF]|\uDDF4\uD83C\uDDF2|\uDDF5\uD83C[\uDDE6\uDDEA-\uDDED\uDDF0-\uDDF3\uDDF7-\uDDF9\uDDFC\uDDFE]|\uDDF6\uD83C\uDDE6|\uDDF7\uD83C[\uDDEA\uDDF4\uDDF8\uDDFA\uDDFC]|\uDDF8\uD83C[\uDDE6-\uDDEA\uDDEC-\uDDF4\uDDF7-\uDDF9\uDDFB\uDDFD-\uDDFF]|\uDDF9\uD83C[\uDDE6\uDDE8\uDDE9\uDDEB-\uDDED\uDDEF-\uDDF4\uDDF7\uDDF9\uDDFB\uDDFC\uDDFF]|\uDDFA\uD83C[\uDDE6\uDDEC\uDDF2\uDDF3\uDDF8\uDDFE\uDDFF]|\uDDFB\uD83C[\uDDE6\uDDE8\uDDEA\uDDEC\uDDEE\uDDF3\uDDFA]|\uDDFC\uD83C[\uDDEB\uDDF8]|\uDDFD\uD83C\uDDF0|\uDDFE\uD83C[\uDDEA\uDDF9]|\uDDFF\uD83C[\uDDE6\uDDF2\uDDFC]|\uDF44(?:\u200D\uD83D\uDFEB)?|\uDF4B(?:\u200D\uD83D\uDFE9)?|\uDFC3(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDFF3\uFE0F?(?:\u200D(?:\u26A7\uFE0F?|\uD83C\uDF08))?|\uDFF4(?:\u200D\u2620\uFE0F?|\uDB40\uDC67\uDB40\uDC62\uDB40(?:\uDC65\uDB40\uDC6E\uDB40\uDC67|\uDC73\uDB40\uDC63\uDB40\uDC74|\uDC77\uDB40\uDC6C\uDB40\uDC73)\uDB40\uDC7F)?)|\uD83D(?:[\uDC3F\uDCFD\uDD49\uDD4A\uDD6F\uDD70\uDD73\uDD76-\uDD79\uDD87\uDD8A-\uDD8D\uDDA5\uDDA8\uDDB1\uDDB2\uDDBC\uDDC2-\uDDC4\uDDD1-\uDDD3\uDDDC-\uDDDE\uDDE1\uDDE3\uDDE8\uDDEF\uDDF3\uDDFA\uDECB\uDECD-\uDECF\uDEE0-\uDEE5\uDEE9\uDEF0\uDEF3]\uFE0F?|[\uDC42\uDC43\uDC46-\uDC50\uDC66\uDC67\uDC6B-\uDC6D\uDC72\uDC74-\uDC76\uDC78\uDC7C\uDC83\uDC85\uDC8F\uDC91\uDCAA\uDD7A\uDD95\uDD96\uDE4C\uDE4F\uDEC0\uDECC](?:\uD83C[\uDFFB-\uDFFF])?|[\uDC6E-\uDC71\uDC73\uDC77\uDC81\uDC82\uDC86\uDC87\uDE45-\uDE47\uDE4B\uDE4D\uDE4E\uDEA3\uDEB4\uDEB5](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD74\uDD90](?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?|[\uDC00-\uDC07\uDC09-\uDC14\uDC16-\uDC25\uDC27-\uDC3A\uDC3C-\uDC3E\uDC40\uDC44\uDC45\uDC51-\uDC65\uDC6A\uDC79-\uDC7B\uDC7D-\uDC80\uDC84\uDC88-\uDC8E\uDC90\uDC92-\uDCA9\uDCAB-\uDCFC\uDCFF-\uDD3D\uDD4B-\uDD4E\uDD50-\uDD67\uDDA4\uDDFB-\uDE2D\uDE2F-\uDE34\uDE37-\uDE41\uDE43\uDE44\uDE48-\uDE4A\uDE80-\uDEA2\uDEA4-\uDEB3\uDEB7-\uDEBF\uDEC1-\uDEC5\uDED0-\uDED2\uDED5-\uDED8\uDEDC-\uDEDF\uDEEB\uDEEC\uDEF4-\uDEFC\uDFE0-\uDFEB\uDFF0]|\uDC08(?:\u200D\u2B1B)?|\uDC15(?:\u200D\uD83E\uDDBA)?|\uDC26(?:\u200D(?:\u2B1B|\uD83D\uDD25))?|\uDC3B(?:\u200D\u2744\uFE0F?)?|\uDC41\uFE0F?(?:\u200D\uD83D\uDDE8\uFE0F?)?|\uDC68(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDC68\uDC69]\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?)|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFC-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFD-\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFD\uDFFF]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?\uDC68\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDD1D\uDEEF]\u200D\uD83D\uDC68\uD83C[\uDFFB-\uDFFE]|[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3])))?))?|\uDC69(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:\uDC8B\u200D\uD83D)?[\uDC68\uDC69]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?|\uDC69\u200D\uD83D(?:\uDC66(?:\u200D\uD83D\uDC66)?|\uDC67(?:\u200D\uD83D[\uDC66\uDC67])?))|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFC-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFD-\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFD\uDFFF]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D\uD83D(?:[\uDC68\uDC69]|\uDC8B\u200D\uD83D[\uDC68\uDC69])\uD83C[\uDFFB-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3]|\uDD1D\u200D\uD83D[\uDC68\uDC69]\uD83C[\uDFFB-\uDFFE]|\uDEEF\u200D\uD83D\uDC69\uD83C[\uDFFB-\uDFFE])))?))?|\uDD75(?:\uD83C[\uDFFB-\uDFFF]|\uFE0F)?(?:\u200D[\u2640\u2642]\uFE0F?)?|\uDE2E(?:\u200D\uD83D\uDCA8)?|\uDE35(?:\u200D\uD83D\uDCAB)?|\uDE36(?:\u200D\uD83C\uDF2B\uFE0F?)?|\uDE42(?:\u200D[\u2194\u2195]\uFE0F?)?|\uDEB6(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?)|\uD83E(?:[\uDD0C\uDD0F\uDD18-\uDD1F\uDD30-\uDD34\uDD36\uDD77\uDDB5\uDDB6\uDDBB\uDDD2\uDDD3\uDDD5\uDEC3-\uDEC5\uDEF0\uDEF2-\uDEF8](?:\uD83C[\uDFFB-\uDFFF])?|[\uDD26\uDD35\uDD37-\uDD39\uDD3C-\uDD3E\uDDB8\uDDB9\uDDCD\uDDCF\uDDD4\uDDD6-\uDDDD](?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDDDE\uDDDF](?:\u200D[\u2640\u2642]\uFE0F?)?|[\uDD0D\uDD0E\uDD10-\uDD17\uDD20-\uDD25\uDD27-\uDD2F\uDD3A\uDD3F-\uDD45\uDD47-\uDD76\uDD78-\uDDB4\uDDB7\uDDBA\uDDBC-\uDDCC\uDDD0\uDDE0-\uDDFF\uDE70-\uDE7C\uDE80-\uDE8A\uDE8E-\uDEC2\uDEC6\uDEC8\uDECD-\uDEDC\uDEDF-\uDEEA\uDEEF]|\uDDCE(?:\uD83C[\uDFFB-\uDFFF])?(?:\u200D(?:[\u2640\u2642]\uFE0F?(?:\u200D\u27A1\uFE0F?)?|\u27A1\uFE0F?))?|\uDDD1(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1|\uDDD1\u200D\uD83E\uDDD2(?:\u200D\uD83E\uDDD2)?|\uDDD2(?:\u200D\uD83E\uDDD2)?))|\uD83C(?:\uDFFB(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFC-\uDFFF])))?|\uDFFC(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFD-\uDFFF])))?|\uDFFD(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])))?|\uDFFE(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFD\uDFFF])))?|\uDFFF(?:\u200D(?:[\u2695\u2696\u2708]\uFE0F?|\u2764\uFE0F?\u200D(?:\uD83D\uDC8B\u200D)?\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE]|\uD83C[\uDF3E\uDF73\uDF7C\uDF84\uDF93\uDFA4\uDFA8\uDFEB\uDFED]|\uD83D(?:[\uDCBB\uDCBC\uDD27\uDD2C\uDE80\uDE92]|\uDC30\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])|\uD83E(?:[\uDDAF\uDDBC\uDDBD](?:\u200D\u27A1\uFE0F?)?|[\uDDB0-\uDDB3\uDE70]|\uDD1D\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFF]|\uDEEF\u200D\uD83E\uDDD1\uD83C[\uDFFB-\uDFFE])))?))?|\uDEF1(?:\uD83C(?:\uDFFB(?:\u200D\uD83E\uDEF2\uD83C[\uDFFC-\uDFFF])?|\uDFFC(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFD-\uDFFF])?|\uDFFD(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB\uDFFC\uDFFE\uDFFF])?|\uDFFE(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFD\uDFFF])?|\uDFFF(?:\u200D\uD83E\uDEF2\uD83C[\uDFFB-\uDFFE])?))?)/g}code(t,e="small"){return this.parent.template.render("emoji",{name:t,size:e})}count(t){let e=t.match(this.Ke);return e?e.length:0}parse(t){let e=this.Ye(t)?"large":"small";return t.replace(this.Ke,t=>this.code(t,e))}Ye(t){let e=this.count(t);return!(e<1||e>3)&&""===t.replace(this.Ke,"").trim()}};var Bi,xi;var ji,Ii=(ji=xi?Bi:(xi=1,Bi=["com","net","org","info","biz","mobi","chat","email","help","watch","name","pro","aero","asia","cat","coop","edu","gov","int","jobs","mil","museum","post","tel","travel","xxx","xyz","top","site","online","club","shop","work","app","live","store","space","website","tech","life","dev","blog","cloud","page","link","design","group","company","agency","network","media","immo","ac","ad","ae","af","ag","ai","al","am","an","ao","aq","ar","as","at","au","aw","ax","az","ba","bb","bd","be","bf","bg","bh","bi","bj","bl","bm","bn","bo","bq","br","bs","bt","bv","bw","by","bz","ca","cc","cd","cf","cg","ch","ci","ck","cl","cm","cn","co","cr","cu","cv","cw","cx","cy","cz","de","dj","dk","dm","do","dz","ec","ee","eg","eh","er","es","et","eu","fi","fj","fk","fm","fo","fr","ga","gb","gd","ge","gf","gg","gh","gi","gl","gm","gn","gp","gq","gr","gs","gt","gu","gw","gy","hk","hm","hn","hr","ht","hu","id","ie","il","im","in","io","iq","ir","is","it","je","jm","jo","jp","ke","kg","kh","ki","km","kn","kp","kr","kw","ky","kz","la","lb","lc","li","lk","lr","ls","lt","lu","lv","ly","ma","mc","md","me","mf","mg","mh","mk","ml","mm","mn","mo","mp","mq","mr","ms","mt","mu","mv","mw","mx","my","mz","na","nc","ne","nf","ng","ni","nl","no","np","nr","nu","nz","om","pa","pe","pf","pg","ph","pk","pl","pm","pn","pr","ps","pt","pw","py","qa","re","ro","rs","ru","rw","sa","sb","sc","sd","se","sg","sh","si","sj","sk","sl","sm","sn","so","sr","ss","st","su","sv","sx","sy","sz","tc","td","tf","tg","th","tj","tk","tl","tm","tn","to","tp","tr","tt","tv","tw","tz","ua","ug","uk","um","us","uy","uz","va","vc","ve","vg","vi","vn","vu","wf","ws","ye","yt","za","zm","zw"]))&&ji.Ze&&Object.prototype.hasOwnProperty.call(ji,"default")?ji.default:ji;let Si=class{constructor(t){this.parent=t,this.Xe=Ii,this.Qe={"&":/&amp;/g,"<":/&lt;/g,">":/&gt;/g,'"':/&quot;/g},this.tn={"&amp;":/&/g,"&lt;":/</g,"&gt;":/>/g,"&quot;":/"/g},this.en=/&#(\d+);|&#x([0-9A-Fa-f]+);/g,this.sn={"\\\\":/\\/g,"\\t":/\t/g,"\\n":/\n/g,"\\u00A0":/\u00A0/g,"&quot;":/"/g,"&apos;":/'/g,"&lowbar;":/_/g,"&ast;":/\*/g,"&plus;":/\+/g,"&#126;":/~/g},this.nn={"<":/&lt;/g,">":/&gt;/g},this.rn=/[-\/\\^$*+?.()|[\]{}]/g,this.ln=/([\#$\*\_\-+![\]\(\)`~><\.|{}])/g,this.un=/\n(\s+)?\n(\s+)?\n/g,this.an=/\n/g,this.hn=/^([a-z]{1,20})\n((?:\n?.*)*)$/,this.cn=new RegExp("^(.+?)(?:\\s+=(?:(\\d+|auto)(?:x(\\d+|auto))?)?)?$"),this.dn=/(,|\.)(\s|$)/g,this.Dn=/\u0001/g,this.pn=/^(www\.)/i,this.mn={links:{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(\\s||<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"},markdown_simple:{prefix:"(^)",suffix:"($)"},markdown_includes:{prefix:"(\\s|<[^<>]+\\/>|<[^<>]+>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|\\)|$)"},markdown_formatting:{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:""},markdown_list:{prefix:"(^\\s*)",suffix:"(.*?)($)"}},this.gn=["title","list","code_inline","blockquote","table","emphasis"],this.Fn=["code_block","code_inline"],this.vn=["decode_html_entities","escape","consecutive_lines","markdown","links_uri","links_domain","emails","phones","smileys","emojis","new_lines"],this.wn={escape:this.bn,decode_html_entities:this.yn,consecutive_lines:this.En,new_lines:this.Cn,emails:this.kn,phones:this.$n,markdown:this.An,links_domain:this.Bn,links_uri:this.xn,smileys:this.jn,emojis:this.In},this.Sn={markdown_link_image:this.Rn,markdown_image:this.On,markdown_code_block:this.zn,markdown_table:this.Pn},this.Tn(),this.Ln()}format(t,e={},s=[]){let i,n,r=t;for(i=0;i<this.vn.length;i++)n=this.vn[i],-1===s.indexOf(n)&&(r=ki(this.wn[n],this)(r,e));return r}replace(t,e=[]){let s,i,n=t;for(s=0;s<e.length;s++)i=s+1,n=n.replace(`%${i}s`,e[s]);return n}attribute(t){return this.bn(t,{},this.sn)}html(t,e=!1){return this.bn(t,{},!0===e?this.Qe:this.tn)}escape_regex(t){return t.replace(this.rn,"\\$&")}bn(t,e={},s=null){let i,n,r=t,o=s||this.tn;for(n in o)o.hasOwnProperty(n)&&(i=o[n],r=r.replace(i,n));return r}yn(t,e={}){return t.replace(this.en,(t,e,s)=>{let i=e?parseInt(e,10):parseInt(s,16);return String.fromCharCode(i)})}En(t,e={}){return t.replace(this.un,"\n\n")}Cn(t,e={}){let s=this.parent.template.render("new_line",{},e);return t.trim().replace(this.an,s)}kn(t,e={}){return this.Mn(t,this.qn.email,(t,s,i,n)=>`${s}${this.parent.template.render("link_email",{email:i,no_external_link:this.parent.config.runtime.no_external_link||!1},e)}${n}`)}$n(t,e={}){return this.Mn(t,this.qn.phone,(t,s,i,n)=>`${s}${this.parent.template.render("link_phone",{phone:i,no_external_link:this.parent.config.runtime.no_external_link||!1},e)}${n}`)}An(t,e={}){t=`\n${t}\n`;for(let s=0;s<this.Un.length;s++)t=t.replace(this.Un[s][1],this.Vn(this.Un[s],e));return t.trim()}Bn(t,e={}){return this.Mn(t,this.qn.domain,(t,s,i,n)=>`${s}${this.parent.template.render("link_domain",{domain_value:i,domain_name:i,no_external_link:this.parent.config.runtime.no_external_link||!1},e)}${n}`)}xn(t,e={}){return this.Mn(t,this.qn.uri,(t,s,i,n)=>{let r=!0===this.pn.test(i)?`http://${i}`:i;return`${s}${this.parent.template.render("link_uri",{uri_value:r,uri_name:i,no_external_link:this.parent.config.runtime.no_external_link||!1},e)}${n}`})}jn(t,e={}){return this.parent.Smileys.parse(t)}In(t,e={}){return this.parent.Emojis.parse(t)}Rn(t){return this.Nn("type",t)}On(t){return this.Nn("value",t)}zn(t){let e=(t.value||"").match(this.hn);(null==e?void 0:e[1])?(t.type=e[1],t.value=e[2]):t.type="none",t.value=(t.value||"").trim()}Pn(t){let e=t.type.split("|"),s=e.slice(1,e.length-1).map(t=>(t||"").trim()),i=t.value.split("\n").map(t=>{let e=t.split("|"),i=e.slice(1,e.length-1).map(t=>(t||"").trim()),n=s.length-i.length;if(0!==n)if(n<0)i=i.slice(0,s.length);else for(let s=0;s<n;s++)i.push("");return i});t.type=s,t.value=i}Vn(t,e={}){return(s,i,n,r,o)=>{let l=`markdown_${t[0]}`,u="",a="",h={type:null,value:null,url_crisp_image:this.parent.config.url.crisp_image,no_external_link:this.parent.config.runtime.no_external_link||!1};u=("string"==typeof i?i:null)||"",a=("string"==typeof o?o:null)||"",h.type=n,h.value=r,-1!==this.gn.indexOf(t[0])&&"string"==typeof h.value&&(h.value=h.value.trim()),-1!==this.Fn.indexOf(t[0])&&"string"==typeof h.value&&(h.value=this.Hn(h.value));let c=this.Sn[l]||null;return null!==c&&ki(c,this)(h),`${u}${this.parent.template.render(l,h,e)}${a}`}}Mn(t,e,s){let i=t.match(e);if(i)for(let n=0;n<i.length;n++){let e=i[n].replace(this.dn,(t,e,s)=>`${e}${s}`);t=t.replace(i[n],e)}return t.replace(e,(t,e,i,n)=>s(t,e,i,n.replace(this.Dn,"")))}Hn(t){let e=t;return e=this.bn(e,{},this.nn),e=e.replace(this.ln,t=>`&#${t.charCodeAt(0)};`),e}Nn(t,e){let s=(e[t]||"").match(this.cn);if((null==s?void 0:s[1])&&(null==s?void 0:s[2])&&(null==s?void 0:s[3])){e[t]=s[1];let i=s[2],n=s[3]||i;i&&"auto"!==i&&(e.width=i),n&&"auto"!==n&&(e.height=n)}}Wn(t,e="gi",s={}){return new RegExp(`${s.prefix||""}${t}${s.suffix||""}`,e)}Tn(){this.qn={email:this.Wn("([\\w\\._-]+@[\\w\\.\\/_-]+)","gi",this.mn.links),phone:this.Wn("(\\+[0-9]{1,3}[ \\(\\)\\-0-9]{7,20})","gi",this.mn.links),domain:this.Wn(["((?:[^<>\\(\\)\\s,@]+)(?:\\.(?:",this.Xe.map(ki(this.escape_regex,this)).join("|"),")))"].join(""),"gim",this.mn.links),uri:this.Wn("((?:(?:(?:https?|ftps?|file):)|(?:www\\.))(?:[^<>\\(\\)\\s]+))","gim",this.mn.links)}}Ln(){this.Un=[["code_block",this.Wn("(`{2,3})((?:\\n+)?(?:(?!\\2).(?:\\n+)?)*)(?:\\2)","gi",{prefix:"(\\s|<[^<>]+\\/>|^)",suffix:"(\\s|\\.|,|:|$)"})],["code_inline",this.Wn("(`{1})([^`]*)(?:\\2)","gim",{prefix:"(\\s|<[^<>]+\\/>|\\(|^)",suffix:"(\\s|\\.|,|:|\\)|<\\/[^<>]+>|$)"})],["title",this.Wn("(#{1})(?:[\\s]+)([^#].*)","gim",this.mn.markdown_simple)],["title",this.Wn("(#{2})(?:[\\s]+)([^#].*)","gim",this.mn.markdown_simple)],["title",this.Wn("(#{3})(?:[\\s]+)([^#].*)","gim",this.mn.markdown_simple)],["title",this.Wn("(#{4})(?:[\\s]+)([^#].*)","gim",this.mn.markdown_simple)],["title",this.Wn("(#{5})(?:[\\s]+)([^#].*)","gim",this.mn.markdown_simple)],["title",this.Wn("(#{6})(?:[\\s]+)([^#].*)","gim",this.mn.markdown_simple)],["link_image",this.Wn("\\[!\\[(?:[^\\[]*)\\]\\(([^\\)]+)\\)\\]\\(([^\\)]+)\\)","gim",this.mn.markdown_includes)],["image",this.Wn("!\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.mn.markdown_includes)],["link_text",this.Wn("\\[([^\\[]+)\\]\\(([^\\)]+)\\)","gim",{prefix:"(\\s|<[^<>]+\\/>|<[^a][^<>]*>|\\(|^)",suffix:"(\\s|.|,|:|<[^<>]+\\/>|</[^a][^<>]*>|\\)|$)"})],["youtube",this.Wn("\\$\\{youtube\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.mn.markdown_includes)],["vimeo",this.Wn("\\$\\{vimeo\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.mn.markdown_includes)],["dailymotion",this.Wn("\\$\\{dailymotion\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.mn.markdown_includes)],["frame",this.Wn("\\$\\{frame\\}\\[([^\\[]*)\\]\\(([^\\)]+)\\)","gim",this.mn.markdown_includes)],["bold",this.Wn("(\\*\\*)(.*?)(?:\\2)","gim",this.mn.markdown_formatting)],["underline",this.Wn("(__)(.*?)(?:\\2)","gim",this.mn.markdown_formatting)],["italic",this.Wn("(\\*|_)(.*?)(?:\\2)","gim",this.mn.markdown_formatting)],["delete",this.Wn("(\\~\\~)(.*?)(?:\\2)","gim",this.mn.markdown_formatting)],["highlight",this.Wn("(\\+\\+)(.*?)(?:\\2)","gim",this.mn.markdown_formatting)],["list",this.Wn("(\\*)(?:[\\s]+)","gim",this.mn.markdown_list)],["list",this.Wn("(?:([\\d]{1,2})\\.)(?:[\\s]+)","gim",this.mn.markdown_list)],["blockquote",this.Wn("(&gt;|\\>)(?:[\\s]+)(.*)","gim",this.mn.markdown_simple)],["table",this.Wn("(?:(\\|(?:[^\\|\\r\\n]{0,999}\\|){1,19})(?: *\\n)(?:\\|(?: *\\-{1,99} *\\|){1,19}))((?: *\\n\\|(?:[^\\|\\r\\n]{0,999}\\|){1,19}){1,49})","gi",{prefix:"(\\s|^)",suffix:"(\\s|$)"})],["emphasis",this.Wn("(\\|{1})(?:[\\s]+)([^\\|].*)","gim",this.mn.markdown_simple)],["emphasis",this.Wn("(\\|{2})(?:[\\s]+)([^\\|].*)","gim",this.mn.markdown_simple)],["emphasis",this.Wn("(\\|{3})(?:[\\s]+)([^\\|].*)","gim",this.mn.markdown_simple)],["interpolate",this.Wn('(?:\\{\\{\\s*)([^\\{\\}\\|\\s]+)(?:\\s*\\|\\s*(?:(?:&quot;)|")([^&"]*)(?:(?:&quot;)|"))?(?:\\s*\\}\\})',"gim",{prefix:"(\\s|\\(|^)",suffix:""})],["line",this.Wn("(-{3,})","gim",{prefix:"(^)(\\s+)?",suffix:"(\\s|$)"})],["color",this.Wn("\\$\\{color\\}\\[(#[0-9A-Fa-f]{6})\\]\\(([^\\)]+)\\)","gim",this.mn.markdown_includes)]]}},Ri=class{constructor(t){this.parent=t,this.Jn=/^(\S+)((?:\s+)(.+))?$/}parse_first_name(t){return this.Gn(t,1)}parse_last_name(t){return this.Gn(t,3)}Gn(t,e){let s=(t||"").trim();if(s){let t=s.match(this.Jn);(null==t?void 0:t[e])&&(s=t[e].trim())}return s}},Oi=class{constructor(t){this.parent=t,this.Kn={type:"none",decision:"index"}}evaluate_filters(t,e="",s=""){for(let i=0;i<t.length;i++){let n=t[i];switch(n.type){case"any":return n;case"url:exact":case"url:prefix":case"url:contains":{let t=(n.value||"").toLowerCase(),s=e.toLowerCase(),i=n.type.split(":")[1],r=!1;if(r="contains"===i?s.includes(t):"prefix"===i?s.startsWith(t):s===t&&!0,!0===r)return n;break}case"language":if(s===n.value)return n;break;default:throw new Error(`Missing filter rule implementation for type: '${n.type}'`)}}return this.Kn}};const zi=new class{init(t){this.Yn(t),this.Smileys=new $i(this),this.Emojis=new Ai(this),this.Parse=new Si(this),this.Name=new Ri(this),this.Page=new Oi(this)}Yn(t){(null==t?void 0:t.template)&&(this.template=t.template),(null==t?void 0:t.config)&&(this.config=t.config)}};const Pi=/^(?:\s*)(?:(?:javascript|vbscript):)/i;const Ti=new class{constructor(){this.init()}init(){zi.init({template:{render:(t,e)=>{let s=this[`render_${t}`];if("function"==typeof s)return function(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}(s,this)(e);throw new Error(`Render service is missing for: ${t}`)}},config:{url:{crisp_image:Ve.URL_IMAGE},runtime:{}}})}parse(){return zi.Parse}name(){return zi.Name}smileys(){return zi.Smileys}page(){return zi.Page}html(t){return this.parse().html(t)}attribute(t){return this.parse().attribute(t)}lower(t){return(t||"").toLowerCase()}filterLinkSafe(t){let e="#";return t&&!1===Pi.test(t)&&(e=t),e}getLinkTarget(){var t;return!0===(null==(t=cl.base.runtime)?void 0:t.mobile_sdk)?"":"_blank"}render_new_line(){return'<br class="cc-1rzu4" />'}render_link_email(t){let e=this.getLinkTarget();return`<a class="cc-13wgx cc-1mxl0" data-email="${this.attribute(t.email)}" href="mailto:${t.email}"`+(e?` target="${e}"`:"")+` rel="noopener noreferrer">${t.email}</a>`}render_link_phone(t){let e=this.getLinkTarget();return`<a class="cc-13wgx cc-45k2a" href="tel:${t.phone}"`+(e?` target="${e}"`:"")+` rel="noopener noreferrer">${t.phone}</a>`}render_link_uri(t){let e=this.getLinkTarget();return`<a class="cc-13wgx cc-qape1" href="${t.uri_value}"`+(e?` target="${e}"`:"")+` rel="noopener noreferrer">${t.uri_name}</a>`}render_link_domain(t){let e=this.getLinkTarget();return`<a class="cc-13wgx cc-1s1er" href="http://${t.domain_value}/" rel="noopener noreferrer"`+(e?` target="${e}"`:"")+`>${t.domain_name}</a>`}render_markdown_blockquote(t){return`<span class="cc-frbzi cc-j7g9w">${t.value}</span>`}render_markdown_table(t){return'<div class="cc-frbzi cc-13vot"><table class="cc-frbzi cc-159gr"><thead><tr>'+t.type.map(t=>`<th>${t}</th>`).join("")+"</tr></thead><tbody>"+t.value.map(t=>"<tr>"+t.map(t=>`<td>${t}</td>`).join("")+"</tr>").join("")+"</tbody></table></div>"}render_markdown_interpolate(t){return`<span class="cc-frbzi cc-euwmp">{{ ${t.type}${t.value?' | "'+t.value+'"':""} }}</span>`}render_markdown_color(t){return`<span class="cc-frbzi cc-33ysn" style="color: ${t.type};">${t.value}</span>`}render_markdown_bold(t){return`<span class="cc-frbzi cc-53ybt cc-vqf16">${t.value}</span>`}render_markdown_code_inline(t){return`<span class="cc-frbzi cc-w8r32 cc-mxy19 cc-h52z8">${t.value}</span>`}render_markdown_code_block(t){return`<code class="cc-frbzi cc-w8r32 cc-vdow5 cc-h52z8"${t.type?` data-language="${this.attribute(t.type)}"`:""}>${t.value}</code>`}render_markdown_delete(t){return`<span class="cc-frbzi cc-ibcby">${t.value}</span>`}render_markdown_highlight(t){return`<span class="cc-frbzi cc-1q2pi">${t.value}</span>`}render_markdown_image(t){return`<span class="cc-frbzi cc-1y6po" data-show-preview-url="${this.attribute(t.value)}"><img src="${t.url_crisp_image}/process/original/?url=${encodeURIComponent(t.value)}" alt="${this.attribute(t.type)}" /></span>`}render_markdown_italic(t){return`<span class="cc-frbzi cc-pxtz9">${t.value}</span>`}render_markdown_underline(t){return`<span class="cc-frbzi cc-fktp8">${t.value}</span>`}render_markdown_line(){return'<span class="cc-frbzi cc-gufgm"></span>'}render_markdown_link_text(t){let e=this.getLinkTarget();return`<a class="cc-frbzi cc-yv6sk cc-11g9w" href="${this.attribute(this.filterLinkSafe(t.value))}"`+(e?` target="${this.attribute(e)}"`:"")+` rel="noopener noreferrer">${t.type}</a>`}render_markdown_link_image(t){let e=this.getLinkTarget();return`<a class="cc-frbzi cc-yv6sk cc-pig40" href="${this.attribute(this.filterLinkSafe(t.value))}"`+(e?` target="${e}"`:"")+` rel="noopener noreferrer"><span class="cc-frbzi cc-1y6po"><img src="${t.url_crisp_image}/process/original/?url=${encodeURIComponent(t.type)}" alt="" /></span></a>`}render_markdown_list(t){return`<span class="cc-frbzi cc-1rkq5" data-type="${this.attribute(t.type)}">${t.value}</span>`}render_markdown_title(t){return`<span class="cc-frbzi cc-1i0k1 cc-vqf16" data-type="${this.attribute(t.type)}">${t.value}</span>`}render_markdown_emphasis(t){return`<span class="cc-frbzi cc-j2pfb cc-vqf16" data-type="${this.attribute(t.type)}">${t.value}</span>`}render_markdown_youtube(t){let e=`https://www.youtube.com/embed/${encodeURIComponent(t.value)}?autoplay=1&rel=0`,s=encodeURIComponent(`https://img.youtube.com/vi/${encodeURIComponent(t.value)}/hqdefault.jpg`),i=this.getLinkTarget();return`<a class="cc-frbzi cc-1vcwa cc-1unxt" href="${e}"`+(i?` target="${this.attribute(i)}"`:"")+` rel="noopener noreferrer"><span class="cc-1sl8g cc-1srvi cc-34ww6 cc-17oh3"><img src="${t.url_crisp_image}/process/resize/?url=${s}&width=960&height=960" alt="${this.attribute(t.type)}" /></span></a>`}render_markdown_vimeo(t){let e=`https://vimeo.com/${encodeURIComponent(t.value)}?autoplay=1`,s=this.getLinkTarget();return`<a class="cc-13wgx cc-qape1" href="${e}"`+(s?` target="${this.attribute(s)}"`:"")+` rel="noopener noreferrer">${t.type||e}</a>`}render_markdown_dailymotion(t){let e=`https://www.dailymotion.com/embed/video/${encodeURIComponent(t.value)}`,s=encodeURIComponent(`https://www.dailymotion.com/thumbnail/video/${encodeURIComponent(t.value)}`),i=this.getLinkTarget();return`<a class="cc-frbzi cc-1vcwa cc-12n8m" href="${e}"`+(i?` target="${this.attribute(i)}"`:"")+` rel="noopener noreferrer"><span class="cc-1sl8g cc-1w7n8 cc-34ww6 cc-17oh3"><img src="${t.url_crisp_image}/process/resize/?url=${s}&width=320&height=240" alt="${this.attribute(t.type)}" /></span></a>`}render_markdown_frame(t){let e=this.getLinkTarget();return`<a class="cc-13wgx cc-qape1" href="${this.attribute(this.filterLinkSafe(t.value))}"`+(e?` target="${this.attribute(e)}"`:"")+` rel="noopener noreferrer">${t.type||t.value}</a>`}render_smiley(t){return`<span class="cc-f45nf" data-size="${this.attribute(t.size)}" data-name="${this.attribute(t.name)}"></span>`}render_emoji(t){return`<span class="cc-16j3k" data-size="${this.attribute(t.size)}">${t.name}</span>`}},Li=Qe({code:"",direction:"ltr"},{});function Mi(t){return{all:t=t||new Map,on:function(e,s){var i=t.get(e);i?i.push(s):t.set(e,[s])},off:function(e,s){var i=t.get(e);i&&(s?i.splice(i.indexOf(s)>>>0,1):t.set(e,[]))},emit:function(e,s){var i=t.get(e);i&&i.slice().map(function(t){t(s)}),(i=t.get("*"))&&i.slice().map(function(t){t(e,s)})}}}function qi(){return(new Date).getTime()}Li.web=ze(()=>{let t=null;t=Ve.LOCALE_DEFAULT;let e=Li.code;return!0===Ve.LOCALE_WEBSITE.includes(e)&&(t=e),t});class Ui{constructor(){this.Zn=Mi(),this.Xn={},this.Qn=[]}subscribe(t,e){this.Zn.on(t,e),this.tr(t),this.Xn[t]||(this.Xn[t]=[]),this.Xn[t].push(e)}unsubscribe(t,e){this.Zn.off(t,e),this.Xn[t]&&(this.Xn[t]=this.Xn[t].filter(t=>t!==e))}emit(t,e){vl.setTimeout(()=>{this.Qn.length<50&&this.Qn.push({event:t,data:e,timestamp:qi()}),this.Zn.emit(t,e)},1)}tr(t){this.Qn.forEach(e=>{e.event===t&&e.timestamp>qi()-1e3&&this.Zn.emit(e.event,e.data)}),this.Qn=this.Qn.filter(e=>e.event!==t)}}const Vi=new class extends Ui{constructor(){super()}subscribe(t,e){super.subscribe(t,e)}unsubscribe(t,e){super.unsubscribe(t,e)}blurFromForeground(){super.emit("blur-from-foreground")}focusOnForeground(){super.emit("focus-on-foreground")}scrollTo(t=0){super.emit("scroll-to",t)}scrollToLastMessage(t="to"){super.emit("scroll-to-last-message",t)}checkClearance(){super.emit("check-clearance")}};const Ni=new class extends Ui{constructor(){super()}subscribe(t,e){super.subscribe(t,e)}unsubscribe(t,e){super.unsubscribe(t,e)}onStartNewConversation(){super.emit("start-new-conversation")}onMessageSent(t){super.emit("message-sent",t)}onMessageUpdated(t){super.emit("message-updated",t)}showCompose(t,e){cl.messages.showCompose(t,e)}hideCompose(){cl.messages.hideCompose()}injectMessage(t){cl.messages.handleReceived(t,null,!0,!0,!0,!1)}reset(){e().Action.do_session_reset()}updatePluginSettings(t,e){cl.website.updatePluginSettings(t,e)}updatePluginSettingsValue(t,e,s){cl.website.updatePluginSettingsValue(t,e,s)}},Hi=function(){const t="undefined"!=typeof document&&document.createElement("link").relList;return t&&t.supports&&t.supports("modulepreload")?"modulepreload":"preload"}(),Wi={},Ji=function(t,e,s){let i=Promise.resolve();if(e&&e.length>0){let t=function(t){return Promise.all(t.map(t=>Promise.resolve(t).then(t=>({status:"fulfilled",value:t}),t=>({status:"rejected",reason:t}))))};document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),n=(null==s?void 0:s.nonce)||(null==s?void 0:s.getAttribute("nonce"));i=t(e.map(t=>{if((t=function(t){return"https://client.crisp.chat/static/"+t}(t))in Wi)return;Wi[t]=!0;const e=t.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${s}`))return;const i=document.createElement("link");return i.rel=e?"stylesheet":Hi,e||(i.as="script"),i.crossOrigin="",i.href=t,n&&i.setAttribute("nonce",n),document.head.appendChild(i),e?new Promise((e,s)=>{i.addEventListener("load",e),i.addEventListener("error",()=>s(new Error(`Unable to preload CSS for ${t}`)))}):void 0}))}function n(t){const e=new Event("vite:preloadError",{cancelable:!0});if(e.payload=t,window.dispatchEvent(e),!e.defaultPrevented)throw t}return i.then(e=>{for(const t of e||[])"rejected"===t.status&&n(t.reason);return t().catch(n)})};const Gi=new class{getTriggers(){var t,e,s,i;return(null==(i=null==(s=null==(e=null==(t=cl.website)?void 0:t.plugins)?void 0:e["urn:crisp.im:triggers:0"])?void 0:s.settings)?void 0:i.triggers)||{}}getCustomization(t,e,s=null){var i,n,r,o,l;let u=null;return u=(null==(l=null==(o=null==(r=null==(n=null==(i=cl.website)?void 0:i.plugins)?void 0:n["urn:crisp.im:customization:0"])?void 0:r.settings)?void 0:o[t])?void 0:l[e])||{},s&&(u=u[s]||null),u}},Ki=["ltr","rtl"];const Yi=new class extends Ze{constructor(){super(),this.er=Ve.LOCALE_AVAILABLE,this.sr()}reset(){this.sr()}detect(t=[]){var e;let s,i=Ve.LOCALE_DEFAULT,n=[];t.length&&(this.er=vl.intersect(t,Ve.LOCALE_AVAILABLE),this.er.length>0&&!this.er.includes(i)&&(i=Ve.LOCALE_DEFAULT=this.er[0]));for(let r=0;r<(null==(e=cl.base.browser_locales)?void 0:e.length);r++)s=cl.base.browser_locales[r],s&&(n.push(s.toLowerCase()),s.includes("-")&&(s=s.split("-")[0],s&&n.push(s.toLowerCase())));for(let r=0;r<n.length;r++)if(this.er.includes(n[r])){i=n[r];break}return i}async load(t){try{let e=t;if(this.er.includes(t)||(e=Ve.LOCALE_DEFAULT),null!==this.ir&&this.ir._meta.locale_code!==t&&(this.ir=null),null===this.ir){let t={};t=await((t,e,s)=>{const i=t[e];return i?"function"==typeof i?i():Promise.resolve(i):new Promise((t,i)=>{("function"==typeof queueMicrotask?queueMicrotask:setTimeout)(i.bind(null,new Error("Unknown variable dynamic import: "+e+(e.split("/").length!==s?". Note that variables only represent file names one level deep.":""))))})})(Object.assign({"../locales/af.json":()=>Ji(()=>import("./af_default_439a0bf.js"),[]),"../locales/ar-ae.json":()=>Ji(()=>import("./ar-ae_default_439a0bf.js"),[]),"../locales/ar-sa.json":()=>Ji(()=>import("./ar-sa_default_439a0bf.js"),[]),"../locales/ar-ye.json":()=>Ji(()=>import("./ar-ye_default_439a0bf.js"),[]),"../locales/ar.json":()=>Ji(()=>import("./ar_default_439a0bf.js"),[]),"../locales/az.json":()=>Ji(()=>import("./az_default_439a0bf.js"),[]),"../locales/bg.json":()=>Ji(()=>import("./bg_default_439a0bf.js"),[]),"../locales/bn.json":()=>Ji(()=>import("./bn_default_439a0bf.js"),[]),"../locales/ca.json":()=>Ji(()=>import("./ca_default_439a0bf.js"),[]),"../locales/ckb.json":()=>Ji(()=>import("./ckb_default_439a0bf.js"),[]),"../locales/cs.json":()=>Ji(()=>import("./cs_default_439a0bf.js"),[]),"../locales/da.json":()=>Ji(()=>import("./da_default_439a0bf.js"),[]),"../locales/de.json":()=>Ji(()=>import("./de_default_439a0bf.js"),[]),"../locales/el.json":()=>Ji(()=>import("./el_default_439a0bf.js"),[]),"../locales/en.json":()=>Ji(()=>import("./en_default_439a0bf.js"),[]),"../locales/eo.json":()=>Ji(()=>import("./eo_default_439a0bf.js"),[]),"../locales/es.json":()=>Ji(()=>import("./es_default_439a0bf.js"),[]),"../locales/et.json":()=>Ji(()=>import("./et_default_439a0bf.js"),[]),"../locales/eu.json":()=>Ji(()=>import("./eu_default_439a0bf.js"),[]),"../locales/fa.json":()=>Ji(()=>import("./fa_default_439a0bf.js"),[]),"../locales/fi.json":()=>Ji(()=>import("./fi_default_439a0bf.js"),[]),"../locales/fo.json":()=>Ji(()=>import("./fo_default_439a0bf.js"),[]),"../locales/fr.json":()=>Ji(()=>import("./fr_default_439a0bf.js"),[]),"../locales/gu.json":()=>Ji(()=>import("./gu_default_439a0bf.js"),[]),"../locales/he.json":()=>Ji(()=>import("./he_default_439a0bf.js"),[]),"../locales/hi.json":()=>Ji(()=>import("./hi_default_439a0bf.js"),[]),"../locales/hr.json":()=>Ji(()=>import("./hr_default_439a0bf.js"),[]),"../locales/hu.json":()=>Ji(()=>import("./hu_default_439a0bf.js"),[]),"../locales/hy.json":()=>Ji(()=>import("./hy_default_439a0bf.js"),[]),"../locales/id.json":()=>Ji(()=>import("./id_default_439a0bf.js"),[]),"../locales/is.json":()=>Ji(()=>import("./is_default_439a0bf.js"),[]),"../locales/it.json":()=>Ji(()=>import("./it_default_439a0bf.js"),[]),"../locales/ja.json":()=>Ji(()=>import("./ja_default_439a0bf.js"),[]),"../locales/ka.json":()=>Ji(()=>import("./ka_default_439a0bf.js"),[]),"../locales/ko.json":()=>Ji(()=>import("./ko_default_439a0bf.js"),[]),"../locales/lt.json":()=>Ji(()=>import("./lt_default_439a0bf.js"),[]),"../locales/lv.json":()=>Ji(()=>import("./lv_default_439a0bf.js"),[]),"../locales/ml.json":()=>Ji(()=>import("./ml_default_439a0bf.js"),[]),"../locales/mn.json":()=>Ji(()=>import("./mn_default_439a0bf.js"),[]),"../locales/ms.json":()=>Ji(()=>import("./ms_default_439a0bf.js"),[]),"../locales/nl-be.json":()=>Ji(()=>import("./nl-be_default_439a0bf.js"),[]),"../locales/nl.json":()=>Ji(()=>import("./nl_default_439a0bf.js"),[]),"../locales/no.json":()=>Ji(()=>import("./no_default_439a0bf.js"),[]),"../locales/pl.json":()=>Ji(()=>import("./pl_default_439a0bf.js"),[]),"../locales/ps.json":()=>Ji(()=>import("./ps_default_439a0bf.js"),[]),"../locales/pt-br.json":()=>Ji(()=>import("./pt-br_default_439a0bf.js"),[]),"../locales/pt.json":()=>Ji(()=>import("./pt_default_439a0bf.js"),[]),"../locales/ro.json":()=>Ji(()=>import("./ro_default_439a0bf.js"),[]),"../locales/ru.json":()=>Ji(()=>import("./ru_default_439a0bf.js"),[]),"../locales/sk.json":()=>Ji(()=>import("./sk_default_439a0bf.js"),[]),"../locales/sl.json":()=>Ji(()=>import("./sl_default_439a0bf.js"),[]),"../locales/sr-cyrl-cs.json":()=>Ji(()=>import("./sr-cyrl-cs_default_439a0bf.js"),[]),"../locales/sr.json":()=>Ji(()=>import("./sr_default_439a0bf.js"),[]),"../locales/sv.json":()=>Ji(()=>import("./sv_default_439a0bf.js"),[]),"../locales/ta.json":()=>Ji(()=>import("./ta_default_439a0bf.js"),[]),"../locales/th.json":()=>Ji(()=>import("./th_default_439a0bf.js"),[]),"../locales/tr.json":()=>Ji(()=>import("./tr_default_439a0bf.js"),[]),"../locales/uk.json":()=>Ji(()=>import("./uk_default_439a0bf.js"),[]),"../locales/uz.json":()=>Ji(()=>import("./uz_default_439a0bf.js"),[]),"../locales/vi.json":()=>Ji(()=>import("./vi_default_439a0bf.js"),[]),"../locales/zh-hk.json":()=>Ji(()=>import("./zh-hk_default_439a0bf.js"),[]),"../locales/zh-tw.json":()=>Ji(()=>import("./zh-tw_default_439a0bf.js"),[]),"../locales/zh.json":()=>Ji(()=>import("./zh_default_439a0bf.js"),[])}),`../locales/${e}.json`,3),this.nr(e,t),cl.locale.code=t._meta.locale_code||e,cl.locale.direction=this.direction()}}catch(e){throw Ke.error(e),"LocaleHelper.load: "+e}}direction(){var t,e;let s=null;if(!(null==(e=null==(t=this.ir)?void 0:t._meta)?void 0:e.locale_direction))throw new Error("Cannot get locale direction, locale data not loaded");return s=this.ir._meta.locale_direction,Ki.includes(s)||(s="ltr"),s}text(t,e,s=[]){let i,n,r=null;"object"==typeof e?(i=e[0],n=e[1]):i=n=e;let o=`${t}.${i}.${n}`;return null===this.ir||void 0===this.ir._strings[t]||void 0===this.ir._strings[t][n]?o:(r=(Gi.getCustomization("text",t,i)||"").trim()||this.ir._strings[t][n],r=Ti.parse().replace(r,s),r=this.rr(r),r)}nr(t,e){if(null!==this.ir)throw new Error("Locale has already been loaded (double requested handled?)");if("object"!=typeof e)throw new Error("Did not receive a proper locale data file");if(e._meta.locale_code!==t)throw new Error(`Received a mismatching locale code, expected: ${t}`);this.ir=e}rr(t){let e=null;try{e=decodeURIComponent(escape(t))}catch{e=t}return e}sr(){this.ir=null}};const Zi=new class{url(t,e,s,i=null){var n,r,o,l;let u=Ve.URL_IMAGE;return"string"==typeof i&&null!==i?Ve.TEST||i.substring(0,u.length)===u?i:`${u}/process/thumbnail/?url=${encodeURIComponent(i)}&width=${t}&height=${t}&${null==(r=null==(n=cl.website)?void 0:n.website)?void 0:r.buster}`:`${u}/avatar/${e}/${s||"default"}/${t}/?${null==(l=null==(o=cl.website)?void 0:o.website)?void 0:l.buster}`}};function Xi(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}function Qi(t){return t&&t.t&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var tn,en;var sn=Qi(function(){if(en)return tn;en=1;var t=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,e=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];return tn=function(s){var i,n,r=s,o=s.indexOf("["),l=s.indexOf("]");-1!=o&&-1!=l&&(s=s.substring(0,o)+s.substring(o,l).replace(/:/g,";")+s.substring(l,s.length));for(var u,a,h=t.exec(s||""),c={},d=14;d--;)c[e[d]]=h[d]||"";return-1!=o&&-1!=l&&(c.source=r,c.host=c.host.substring(1,c.host.length-1).replace(/;/g,":"),c.authority=c.authority.replace("[","").replace("]","").replace(/;/g,":"),c.ipv6uri=!0),c.pathNames=(n=(i=c.path).replace(/\/{2,9}/g,"/").split("/"),"/"!=i.substr(0,1)&&0!==i.length||n.splice(0,1),"/"==i.substr(i.length-1,1)&&n.splice(n.length-1,1),n),c.queryKey=(u=c.query,a={},u.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,s){e&&(a[e]=s)}),a),c}}());const nn=Object.create(null);nn.open="0",nn.close="1",nn.ping="2",nn.pong="3",nn.message="4",nn.upgrade="5",nn.noop="6";const rn=Object.create(null);Object.keys(nn).forEach(t=>{rn[nn[t]]=t});const on={type:"error",data:"parser error"},ln="function"==typeof Blob||"undefined"!=typeof Blob&&"[object BlobConstructor]"===Object.prototype.toString.call(Blob),un="function"==typeof ArrayBuffer,an=({type:t,data:e},s,i)=>{return ln&&e instanceof Blob?s?i(e):hn(e,i):un&&(e instanceof ArrayBuffer||(n=e,"function"==typeof ArrayBuffer.isView?ArrayBuffer.isView(n):n&&n.buffer instanceof ArrayBuffer))?s?i(e):hn(new Blob([e]),i):i(nn[t]+(e||""));var n},hn=(t,e)=>{const s=new FileReader;return s.onload=function(){const t=s.result.split(",")[1];e("b"+(t||""))},s.readAsDataURL(t)},cn="undefined"==typeof Uint8Array?[]:new Uint8Array(256);for(let au=0;au<64;au++)cn["ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".charCodeAt(au)]=au;const dn="function"==typeof ArrayBuffer,Dn=(t,e)=>{if(dn){const s=(t=>{let e,s,i,n,r,o=.75*t.length,l=t.length,u=0;"="===t[t.length-1]&&(o--,"="===t[t.length-2]&&o--);const a=new ArrayBuffer(o),h=new Uint8Array(a);for(e=0;e<l;e+=4)s=cn[t.charCodeAt(e)],i=cn[t.charCodeAt(e+1)],n=cn[t.charCodeAt(e+2)],r=cn[t.charCodeAt(e+3)],h[u++]=s<<2|i>>4,h[u++]=(15&i)<<4|n>>2,h[u++]=(3&n)<<6|63&r;return a})(t);return fn(s,e)}return{base64:!0,data:t}},fn=(t,e)=>"blob"===e&&t instanceof ArrayBuffer?new Blob([t]):t;var _,pn={};var _n=function(){if(_)return pn;function t(e){if(e)return function(e){for(var s in t.prototype)e[s]=t.prototype[s];return e}(e)}return _=1,pn.Emitter=t,t.prototype.on=t.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},t.prototype.once=function(t,e){function s(){this.off(t,s),e.apply(this,arguments)}return s.fn=e,this.on(t,s),this},t.prototype.off=t.prototype.removeListener=t.prototype.removeAllListeners=t.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var s,i=this._callbacks["$"+t];if(!i)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var n=0;n<i.length;n++)if((s=i[n])===e||s.fn===e){i.splice(n,1);break}return 0===i.length&&delete this._callbacks["$"+t],this},t.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),s=this._callbacks["$"+t],i=1;i<arguments.length;i++)e[i-1]=arguments[i];if(s){i=0;for(var n=(s=s.slice(0)).length;i<n;++i)s[i].apply(this,e)}return this},t.prototype.emitReserved=t.prototype.emit,t.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},t.prototype.hasListeners=function(t){return!!this.listeners(t).length},pn}(),mn="undefined"!=typeof window?window:Function("return this")();const gn=setTimeout,Fn=clearTimeout;function vn(t,e){e.useNativeTimers?(t.setTimeoutFn=Xi(gn,mn),t.clearTimeoutFn=Xi(Fn,mn)):(t.setTimeoutFn=Xi(setTimeout,mn),t.clearTimeoutFn=Xi(clearTimeout,mn))}function wn(t){return"string"==typeof t?function(t){let e=0,s=0;for(let i=0,n=t.length;i<n;i++)e=t.charCodeAt(i),e<128?s+=1:e<2048?s+=2:e<55296||e>=57344?s+=3:(i++,s+=4);return s}(t):Math.ceil(1.33*(t.byteLength||t.size))}class bn extends Error{constructor(t,e,s){super(t),this.description=e,this.context=s,this.type="TransportError"}}class yn extends _n.Emitter{constructor(t){super(),this.writable=!1,vn(this,t),this.opts=t,this.query=t.query,this.readyState="",this.socket=t.socket}onError(t,e,s){return super.emitReserved("error",new bn(t,e,s)),this}open(){return"closed"!==this.readyState&&""!==this.readyState||(this.readyState="opening",this.doOpen()),this}close(){return"opening"!==this.readyState&&"open"!==this.readyState||(this.doClose(),this.onClose()),this}send(t){"open"===this.readyState&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const e=((t,e)=>{if("string"!=typeof t)return{type:"message",data:fn(t,e)};const s=t.charAt(0);return"b"===s?{type:"message",data:Dn(t.substring(1),e)}:rn[s]?t.length>1?{type:rn[s],data:t.substring(1)}:{type:rn[s]}:on})(t,this.socket.binaryType);this.onPacket(e)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}}const En="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split("");let Cn,kn=0;function $n(t){let e="";do{e=En[t%64]+e,t=Math.floor(t/64)}while(t>0);return e}const $="function"==typeof Promise&&"function"==typeof Promise.resolve?t=>Promise.resolve().then(t):(t,e)=>e(t,0),An=mn.WebSocket||mn.MozWebSocket,Bn="undefined"!=typeof navigator&&"string"==typeof navigator.product&&"reactnative"===navigator.product.toLowerCase();class xn extends yn{constructor(t){super(t),this.supportsBinary=!t.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const t=this.uri(),e=this.opts.protocols,s=Bn?{}:function(t,...e){return e.reduce((e,s)=>(t.hasOwnProperty(s)&&(e[s]=t[s]),e),{})}(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=Bn?new An(t,e,s):e?new An(t,e):new An(t)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||"arraybuffer",this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let e=0;e<t.length;e++){const s=t[e],i=e===t.length-1;an(s,this.supportsBinary,t=>{try{this.ws.send(t)}catch(e){}i&&$(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){void 0!==this.ws&&(this.ws.close(),this.ws=null)}uri(){let t=this.query||{};const e=this.opts.secure?"wss":"ws";let s="";this.opts.port&&("wss"===e&&443!==Number(this.opts.port)||"ws"===e&&80!==Number(this.opts.port))&&(s=":"+this.opts.port),this.opts.timestampRequests&&(t[this.opts.timestampParam]=function(){const t=$n(+new Date);return t!==Cn?(kn=0,Cn=t):t+"."+$n(kn++)}()),this.supportsBinary||(t.b64=1);const i=function(t){let e="";for(let s in t)t.hasOwnProperty(s)&&(e.length&&(e+="&"),e+=encodeURIComponent(s)+"="+encodeURIComponent(t[s]));return e}(t);return e+"://"+(-1!==this.opts.hostname.indexOf(":")?"["+this.opts.hostname+"]":this.opts.hostname)+s+this.opts.path+(i.length?"?"+i:"")}check(){return!(!An||"i"in An&&this.name===xn.prototype.name)}}const jn={websocket:xn},In=/^(?:(?![^:@]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,Sn=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Rn(t){const e=t,s=t.indexOf("["),i=t.indexOf("]");-1!=s&&-1!=i&&(t=t.substring(0,s)+t.substring(s,i).replace(/:/g,";")+t.substring(i,t.length));let n=In.exec(t||""),r={},o=14;for(;o--;)r[Sn[o]]=n[o]||"";return-1!=s&&-1!=i&&(r.source=e,r.host=r.host.substring(1,r.host.length-1).replace(/;/g,":"),r.authority=r.authority.replace("[","").replace("]","").replace(/;/g,":"),r.ipv6uri=!0),r.pathNames=function(t,e){const s=e.replace(/\/{2,9}/g,"/").split("/");return"/"!=e.substr(0,1)&&0!==e.length||s.splice(0,1),"/"==e.substr(e.length-1,1)&&s.splice(s.length-1,1),s}(0,r.path),r.queryKey=function(t,e){const s={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(t,e,i){e&&(s[e]=i)}),s}(0,r.query),r}let On=class t extends _n.Emitter{constructor(t,e={}){super(),t&&"object"==typeof t&&(e=t,t=null),t?(t=Rn(t),e.hostname=t.host,e.secure="https"===t.protocol||"wss"===t.protocol,e.port=t.port,t.query&&(e.query=t.query)):e.host&&(e.hostname=Rn(e.host).host),vn(this,e),this.secure=null!=e.secure?e.secure:"undefined"!=typeof location&&"https:"===location.protocol,e.hostname&&!e.port&&(e.port=this.secure?"443":"80"),this.hostname=e.hostname||("undefined"!=typeof location?location.hostname:"localhost"),this.port=e.port||("undefined"!=typeof location&&location.port?location.port:this.secure?"443":"80"),this.transports=e.transports||["websocket"],this.readyState="",this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!0},e),this.opts.path=this.opts.path.replace(/\/$/,"")+"/","string"==typeof this.opts.query&&(this.opts.query=function(t){let e={},s=t.split("&");for(let i=0,n=s.length;i<n;i++){let t=s[i].split("=");e[decodeURIComponent(t[0])]=decodeURIComponent(t[1])}return e}(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,"function"==typeof addEventListener&&(this.opts.closeOnBeforeunload&&addEventListener("beforeunload",()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},!1),"localhost"!==this.hostname&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(t){const e=function(t){const e={};for(let s in t)t.hasOwnProperty(s)&&(e[s]=t[s]);return e}(this.opts.query);e.EIO=4,e.transport=t,this.id&&(e.sid=this.id);const s=Object.assign({},this.opts.transportOptions[t],this.opts,{query:e,socket:this,hostname:this.hostname,secure:this.secure,port:this.port});return new jn[t](s)}open(){let e;if(this.opts.rememberUpgrade&&t.priorWebsocketSuccess&&-1!==this.transports.indexOf("websocket"))e="websocket";else{if(0===this.transports.length)return void this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);e=this.transports[0]}this.readyState="opening";try{e=this.createTransport(e)}catch(Pn){return this.transports.shift(),void this.open()}e.open(),this.setTransport(e)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",Xi(this.onDrain,this)).on("packet",Xi(this.onPacket,this)).on("error",Xi(this.onError,this)).on("close",t=>this.onClose("transport close",t))}probe(e){let s=this.createTransport(e),i=!1;t.priorWebsocketSuccess=!1;const n=()=>{i||(s.send([{type:"ping",data:"probe"}]),s.once("packet",e=>{if(!i)if("pong"===e.type&&"probe"===e.data){if(this.upgrading=!0,this.emitReserved("upgrading",s),!s)return;t.priorWebsocketSuccess="websocket"===s.name,this.transport.pause(()=>{i||"closed"!==this.readyState&&(h(),this.setTransport(s),s.send([{type:"upgrade"}]),this.emitReserved("upgrade",s),s=null,this.upgrading=!1,this.flush())})}else{const t=new Error("probe error");t.transport=s.name,this.emitReserved("upgradeError",t)}}))};function r(){i||(i=!0,h(),s.close(),s=null)}const o=t=>{const e=new Error("probe error: "+t);e.transport=s.name,r(),this.emitReserved("upgradeError",e)};function l(){o("transport closed")}function u(){o("socket closed")}function a(t){s&&t.name!==s.name&&r()}const h=()=>{s.removeListener("open",n),s.removeListener("error",o),s.removeListener("close",l),this.off("close",u),this.off("upgrading",a)};s.once("open",n),s.once("error",o),s.once("close",l),this.once("close",u),this.once("upgrading",a),s.open()}onOpen(){if(this.readyState="open",t.priorWebsocketSuccess="websocket"===this.transport.name,this.emitReserved("open"),this.flush(),"open"===this.readyState&&this.opts.upgrade&&this.transport.pause){let t=0;const e=this.upgrades.length;for(;t<e;t++)this.probe(this.upgrades[t])}}onPacket(t){if("opening"===this.readyState||"open"===this.readyState||"closing"===this.readyState)switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const e=new Error("server error");e.code=t.data,this.onError(e);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data)}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this.upgrades=this.filterUpgrades(t.upgrades),this.pingInterval=t.pingInterval,this.pingTimeout=t.pingTimeout,this.maxPayload=t.maxPayload,this.onOpen(),"closed"!==this.readyState&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,0===this.writeBuffer.length?this.emitReserved("drain"):this.flush()}flush(){if("closed"!==this.readyState&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this.getWritablePackets();this.transport.send(t),this.prevBufferLen=t.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&"polling"===this.transport.name&&this.writeBuffer.length>1))return this.writeBuffer;let t=1;for(let e=0;e<this.writeBuffer.length;e++){const s=this.writeBuffer[e].data;if(s&&(t+=wn(s)),e>0&&t>this.maxPayload)return this.writeBuffer.slice(0,e);t+=2}return this.writeBuffer}write(t,e,s){return this.sendPacket("message",t,e,s),this}send(t,e,s){return this.sendPacket("message",t,e,s),this}sendPacket(t,e,s,i){if("function"==typeof e&&(i=e,e=void 0),"function"==typeof s&&(i=s,s=null),"closing"===this.readyState||"closed"===this.readyState)return;(s=s||{}).compress=!1!==s.compress;const n={type:t,data:e,options:s};this.emitReserved("packetCreate",n),this.writeBuffer.push(n),i&&this.once("flush",i),this.flush()}close(){const t=()=>{this.onClose("forced close"),this.transport.close()},e=()=>{this.off("upgrade",e),this.off("upgradeError",e),t()},s=()=>{this.once("upgrade",e),this.once("upgradeError",e)};return"opening"!==this.readyState&&"open"!==this.readyState||(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}onError(e){t.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(t,e){"opening"!==this.readyState&&"open"!==this.readyState&&"closing"!==this.readyState||(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),"function"==typeof removeEventListener&&removeEventListener("offline",this.offlineEventListener,!1),this.readyState="closed",this.id=null,this.emitReserved("close",t,e),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(t){const e=[];let s=0;const i=t.length;for(;s<i;s++)~this.transports.indexOf(t[s])&&e.push(t[s]);return e}};var zn,Pn;On.protocol=4,(Pn=zn||(zn={}))[Pn.CONNECT=0]="CONNECT",Pn[Pn.DISCONNECT=1]="DISCONNECT",Pn[Pn.EVENT=2]="EVENT",Pn[Pn.ACK=3]="ACK",Pn[Pn.CONNECT_ERROR=4]="CONNECT_ERROR",Pn[Pn.BINARY_EVENT=5]="BINARY_EVENT",Pn[Pn.BINARY_ACK=6]="BINARY_ACK";class Tn extends _n.Emitter{constructor(){super()}add(t){let e;if("string"!=typeof t)throw new Error("Unknown type: "+t);e=this.decodeString(t),e.type===zn.BINARY_EVENT||e.type===zn.BINARY_ACK?0===e.attachments&&super.emitReserved("decoded",e):super.emitReserved("decoded",e)}decodeString(t){let e=0;const s={type:Number(t.charAt(0))};if(void 0===zn[s.type])throw new Error("unknown packet type "+s.type);if(s.type===zn.BINARY_EVENT||s.type===zn.BINARY_ACK){const i=e+1;for(;"-"!==t.charAt(++e)&&e!=t.length;);const n=t.substring(i,e);if(n!=Number(n)||"-"!==t.charAt(e))throw new Error("Illegal attachments");s.attachments=Number(n)}if("/"===t.charAt(e+1)){const i=e+1;for(;++e&&","!==t.charAt(e)&&e!==t.length;);s.nsp=t.substring(i,e)}else s.nsp="/";const i=t.charAt(e+1);if(""!==i&&Number(i)==i){const i=e+1;for(;++e;){const s=t.charAt(e);if(null==s||Number(s)!=s){--e;break}if(e===t.length)break}s.id=Number(t.substring(i,e+1))}if(t.charAt(++e)){const i=function(t){try{return JSON.parse(t)}catch(e){return!1}}(t.substr(e));if(!Tn.isPayloadValid(s.type,i))throw new Error("invalid payload");s.data=i}return s}static isPayloadValid(t,e){switch(t){case zn.CONNECT:return"object"==typeof e;case zn.DISCONNECT:return void 0===e;case zn.CONNECT_ERROR:return"string"==typeof e||"object"==typeof e;case zn.EVENT:case zn.BINARY_EVENT:return Array.isArray(e)&&e.length>0;case zn.ACK:case zn.BINARY_ACK:return Array.isArray(e)}}destroy(){}}var Ln=Object.freeze({__proto__:null,Decoder:Tn,Encoder:class{encode(t){return[this.encodeAsString(t)]}encodeAsString(t){let e=""+t.type;return t.type!==zn.BINARY_EVENT&&t.type!==zn.BINARY_ACK||(e+=t.attachments+"-"),t.nsp&&"/"!==t.nsp&&(e+=t.nsp+","),null!=t.id&&(e+=t.id),null!=t.data&&(e+=JSON.stringify(t.data)),e}},get PacketType(){return zn},protocol:5});function Mn(t,e,s){return t.on(e,s),function(){t.off(e,s)}}const qn=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Un extends _n.Emitter{constructor(t,e,s){super(),this.connected=!1,this.disconnected=!0,this.receiveBuffer=[],this.sendBuffer=[],this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=e,s&&s.auth&&(this.auth=s.auth),this.io._autoConnect&&this.open()}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Mn(t,"open",Xi(this.onopen,this)),Mn(t,"packet",Xi(this.onpacket,this)),Mn(t,"error",Xi(this.onerror,this)),Mn(t,"close",Xi(this.onclose,this))]}get active(){return!!this.subs}connect(){return this.connected||(this.subEvents(),this.io._reconnecting||this.io.open(),"open"===this.io._readyState&&this.onopen()),this}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...e){if(qn.hasOwnProperty(t))throw new Error('"'+t+'" is a reserved event name');e.unshift(t);const s={type:zn.EVENT,data:e,options:{}};if(s.options.compress=!1!==this.flags.compress,"function"==typeof e[e.length-1]){const t=this.ids++,i=e.pop();this._registerAckCallback(t,i),s.id=t}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?this.packet(s):this.sendBuffer.push(s)),this.flags={},this}_registerAckCallback(t,e){const s=this.flags.timeout;if(void 0===s)return void(this.acks[t]=e);const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let e=0;e<this.sendBuffer.length;e++)this.sendBuffer[e].id===t&&this.sendBuffer.splice(e,1);e.call(this,new Error("operation has timed out"))},s);this.acks[t]=(...t)=>{this.io.clearTimeoutFn(i),e.apply(this,[null,...t])}}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){"function"==typeof this.auth?this.auth(t=>{this.packet({type:zn.CONNECT,data:t})}):this.packet({type:zn.CONNECT,data:this.auth})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t){this.connected=!1,this.disconnected=!0,delete this.id,this.emitReserved("disconnect",t)}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case zn.CONNECT:if(t.data&&t.data.sid){const e=t.data.sid;this.onconnect(e)}else this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case zn.EVENT:this.onevent(t);break;case zn.BINARY_EVENT:break;case zn.ACK:this.onack(t);break;case zn.BINARY_ACK:break;case zn.DISCONNECT:this.ondisconnect();break;case zn.CONNECT_ERROR:this.destroy();const e=new Error(t.data.message);e.data=t.data.data,this.emitReserved("connect_error",e)}}onevent(t){const e=t.data||[];null!=t.id&&e.push(this.ack(t.id)),this.connected?this.emitEvent(e):this.receiveBuffer.push(Object.freeze(e))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const e=this._anyListeners.slice();for(const s of e)s.apply(this,t)}super.emit.apply(this,t)}ack(t){const e=this;let s=!1;return function(...i){s||(s=!0,e.packet({type:zn.ACK,id:t,data:i}))}}onack(t){const e=this.acks[t.id];"function"==typeof e&&(e.apply(this,t.data),delete this.acks[t.id])}onconnect(t){this.id=t,this.connected=!0,this.disconnected=!1,this.emitBuffered(),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>this.packet(t)),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:zn.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const e=this._anyListeners;for(let s=0;s<e.length;s++)if(t===e[s])return e.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}}var Vn,Nn;var Hn=Qi(function(){if(Nn)return Vn;function t(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}return Nn=1,Vn=t,t.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),s=Math.floor(e*this.jitter*t);t=1&Math.floor(10*e)?t+s:t-s}return 0|Math.min(t,this.max)},t.prototype.reset=function(){this.attempts=0},t.prototype.setMin=function(t){this.ms=t},t.prototype.setMax=function(t){this.max=t},t.prototype.setJitter=function(t){this.jitter=t},Vn}());class Wn extends _n.Emitter{constructor(t,e){var s;super(),this.nsps={},this.subs=[],t&&"object"==typeof t&&(e=t,t=void 0),(e=e||{}).path=e.path||"/socket.io",this.opts=e,vn(this,e),this.reconnection(!1!==e.reconnection),this.reconnectionAttempts(e.reconnectionAttempts||1/0),this.reconnectionDelay(e.reconnectionDelay||1e3),this.reconnectionDelayMax(e.reconnectionDelayMax||5e3),this.randomizationFactor(null!==(s=e.randomizationFactor)&&void 0!==s?s:.5),this.backoff=new Hn({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(null==e.timeout?2e4:e.timeout),this._readyState="closed",this.uri=t;const i=e.parser||Ln;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=!1!==e.autoConnect,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,this):this._reconnection}reconnectionAttempts(t){return void 0===t?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var e;return void 0===t?this._reconnectionDelay:(this._reconnectionDelay=t,null===(e=this.backoff)||void 0===e||e.setMin(t),this)}randomizationFactor(t){var e;return void 0===t?this._randomizationFactor:(this._randomizationFactor=t,null===(e=this.backoff)||void 0===e||e.setJitter(t),this)}reconnectionDelayMax(t){var e;return void 0===t?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,null===(e=this.backoff)||void 0===e||e.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&0===this.backoff.attempts&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new On(this.uri,this.opts);const e=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const i=Mn(e,"open",function(){s.onopen(),t&&t()}),n=Mn(e,"error",e=>{s.cleanup(),s._readyState="closed",this.emitReserved("error",e),t?t(e):s.maybeReconnectOnOpen()});if(!1!==this._timeout){const t=this._timeout;0===t&&i();const s=this.setTimeoutFn(()=>{i(),e.close(),e.emit("error",new Error("timeout"))},t);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}return this.subs.push(i),this.subs.push(n),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Mn(t,"ping",Xi(this.onping,this)),Mn(t,"data",Xi(this.ondata,this)),Mn(t,"error",Xi(this.onerror,this)),Mn(t,"close",Xi(this.onclose,this)),Mn(this.decoder,"decoded",Xi(this.ondecoded,this)))}onping(){this.emitReserved("ping")}ondata(t){this.decoder.add(t)}ondecoded(t){this.emitReserved("packet",t)}onerror(t){this.emitReserved("error",t)}socket(t,e){let s=this.nsps[t];return s||(s=new Un(this,t,e),this.nsps[t]=s),s}_destroy(t){const e=Object.keys(this.nsps);for(const s of e)if(this.nsps[s].active)return;this._close()}_packet(t){const e=this.encoder.encode(t);for(let s=0;s<e.length;s++)this.engine.write(e[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(t){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const e=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),t.skipReconnect||t.open(e=>{e?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",e)):t.onreconnect()}))},e);this.opts.autoUnref&&s.unref(),this.subs.push(function(){clearTimeout(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const Jn={};function Gn(t,e){"object"==typeof t&&(e=t,t=void 0);const s=function(t,e="",s){let i=t;s=s||"undefined"!=typeof location&&location,null==t&&(t=s.protocol+"//"+s.host),"string"==typeof t&&("/"===t.charAt(0)&&(t="/"===t.charAt(1)?s.protocol+t:s.host+t),/^(https?|wss?):\/\//.test(t)||(t=void 0!==s?s.protocol+"//"+t:"https://"+t),i=sn(t)),i.port||(/^(http|ws)$/.test(i.protocol)?i.port="80":/^(http|ws)s$/.test(i.protocol)&&(i.port="443")),i.path=i.path||"/";const n=-1!==i.host.indexOf(":")?"["+i.host+"]":i.host;return i.id=i.protocol+"://"+n+":"+i.port+e,i.href=i.protocol+"://"+n+(s&&s.port===i.port?"":":"+i.port),i}(t,(e=e||{}).path||"/socket.io"),i=s.source,n=s.id,r=s.path,o=Jn[n]&&r in Jn[n].nsps;let l;return e.forceNew||e["force new connection"]||!1===e.multiplex||o?l=new Wn(i,e):(Jn[n]||(Jn[n]=new Wn(i,e)),l=Jn[n]),s.query&&!e.query&&(e.query=s.queryKey),l.socket(s.path,e)}Object.assign(Gn,{Manager:Wn,Socket:Un,io:Gn,connect:Gn});var Kn="invalid",Yn="undefined"!=typeof ArrayBuffer,Zn="0123456789abcdef".split(""),Xn=[-2147483648,8388608,32768,128],Qn=[24,16,8,0],tr=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],er=[];function sr(t){t?(er[0]=er[16]=er[1]=er[2]=er[3]=er[4]=er[5]=er[6]=er[7]=er[8]=er[9]=er[10]=er[11]=er[12]=er[13]=er[14]=er[15]=0,this.blocks=er):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}function ir(t,e){var s,i=typeof t;if("string"===i){var n,r=[],o=t.length,l=0;for(s=0;s<o;++s)(n=t.charCodeAt(s))<128?r[l++]=n:n<2048?(r[l++]=192|n>>6,r[l++]=128|63&n):n<55296||n>=57344?(r[l++]=224|n>>12,r[l++]=128|n>>6&63,r[l++]=128|63&n):(n=65536+((1023&n)<<10|1023&t.charCodeAt(++s)),r[l++]=240|n>>18,r[l++]=128|n>>12&63,r[l++]=128|n>>6&63,r[l++]=128|63&n);t=r}else{if("object"!==i)throw new Error(Kn);if(null===t)throw new Error(Kn);if(Yn&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||Yn&&ArrayBuffer.isView(t)))throw new Error(Kn)}t.length>64&&(t=new sr(!0).update(t).digest());var u=[],a=[];for(s=0;s<64;++s){var h=t[s]||0;u[s]=92^h,a[s]=54^h}sr.call(this,e),this.update(a),this.oKeyPad=u,this.inner=!0,this.memory=e}sr.prototype.update=function(t){if(!this.finalized){var e,s=typeof t;if("string"!==s){if("object"!==s)throw new Error(Kn);if(null===t)throw new Error(Kn);if(Yn&&t.constructor===ArrayBuffer)t=new Uint8Array(t);else if(!(Array.isArray(t)||Yn&&ArrayBuffer.isView(t)))throw new Error(Kn);e=!0}for(var i,n,r=0,o=t.length,l=this.blocks;r<o;){if(this.hashed&&(this.hashed=!1,l[0]=this.block,l[16]=l[1]=l[2]=l[3]=l[4]=l[5]=l[6]=l[7]=l[8]=l[9]=l[10]=l[11]=l[12]=l[13]=l[14]=l[15]=0),e)for(n=this.start;r<o&&n<64;++r)l[n>>2]|=t[r]<<Qn[3&n++];else for(n=this.start;r<o&&n<64;++r)(i=t.charCodeAt(r))<128?l[n>>2]|=i<<Qn[3&n++]:i<2048?(l[n>>2]|=(192|i>>6)<<Qn[3&n++],l[n>>2]|=(128|63&i)<<Qn[3&n++]):i<55296||i>=57344?(l[n>>2]|=(224|i>>12)<<Qn[3&n++],l[n>>2]|=(128|i>>6&63)<<Qn[3&n++],l[n>>2]|=(128|63&i)<<Qn[3&n++]):(i=65536+((1023&i)<<10|1023&t.charCodeAt(++r)),l[n>>2]|=(240|i>>18)<<Qn[3&n++],l[n>>2]|=(128|i>>12&63)<<Qn[3&n++],l[n>>2]|=(128|i>>6&63)<<Qn[3&n++],l[n>>2]|=(128|63&i)<<Qn[3&n++]);this.lastByteIndex=n,this.bytes+=n-this.start,n>=64?(this.block=l[16],this.start=n-64,this.hash(),this.hashed=!0):this.start=n}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296|0,this.bytes=this.bytes%4294967296),this}},sr.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var t=this.blocks,e=this.lastByteIndex;t[16]=this.block,t[e>>2]|=Xn[3&e],this.block=t[16],e>=56&&(this.hashed||this.hash(),t[0]=this.block,t[16]=t[1]=t[2]=t[3]=t[4]=t[5]=t[6]=t[7]=t[8]=t[9]=t[10]=t[11]=t[12]=t[13]=t[14]=t[15]=0),t[14]=this.hBytes<<3|this.bytes>>>29,t[15]=this.bytes<<3,this.hash()}},sr.prototype.hash=function(){var t,e,s,i,n,r,o,l,u,a=this.h0,h=this.h1,c=this.h2,d=this.h3,D=this.h4,f=this.h5,p=this.h6,m=this.h7,g=this.blocks;for(t=16;t<64;++t)e=((n=g[t-15])>>>7|n<<25)^(n>>>18|n<<14)^n>>>3,s=((n=g[t-2])>>>17|n<<15)^(n>>>19|n<<13)^n>>>10,g[t]=g[t-16]+e+g[t-7]+s|0;for(u=h&c,t=0;t<64;t+=4)this.first?(r=704751109,m=(n=g[0]-210244248)-1521486534|0,d=n+143694565|0,this.first=!1):(e=(a>>>2|a<<30)^(a>>>13|a<<19)^(a>>>22|a<<10),i=(r=a&h)^a&c^u,m=d+(n=m+(s=(D>>>6|D<<26)^(D>>>11|D<<21)^(D>>>25|D<<7))+(D&f^~D&p)+tr[t]+g[t])|0,d=n+(e+i)|0),e=(d>>>2|d<<30)^(d>>>13|d<<19)^(d>>>22|d<<10),i=(o=d&a)^d&h^r,p=c+(n=p+(s=(m>>>6|m<<26)^(m>>>11|m<<21)^(m>>>25|m<<7))+(m&D^~m&f)+tr[t+1]+g[t+1])|0,e=((c=n+(e+i)|0)>>>2|c<<30)^(c>>>13|c<<19)^(c>>>22|c<<10),i=(l=c&d)^c&a^o,f=h+(n=f+(s=(p>>>6|p<<26)^(p>>>11|p<<21)^(p>>>25|p<<7))+(p&m^~p&D)+tr[t+2]+g[t+2])|0,e=((h=n+(e+i)|0)>>>2|h<<30)^(h>>>13|h<<19)^(h>>>22|h<<10),i=(u=h&c)^h&d^l,D=a+(n=D+(s=(f>>>6|f<<26)^(f>>>11|f<<21)^(f>>>25|f<<7))+(f&p^~f&m)+tr[t+3]+g[t+3])|0,a=n+(e+i)|0;this.h0=this.h0+a|0,this.h1=this.h1+h|0,this.h2=this.h2+c|0,this.h3=this.h3+d|0,this.h4=this.h4+D|0,this.h5=this.h5+f|0,this.h6=this.h6+p|0,this.h7=this.h7+m|0},sr.prototype.hex=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,i=this.h3,n=this.h4,r=this.h5,o=this.h6,l=this.h7;return Zn[t>>28&15]+Zn[t>>24&15]+Zn[t>>20&15]+Zn[t>>16&15]+Zn[t>>12&15]+Zn[t>>8&15]+Zn[t>>4&15]+Zn[15&t]+Zn[e>>28&15]+Zn[e>>24&15]+Zn[e>>20&15]+Zn[e>>16&15]+Zn[e>>12&15]+Zn[e>>8&15]+Zn[e>>4&15]+Zn[15&e]+Zn[s>>28&15]+Zn[s>>24&15]+Zn[s>>20&15]+Zn[s>>16&15]+Zn[s>>12&15]+Zn[s>>8&15]+Zn[s>>4&15]+Zn[15&s]+Zn[i>>28&15]+Zn[i>>24&15]+Zn[i>>20&15]+Zn[i>>16&15]+Zn[i>>12&15]+Zn[i>>8&15]+Zn[i>>4&15]+Zn[15&i]+Zn[n>>28&15]+Zn[n>>24&15]+Zn[n>>20&15]+Zn[n>>16&15]+Zn[n>>12&15]+Zn[n>>8&15]+Zn[n>>4&15]+Zn[15&n]+Zn[r>>28&15]+Zn[r>>24&15]+Zn[r>>20&15]+Zn[r>>16&15]+Zn[r>>12&15]+Zn[r>>8&15]+Zn[r>>4&15]+Zn[15&r]+Zn[o>>28&15]+Zn[o>>24&15]+Zn[o>>20&15]+Zn[o>>16&15]+Zn[o>>12&15]+Zn[o>>8&15]+Zn[o>>4&15]+Zn[15&o]+Zn[l>>28&15]+Zn[l>>24&15]+Zn[l>>20&15]+Zn[l>>16&15]+Zn[l>>12&15]+Zn[l>>8&15]+Zn[l>>4&15]+Zn[15&l]},sr.prototype.toString=sr.prototype.hex,sr.prototype.digest=function(){this.finalize();var t=this.h0,e=this.h1,s=this.h2,i=this.h3,n=this.h4,r=this.h5,o=this.h6,l=this.h7;return[t>>24&255,t>>16&255,t>>8&255,255&t,e>>24&255,e>>16&255,e>>8&255,255&e,s>>24&255,s>>16&255,s>>8&255,255&s,i>>24&255,i>>16&255,i>>8&255,255&i,n>>24&255,n>>16&255,n>>8&255,255&n,r>>24&255,r>>16&255,r>>8&255,255&r,o>>24&255,o>>16&255,o>>8&255,255&o,l>>24&255,l>>16&255,l>>8&255,255&l]},ir.prototype=new sr,ir.prototype.finalize=function(){if(sr.prototype.finalize.call(this),this.inner){this.inner=!1;var t=this.digest();sr.call(this,this.memory),this.update(this.oKeyPad),this.update(t),sr.prototype.finalize.call(this)}};var nr,rr=((nr=function(t){return new sr(!0).update(t).hex()}).create=function(){return new sr},nr.update=function(t){return nr.create().update(t)},nr);rr.hmac=function(){var t=function(t,e){return new ir(t,!0).update(e).hex()};return t.create=function(t){return new ir(t)},t.update=function(e,s){return t.create(e).update(s)},t}();var or,lr={exports:{}},ur=lr.exports;var ar=Qi(function(){return or||(or=1,t=lr,i=function(t){if("object"!=typeof t.document)throw new Error("Cookies.js requires a `window` with a `document` object");var e=function(t,s,i){return 1===arguments.length?e.get(t):e.set(t,s,i)};return e._document=t.document,e._cacheKeyPrefix="cookey.",e._maxExpireDate=new Date("Fri, 31 Dec 9999 23:59:59 UTC"),e.defaults={path:"/",secure:!1},e.get=function(t){e._cachedDocumentCookie!==e._document.cookie&&e._renewCache();var i=e._cache[e._cacheKeyPrefix+t];return i===s?s:decodeURIComponent(i)},e.set=function(t,i,n){return(n=e._getExtendedOptions(n)).expires=e._getExpiresDate(i===s?-1:n.expires),e._document.cookie=e._generateCookieString(t,i,n),e},e.expire=function(t,i){return e.set(t,s,i)},e._getExtendedOptions=function(t){return{path:t&&t.path||e.defaults.path,domain:t&&t.domain||e.defaults.domain,expires:t&&t.expires||e.defaults.expires,secure:t&&t.secure!==s?t.secure:e.defaults.secure}},e._isValidDate=function(t){return"[object Date]"===Object.prototype.toString.call(t)&&!isNaN(t.getTime())},e._getExpiresDate=function(t,s){if(s=s||new Date,"number"==typeof t?t=t===1/0?e._maxExpireDate:new Date(s.getTime()+1e3*t):"string"==typeof t&&(t=new Date(t)),t&&!e._isValidDate(t))throw new Error("`expires` parameter cannot be converted to a valid Date instance");return t},e._generateCookieString=function(t,e,s){var i=(t=(t=t.replace(/[^#$&+\^`|]/g,encodeURIComponent)).replace(/\(/g,"%28").replace(/\)/g,"%29"))+"="+(e=(e+"").replace(/[^!#$&-+\--:<-\[\]-~]/g,encodeURIComponent));return i+=(s=s||{}).path?";path="+s.path:"",i+=s.domain?";domain="+s.domain:"",(i+=s.expires?";expires="+s.expires.toUTCString():"")+(s.secure?";secure":"")},e._getCacheFromString=function(t){for(var i={},n=t?t.split("; "):[],r=0;r<n.length;r++){var o=e._getKeyValuePairFromCookieString(n[r]);i[e._cacheKeyPrefix+o.key]===s&&(i[e._cacheKeyPrefix+o.key]=o.value)}return i},e._getKeyValuePairFromCookieString=function(t){var e=t.indexOf("=");e=e<0?t.length:e;var s,i=t.substr(0,e);try{s=decodeURIComponent(i)}catch(n){}return{key:s,value:t.substr(e+1)}},e._renewCache=function(){e._cache=e._getCacheFromString(e._document.cookie),e._cachedDocumentCookie=e._document.cookie},e._areEnabled=function(){var t="cookies.js",s="1"===e.set(t,1).get(t);return e.expire(t),s},e.enabled=e._areEnabled(),e},n=(e="undefined"==typeof window?ur:window)&&"object"==typeof e.document?i(e):i,(t.exports=n).Cookies=n),lr.exports;var t,e,s,i,n}());class hr{constructor(t){this.parent=t,this.h()}setCurrentSessionChildId(t=null){t===this.parent.Session._getParentSessionId()&&(t=null),this._sessionChildId=t}setIgnorePrivacy(t=!1){this._ignorePrivacy=t}setVisitorCompose(t=!0){this._visitorCompose=t}reset(){this.h()}h(){this._sessionChildId=null,this._ignorePrivacy=!1,this._visitorCompose=!0}}class cr{constructor(t){this.parent=t}_get(t){let e=this.parent.cookie.get(t);if(void 0===e)try{if(window.localStorage&&"function"==typeof window.localStorage.getItem){let s=parseInt(window.localStorage.getItem(`${t}:e`)||"0",10);s>0&&s<=(new Date).getTime()?(e=void 0,"function"==typeof window.localStorage.removeItem&&(window.localStorage.removeItem(t),window.localStorage.removeItem(`${t}:e`))):e=window.localStorage.getItem(t)}}catch{}return void 0!==e?e:null}_set(t,e,s={}){this.parent.cookie.set(t,e,s);try{window.localStorage&&"function"==typeof window.localStorage.setItem&&(window.localStorage.setItem(`${t}:e`,void 0!==s.expires?(new Date).getTime()+s.expires:0),window.localStorage.setItem(t,e))}catch{}}_expire(t,e={}){this.parent.cookie.expire(t,e);try{window.localStorage&&"function"==typeof window.localStorage.removeItem&&(window.localStorage.removeItem(t),window.localStorage.removeItem(`${t}:e`))}catch{}}}class dr{constructor(t){this.parent=t,this.h()}setTimeout(t,e=0){let s=setTimeout(()=>{delete this.o[s],t()},e);return this.o[s]=s,s}clearTimeout(t){t in this.o&&(clearTimeout(this.o[t]),delete this.o[t])}setInterval(t,e=0){let s=setInterval(t,e);return this.l[s]=s,s}clearInterval(t){t in this.l&&(clearInterval(this.l[t]),delete this.l[t])}reset(){for(let t in this.o)this.clearTimeout(t);for(let t in this.l)this.clearInterval(t);this.h()}h(){this.o={},this.l={}}}class Dr{constructor(t){this.parent=t,this.h()}addEventListener(t,e,s,i={}){return window[t].addEventListener(e,s,i),this.u.push({instanceName:t,eventName:e,fnHandler:s,options:i}),s}removeEventListener(t,e,s){let i=this.u.find(i=>i.eventName===e&&i.instanceName===t&&i.fnHandler===s);i&&(i.fnHandler&&window[t].removeEventListener(e,i.fnHandler,i.options),this.u=this.u.filter(i=>i.eventName!==e||i.instanceName!==t||i.fnHandler!==s))}reset(){for(let t in this.u)this.removeEventListener(t.instanceName,t.eventName,t.fnHandler);this.h()}h(){this.u=[]}}class fr{constructor(t){this.parent=t,this.h(),this.p()}getState(){this._(this.parent.socket.connected||!1)}reset(){this.h()}h(){this.m=!1,this.v=!1}p(){this.parent.socket.on("connect",()=>{this.m=!0,this._(!0)}),this.parent.socket.on("disconnect",()=>{this._(!1)}),this.parent.socket.on("connect_error",t=>{"TransportError"===(null==t?void 0:t.type)&&this.k()}),this.parent.socket.io.on("reconnect_failed",()=>{this._(!1,!0)})}_(t=!0,e=!1){this.parent.event.emit("socket:state",{connected:t,failed_reconnect:e})}k(){var t;(null==(t=this.parent.ioRelayRescueClient)?void 0:t.url)&&!0!==this.m&&!0!==this.v&&!0!==this.parent.socket.connected&&(this.v=!0,this.parent.socket.disconnect(),this.parent.socket.io.uri=this.parent.ioRelayRescueClient.url,this.parent.socket.io.opts.path=this.parent.ioRelayRescueClient.path,this.parent.event.emit("socket:rescued",{}))}}class pr{constructor(t){this.parent=t,this.h(),this.p()}reset(){this.h()}_bindTo(t,e,s,i=null,n=null){this.S=t,this.u=e,this.A=s,this.M=i,this.C=n,!0!==this.D?this.parent.stream.connect():this.j()}_unbindFrom(){this.R(),this.parent.stream.disconnect()}h(){this.D=!1,this.S=null,this.u=[],this.A={},this.M=null,this.C=null,this.$=null,this.O=null}p(){this.parent.stream.on("connect",()=>{this.D=!0,this.j()}),this.parent.stream.on("disconnect",()=>{this.D=!1,this.q()}),this.parent.stream.on("socket:bound",()=>{this.I()})}j(){if(this.$!==this.S||this.O!==this.u){this.$=this.S,this.O=this.u;let t=[];this.$&&t.push(this.$),this.parent.stream.emit("socket:bind",{ray:"client",events:this.O,rooms:t,context:this.A})}else this.I()}q(){null!==this.C&&this.C(),this.R(),this.$=null,this.O=null}I(){null!==this.M&&this.M(),this.R()}R(){this.S=null,this.u=[],this.A={},this.M=null,this.C=null}}const _r="crisp-client";class mr{constructor(t){this.parent=t,this.h()}init(){this.p()}getStampLocal(t,e=[]){let s=this._generateStoreKey(t,e);return"object"==typeof window.localStorage&&window.localStorage.getItem(s)||""}setStampLocal(t,e=[],s=""){let i=this._generateStoreKey(t,e);return"object"==typeof window.localStorage&&(window.localStorage.setItem(i,s),!0)}reset(){this.T(),this.h()}_update(t,e,s=null,i=function(){},n=function(){}){s=this.parent.Session._getEffectiveSessionId(s);let r={session_id:this.parent.Session._getChildSessionIdOrNone(s),ray:this.N(t),type:t,data:e};this.P(s).push(r.ray),this.U(s)[r.ray]={success:i,error:n},this.parent.socket.emit("storage:sync:update",r),this.parent.event.emit("storage:sync:update",r)}_generateStoreKey(t,e=[]){let s=`${_r}/${t}`;return e.length>0&&(s+=`/${e.join("/")}`),s}h(){this.B=1,this.L=0,this.H={},this.F={}}p(){this.parent.socket.on("storage:sync:updated",Xi(this.V,this))}T(){let t=`${_r}/`;for(let e=window.localStorage.length-1;e>=0;e--){let s=window.localStorage.key(e);(null==s?void 0:s.startsWith(t))&&window.localStorage.removeItem(s)}}U(t){return t in this.H||(this.H[t]={}),this.H[t]}P(t){return t in this.F||(this.F[t]=[]),this.F[t]}V(t){let e=this.U(t.session_id),s=this.P(t.session_id);if("object"==typeof e[t.ray]){t.error?"function"==typeof e[t.ray].error&&e[t.ray].error():"function"==typeof e[t.ray].success&&e[t.ray].success(),delete e[t.ray];let i=s.indexOf(t.ray);-1!==i&&s.splice(i,1)}this.parent.event.emit("storage:sync:updated",t)}N(t){return`${t}/${Math.floor(1e5*Math.random())}/${this.L++}`}}const gr=1e3,Fr=15e4,vr=["browsing:action:start","browsing:action:stop","browsing:action:heartbeat","browsing:assist:start","browsing:assist:stop","browsing:assist:heartbeat","browsing:assist:mouse","browsing:assist:scroll","browsing:assist:click"];class wr{constructor(t){this.parent=t,this.h(),this.p(),this.J(),this.K(),this.G(),this.Y(),this.W()}init(t,e,s){let i=t.session_id||this.parent.Session._getEffectiveSessionId();this.parent.Stream._bindTo(null,vr,{session_id:i},()=>{-1===(this.parent.device.capabilities||[]).indexOf("browsing")||!0!==this.parent.Config._ignorePrivacy&&"1"===(null==navigator?void 0:navigator.doNotTrack)?(this.parent.stream.emit("client:browsing:request:decline",{}),this.X()):(this.Z=t.deps.treeMirror||null,this.tt=!0,this.st=i,!0===t.resume?(this.parent.stream.emit("client:browsing:resume",{browsing_id:this.it}),this.et(!0),!0===this.ht&&this.nt(!0)):(this.et(!0),this.parent.stream.emit("client:browsing:request:accept",{useragent:navigator.userAgent}))),"function"==typeof e&&e()},()=>{"function"==typeof s&&s()})}toggleIgnoreScrollEvent(t=!1){this.rt=t}reset(){!0===this.ht&&this.X(),this.h(),this.ot()}_restoreBrowsingState(){this.it&&(!1===this.lt()?this.ct({session_id:this.st,resume:!0}):this.X())}h(){var t;if(this.parent.Schedule.clearInterval(this.ut),this.parent.Schedule.clearInterval(this.dt),this.parent.Schedule.clearInterval(this.ft),this.parent.Schedule.clearInterval(this.gt),"object"==typeof this._t)for(let e in this._t)this.parent.Schedule.clearTimeout(this._t[e]);if("object"==typeof this.wt)for(let e in this.wt)this.parent.Schedule.clearTimeout(this.wt[e].deadTimeout);(null==(t=this.yt)?void 0:t.deferEvent)&&this.parent.Schedule.clearTimeout(this.yt.deferEvent),this.tt=!1,this.st=null,this.it=null,this.ht=!1,this.vt=null,this.ut=null,this.dt=null,this.ft=null,this.gt=null,this.rt=!1,this.bt=null,this.Z=null,this.kt=null,this.St=0,this._t={},this.At=[],this.wt={assist:{ongoing:!1,lastHeartbeat:null,deadTimeout:null}},this.Mt={x:0,y:0,lastX:0,lastY:0},this.Ct={x:0,y:0,lastX:0,lastY:0},this.yt={lastCall:(new Date).getTime(),deferEvent:null}}Et(){return this.parent.Storage._generateStoreKey("browsing",[this.parent.websiteId])}p(){this.parent.socket.on("browsing:request:initiate",Xi(this.ct,this)),this.parent.stream.on("client:browsing:request:initiated",Xi(this.Dt,this)),this.parent.stream.on("client:browsing:action:start",Xi(this.jt,this)),this.parent.stream.on("client:browsing:action:stop",Xi(this.Rt,this)),this.parent.stream.on("client:browsing:action:heartbeat",Xi(this.$t,this)),this.parent.stream.on("client:browsing:assist:start",Xi(this.Ot,this)),this.parent.stream.on("client:browsing:assist:stop",Xi(this.qt,this)),this.parent.stream.on("client:browsing:assist:heartbeat",Xi(this.xt,this)),this.parent.stream.on("client:browsing:assist:mouse",Xi(this.It,this)),this.parent.stream.on("client:browsing:assist:scroll",Xi(this.Tt,this)),this.parent.stream.on("client:browsing:assist:click",Xi(this.Nt,this))}J(){if("object"!=typeof window.sessionStorage)return;let t=window.sessionStorage.getItem(this.Et());if(!t)return;let e=JSON.parse(t);this.st=e.session_id||null,this.it=e.browsing_id||null,this.ht=e.is_playing||!1,this.vt=e.last_heartbeat||null}ct(t){!0===this.tt&&!0!==t.resume||(!0!==t.resume&&this.X(),this.parent.event.emit("browsing:request:initiate",t||{}))}Dt(t){!0===this.tt&&(this.it=t.browsing_id,this.vt=(new Date).getTime(),this.Pt())}jt(){!0===this.tt&&this.it&&this.nt()}Rt(){!0===this.tt&&this.it&&this.X()}$t(){!0===this.tt&&this.it&&(this.vt=(new Date).getTime(),this.Pt())}Ot(){!0===this.tt&&this.it&&!0===this.Ut("assist")&&this.parent.event.emit("browsing:assist:started",{})}qt(){!0===this.tt&&this.it&&!0===this.Bt("assist")&&this.parent.event.emit("browsing:assist:stopped",{})}xt(){!0===this.tt&&this.it&&this.Lt("assist")}It(t){!0===this.tt&&this.it&&!0===this.wt.assist.ongoing&&this.parent.event.emit("browsing:assist:mouse",t)}Tt(t){!0===this.tt&&this.it&&!0===this.wt.assist.ongoing&&this.parent.event.emit("browsing:assist:scroll",t)}Nt(t){!0===this.tt&&this.it&&!0===this.wt.assist.ongoing&&this.parent.event.emit("browsing:assist:click",t)}Pt(){"object"==typeof window.sessionStorage&&JSON&&"function"==typeof JSON.stringify&&window.sessionStorage.setItem(this.Et(),JSON.stringify({session_id:this.st,browsing_id:this.it,is_playing:this.ht,last_heartbeat:this.vt}))}ot(){"object"==typeof window.sessionStorage&&"object"==typeof window.sessionStorage&&window.sessionStorage.removeItem(this.Et())}nt(t=!1){this.ht=!0,this.vt=(new Date).getTime(),this.Pt(),this.Ht(),this.Ft(!0),this.zt(!0),this.Vt(!0),!0!==t&&this.parent.stream.emit("client:browsing:action:started",{})}X(){let t=this.ht;this.kt&&this.kt.disconnect(),this.h(),this.Pt(),!0===t&&this.parent.stream.emit("client:browsing:action:stopped",{}),this.parent.Stream._unbindFrom()}Ht(){this.Jt(),this.Kt(),this.Gt(),this.kt&&this.kt.disconnect(),this.Z&&(this.kt=new this.Z(document,{initialize:(t,e)=>{this.bt={f:"initialize",args:[t,e]},this.Yt(this.bt)},applyChanged:(t,e,s,i)=>{this.At.push({f:"applyChanged",args:[t,e,s,i]})}}))}Yt(t){if(t.f&&t.args&&"function"==typeof JSON.stringify){let e=this.St,s=[],i=JSON.stringify(t.args);for(let t=0,n=i.length;t<n;t+=Fr)s.push(i.substring(t,t+Fr));for(let n=0;n<s.length;n++)this.parent.stream.emit("client:browsing:stream:mirror",{f:t.f,args:s[n],chunk:e,part:n,end:s.length-1});this.St++}}Kt(){this.parent.stream.emit("client:browsing:stream:tab",{title:document.title,url:document.location.href,width:window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,height:window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight})}Jt(){this.parent.stream.emit("client:browsing:stream:mouse",{x:this.Mt.x,y:this.Mt.y})}Gt(){this.parent.stream.emit("client:browsing:stream:scroll",{x:this.Ct.x,y:this.Ct.y})}Wt(){this.parent.stream.emit("client:browsing:stream:click",{})}Ut(t){let e=!0!==this.wt[t].ongoing&&!0;return this.wt[t].ongoing=!0,this.Lt(t),this.parent.stream.emit(`client:browsing:${t}:started`,{}),e}Bt(t){return!0===this.wt[t].ongoing&&(this.Lt(t,!1),this.wt[t].ongoing=!1,this.parent.stream.emit(`client:browsing:${t}:stopped`,{}),!0)}Lt(t,e=!0){!0===this.wt[t].ongoing&&(null!==this.wt[t].deadTimeout&&(this.parent.Schedule.clearTimeout(this.wt[t].deadTimeout),this.wt[t].deadTimeout=null),!0===e?(this.wt[t].lastHeartbeat=(new Date).getTime(),this.wt[t].deadTimeout=this.parent.Schedule.setTimeout(()=>{this.Bt(t)},45e3)):this.wt[t].lastHeartbeat=null)}K(){this.parent.Listener.addEventListener("document","mousemove",t=>{this.Mt.lastX=t.pageX,this.Mt.lastY=t.pageY})}G(){this.parent.Listener.addEventListener("window","resize",()=>{null!==this.yt.deferEvent&&this.parent.Schedule.clearTimeout(this.yt.deferEvent),this.yt.deferEvent=this.parent.Schedule.setTimeout(()=>{this.yt.deferEvent=null;let t=this.yt.lastCall,e=(new Date).getTime();this.yt.lastCall=e,t&&e>t+gr&&!0===this.ht&&this.Kt()},1e3)})}Y(){this.parent.Listener.addEventListener("window","scroll",()=>{if(!0!==this.rt){let t=document.documentElement;this.Ct.lastX=(window.pageXOffset||t.scrollLeft)-(t.clientLeft||0),this.Ct.lastY=(window.pageYOffset||t.scrollTop)-(t.clientTop||0)}})}W(){this.parent.Listener.addEventListener("window","click",t=>{!0!==this.ht||t._from_crisp||this.Xt("click",()=>{this.Wt(),this.Jt()})})}lt(){return null===this.vt||null!==this.vt&&(new Date).getTime()-this.vt>=45e3}et(t=!0){null!==this.ut&&this.parent.Schedule.clearInterval(this.ut),!0===t&&(this.ut=this.parent.Schedule.setInterval(()=>{this.parent.stream.emit("client:browsing:heartbeat",{}),!0===this.lt()&&this.X()},1e4))}Ft(t=!0){null!==this.ft&&(this.parent.Schedule.clearInterval(this.ft),this.ft=null),!0===t&&(this.ft=this.parent.Schedule.setInterval(()=>{this.Mt.lastX===this.Mt.x&&this.Mt.lastY===this.Mt.y||!0!==this.ht||(this.Mt.x=this.Mt.lastX,this.Mt.y=this.Mt.lastY,this.Jt())},gr))}zt(t=!0){null!==this.gt&&(this.parent.Schedule.clearInterval(this.gt),this.gt=null),!0===t&&(this.gt=this.parent.Schedule.setInterval(()=>{this.Ct.lastX===this.Ct.x&&this.Ct.lastY===this.Ct.y||!0!==this.ht||(this.Ct.x=this.Ct.lastX,this.Ct.y=this.Ct.lastY,this.Jt(),this.Gt())},gr))}Vt(t=!0){null!==this.dt&&this.parent.Schedule.clearInterval(this.dt),!0===t&&(this.dt=this.parent.Schedule.setInterval(()=>{for(let t=0;t<this.At.length&&!(t>=10);t++)this.Yt(this.At[t]);this.At.splice(0,10)},1e3))}Xt(t,e){void 0===this._t[t]&&(this._t[t]=this.parent.Schedule.setTimeout(()=>{delete this._t[t],e()},500))}}const br=["call:request:initiate","call:request:accepted","call:request:declined","call:action:stopped","call:signaling:sdp","call:signaling:candidate"];class yr{constructor(t){this.parent=t,this.h(),this.p()}init(t,e,s){this.parent.Stream._bindTo(null,br,{session_id:t.session_id||this.parent.Session._getEffectiveSessionId()},()=>{this.Qt=t.mode||null,this.Zt=t.ice||[],!0===t.has_support?(this.parent.stream.emit("client:call:request:initiated",{call_id:t.call_id}),this.et(!0)):this.parent.stream.emit("client:call:request:decline",{}),"function"==typeof e&&e()},()=>{"function"==typeof s&&s()})}accept(){!0===this.tt&&(this.ts=!0,this.parent.stream.emit("client:call:request:accept",{}))}decline(){!0===this.tt&&(this.parent.stream.emit("client:call:request:decline",{}),this.X())}stop(){!0===this.tt&&(this.parent.stream.emit("client:call:action:stopped",{}),this.X())}toggleAudio(){return this.ss("audio","getAudioTracks")}toggleVideo(){return this.ss("video","getVideoTracks")}toggleScreensharing(){return!0===this.tt&&null!==this.es.local&&(!1===this.hs?this.ns():this.rs()),this.hs}isOngoing(){return!0===this.tt&&null!==this.ls&&!0}hasSupportScreensharing(){return!(!navigator.mediaDevices||"function"!=typeof navigator.mediaDevices.getDisplayMedia)}getStream(t){return this.es[t]||null}reset(){!0===this.tt&&this.X(),this.h()}h(){this.tt=!1,this.hs=!1,this.ts=!1,this.cs=!1,this.ls=null,this.ut=null,this.us=null,this.Qt=null,this.Zt=[],this.es={local:null,remote:null},this.ds={video:null}}p(){this.parent.socket.on("call:request:initiate",Xi(this.ct,this)),this.parent.stream.on("client:call:request:accepted",Xi(this.fs,this)),this.parent.stream.on("client:call:request:declined",Xi(this.ps,this)),this.parent.stream.on("client:call:action:stopped",Xi(this.gs,this)),this.parent.stream.on("client:call:signaling:sdp",Xi(this._s,this)),this.parent.stream.on("client:call:signaling:candidate",Xi(this.ys,this))}ct(t){!0!==this.tt&&(t.has_support=-1!==(this.parent.device.capabilities||[]).indexOf("call"),this.tt=!0,this.parent.event.emit("call:request:initiate",t))}fs(){!0===this.tt&&!0!==this.ts&&this.X()}ps(){!0===this.tt&&this.X()}gs(){!0===this.tt&&this.X()}_s(t){if(!0===this.tt){if(this.vs(),"operator"!==t.from)return;this.ls.setRemoteDescription(new RTCSessionDescription(t.sdp)).then(()=>(this.parent.event.emit("call:peer:remote:success",{}),null===this.es.local?this.bs():"offer"===t.sdp.type?this.ks("answer"):Promise.resolve())).catch(()=>{this.parent.event.emit("call:peer:remote:error",{})})}}ys(t){if(!0===this.tt){if(this.vs(),"operator"!==t.from)return;if("object"!=typeof t.candidate||null===t.candidate)return;this.ls.addIceCandidate(new RTCIceCandidate({sdpMLineIndex:t.candidate.sdpMLineIndex,candidate:t.candidate.candidate})).catch(()=>{})}}vs(){null===this.ls&&(this.ls=new RTCPeerConnection({iceServers:this.Zt}),this.ls.onicecandidate=t=>{t&&t.candidate&&this.parent.stream.emit("client:call:signaling:candidate",{from:"user",candidate:t.candidate})},this.ls.ontrack=t=>{let e=t.streams[0];this.es.remote=e,this.parent.event.emit("call:media:remote:success",{}),e.onremovetrack=()=>{this.parent.event.emit("call:media:remote:success",{})}},this.ls.oniceconnectionstatechange=()=>{let t=this.ls;null!==t&&"failed"!==t.iceConnectionState&&"closed"!==t.iceConnectionState||this.Ss(),null!==t&&"disconnected"===t.iceConnectionState&&(this.us=this.parent.Schedule.setTimeout(()=>{this.us=null,null!==this.ls&&"connected"===t.iceConnectionState||this.Ss()},5e3)),null!==t&&"connected"===t.iceConnectionState&&!0!==this.cs&&this.parent.Schedule.setTimeout(()=>{this.bs(!0)},200)},this.ls.onnegotiationneeded=()=>{this.ks("offer")},this.ls.onclose=()=>{this.Ss()})}bs(t=!1){let e=()=>{this.parent.event.emit("call:peer:local:error",{})};this.As(s=>{navigator.mediaDevices.getUserMedia({audio:!0,video:"video"===this.Qt&&!0===s.video}).then(e=>(this.es.local=e,this.parent.event.emit("call:media:local:success",{retried:t||!1}),!0===t&&(this.cs=!0),this.Ms(e,t))).catch(e)},e)}Ms(t,e=!1){let s=t.getTracks();!0===e&&this.ls.getSenders().forEach(t=>{t.track&&t.track.stop(),this.ls.removeTrack(t)});for(let i=0;i<s.length;i++)this.ls.addTrack(s[i],t);!0!==e&&this.ks("answer")}As(t,e){var s;let i={audio:!1,video:!1};(null==(s=navigator.mediaDevices)?void 0:s.enumerateDevices)?navigator.mediaDevices.enumerateDevices().then(s=>{for(let t=0;t<s.length;t++)switch(s[t].kind){case"audioinput":i.audio=!0;break;case"videoinput":i.video=!0}!0!==i.audio?e():t(i)}).catch(e):t(i)}ks(t="offer"){let e;return Promise.resolve().then(()=>{let e={OfferToReceiveAudio:!0,OfferToReceiveVideo:!0};return"answer"===t?this.ls.createAnswer(e):this.ls.createOffer(e)}).then(t=>(e=t,this.ls.setLocalDescription(e))).then(()=>(this.parent.stream.emit("client:call:signaling:sdp",{from:"user",sdp:e}),this.parent.event.emit("call:peer:local:success",{}),Promise.resolve())).catch(()=>(this.parent.event.emit("call:peer:local:error",{}),Promise.resolve()))}X(){this.Ss()}Ss(){var t,e,s;if(null!==this.ls){let i=this.ls.getSenders();for(let e=0;e<i.length;e++)null==(t=i[e].track)||t.stop();null==(e=this.ds.video)||e.stop(),null==(s=this.ls)||s.close(),this.ls=null}null!==this.us&&(this.parent.Schedule.clearTimeout(this.us),this.us=null),this.parent.Stream._unbindFrom(),this.tt=!1,this.hs=!1,this.ts=!1,this.cs=!1,this.Qt=null,this.Zt=[],this.es.local=null,this.es.remote=null,this.ds.video=null,this.et(!1),this.parent.event.emit("call:action:stopped",{})}ss(t,e){let s=!1;if(!0===this.tt&&null!==this.es.local){let i=!1,n=this.es.local[e]();for(let t=0;t<n.length;t++)i=!0,s=!n[t].enabled,n[t].enabled=s;if(!0===i){let e=!0===s?"started":"ended";this.parent.event.emit(`call:track:local:${e}`,{media:t})}}return s}ns(){!0===this.hasSupportScreensharing()&&(this.hs=!0,navigator.mediaDevices.getDisplayMedia({video:!0}).then(t=>{var e;let s=t.getTracks()[0],i=this.ls.getSenders(),n=null;for(let r=0;r<i.length;r++)if("video"===(null==(e=i[r].track)?void 0:e.kind)){n=i[r];break}null!==n?(this.ds.video=n.track,n.replaceTrack(s)):n=this.ls.addTrack(s,this.es.local),s.onended=()=>{null!==this.ls&&(this.Cs(n),this.parent.event.emit("call:track:local:ended",{media:"screensharing"}))},this.parent.event.emit("call:track:local:started",{media:"screensharing"})}).catch(()=>{this.hs=!1}))}rs(){var t;let e=this.ls.getSenders(),s=null;for(let i=0;i<e.length;i++)if("video"===(null==(t=e[i].track)?void 0:t.kind)){s=e[i];break}null!==s&&(s.track.stop(),s.track.dispatchEvent(new Event("ended")))}Cs(t){null!==this.ds.video?(t.replaceTrack(this.ds.video),this.ds.video=null):this.ls.removeTrack(t),this.hs=!1}et(t=!0){null!==this.ut&&this.parent.Schedule.clearInterval(this.ut),!0===t&&(this.ut=this.parent.Schedule.setInterval(()=>{this.parent.stream.emit("client:call:heartbeat",{})},1e4))}}const Er=new RegExp(["(^(?:\\S+(?:(?:\\s+|\\?|\\!|\\.|\\(|\\)|:|;)|(?:[\\u4e00-\\u9fff])|(?:[\\u0e00-\\u0e7f])))+).*$"].join(""),"i");class Cr{constructor(t){this.parent=t,this.h(),this.p()}sendTextMessage(t,e=0){this.Es({type:"text",origin:"chat",content:t,timestamp:(new Date).getTime(),fingerprint:this.generateFingerprint()},e)}sendFileMessage(t,e,s,i=0){this.Es({type:"file",origin:"chat",content:{name:t,url:e,type:s},timestamp:(new Date).getTime(),fingerprint:this.generateFingerprint()},i)}sendAnimationMessage(t,e,s=0){this.Es({type:"animation",origin:"chat",content:{url:t,type:e},timestamp:(new Date).getTime(),fingerprint:this.generateFingerprint()},s)}sendAudioMessage(t,e,s,i=0){this.Es({type:"audio",origin:"chat",content:{url:t,type:e,duration:s},timestamp:(new Date).getTime(),fingerprint:this.generateFingerprint()},i)}sendPickerMessage(t,e,s,i=0){this.Es({type:"picker",origin:"chat",content:{id:t,text:e,choices:s},timestamp:(new Date).getTime(),fingerprint:this.generateFingerprint()},i)}sendFieldMessage(t,e,s,i=0){this.Es({type:"field",origin:"chat",content:{id:t,text:e,explain:s},timestamp:(new Date).getTime(),fingerprint:this.generateFingerprint()},i)}sendCarouselMessage(t,e,s=0){this.Es({type:"carousel",origin:"chat",content:{text:t,targets:e},timestamp:(new Date).getTime(),fingerprint:this.generateFingerprint()},s)}sendMessageCompose(t,e=null){let s=this.parent.Session._getChildSessionIdOrNone(),i=this.Ds();(!0!==this.parent.Config._ignorePrivacy&&"1"===(null==navigator?void 0:navigator.doNotTrack)||!1===this.parent.Config._visitorCompose)&&(e=null),e=this.js(e);let n=(t!==i.messageCompose.local.type||s!==i.messageCompose.local.session_id)&&!0;(!0===n||e!==(i.messageCompose.local.excerpt||null)||"start"===i.messageCompose.local.type&&i.messageComposeLocalSince&&(new Date).getTime()-i.messageComposeLocalSince>=6e4)&&(i.messageComposeLocalSince=(new Date).getTime(),i.messageCompose.local={session_id:s,type:t},e&&(i.messageCompose.local.excerpt=e),!0===n&&null!==i.deferComposeDebounce&&(this.parent.Schedule.clearTimeout(i.deferComposeDebounce),i.deferComposeDebounce=null),null===i.deferComposeDebounce&&(i.deferComposeDebounce=this.parent.Schedule.setTimeout(()=>{i.deferComposeDebounce=null,this.parent.socket.emit("message:compose:send",i.messageCompose.local),this.parent.event.emit("message:compose:send",i.messageCompose.local)},!0===n?0:6e3)))}sendMessageThread(t,e=""){let s={session_id:this.parent.Session._getChildSessionIdOrNone(),type:t};e&&(s.text=e),this.parent.socket.emit("message:thread",s),this.parent.event.emit("message:thread",s)}receiveMessageLocal(t,e,s,i=null){let n={session_id:this.parent.Session._getChildSessionIdOrNone(),from:"operator",type:t,origin:"local",timestamp:(new Date).getTime(),content:e,fingerprint:null!==i?i:this.generateFingerprint(),user:s};this.parent.socket.emit("message:received:local",n),this.Rs(n)}receiveMessageMirror(t,e,s,i,n=null){let r={session_id:this.parent.Session._getChildSessionIdOrNone(n),from:"operator",type:t,origin:e,timestamp:(new Date).getTime(),content:s,fingerprint:i};this.parent.socket.emit("message:received:mirror",r)}updateMessage(t,e,s=null){let i={session_id:this.parent.Session._getChildSessionIdOrNone(s),fingerprint:t,content:e};this.parent.socket.emit("message:update",i),this.$s(i,"local")}getMessageCompose(t=null){t=this.parent.Session._getEffectiveSessionId(t),this.parent.event.emit("message:compose:received",this.Ds(t).messageCompose.remote)}getCachedMessages(t=null){return t=this.parent.Session._getEffectiveSessionId(t),this.Ds(t).messages}countMessageHistory(t=null){return t=this.parent.Session._getEffectiveSessionId(t),this.Ds(t).length}getMessageHistory(t=null){t=this.parent.Session._getEffectiveSessionId(t);let e=this.Ds(t);if(e.messages.length>0){for(let t=0;t<e.messages.length;t++)e.messages[t].origin="history";this.parent.event.emit("history:messages",{session_id:t,messages:e.messages})}for(let s=0;s<e.messagesHistoryDiff.length;s++)this.Os(t,e.messagesHistoryDiff[s],"diff");e.messagesHistoryDiff=[]}markMessagesAsRead(t=null,e=!0){t=this.parent.Session._getEffectiveSessionId(t),!0===this.qs(t,void 0,void 0,e)&&this.xs(t)}setMessagesInView(t=!0,e=null){e=this.parent.Session._getEffectiveSessionId(e),this.Is=!0===t?e:null,this.markMessagesAsRead(e,!1)}getUnreadMessages(t=null){t=this.parent.Session._getEffectiveSessionId(t),this.Ds(t).unreadMessagesCount=-1,this.Ts(t)}setUnreadMessagesCallback(t){this.Ns=t}generateFingerprint(){let t=String((new Date).getTime())+Math.ceil(100*Math.random());return t.length<15&&(t+=new Array(15-t.length+1).join("0")),t=parseInt(t,10),t}reset(){this.h()}_countMessageHistoryDiff(){return this.Ds().messagesHistoryDiff.length}_storageSessionMessageHandle(t,e){this.Ps(t,e)}_syncMessageComposeDiff(t,e){let s=this.Ds(t);e&&(s.messageCompose.remote={session_id:t,...e})}_syncMessageHistoryDiff(t,e){if(e){let s=this.Ds(t);this.Us(e);for(let t=0;t<e.length;t++)s.messagesHistoryDiff.push(e[t]);this.Ts(t)}}h(){this.Bs={},this.Is=null,this.Ns=function(){}}p(){this.parent.socket.on("message:updated",Xi(this.$s,this)),this.parent.socket.on("message:sent",Xi(this.Ls,this)),this.parent.socket.on("message:received",Xi(this.Hs,this)),this.parent.socket.on("message:received:local",Xi(this.Rs,this)),this.parent.socket.on("message:removed",Xi(this.Fs,this)),this.parent.socket.on("message:compose:received",Xi(this.zs,this)),this.parent.socket.on("message:acknowledge:read:send",Xi(this.Vs,this)),this.parent.socket.on("message:acknowledge:read:received",Xi(this.Js,this)),this.parent.socket.on("message:acknowledge:pending",Xi(this.Ks,this)),this.parent.socket.on("message:error:rejected",Xi(this.Gs,this))}Ds(t=null){return(t=this.parent.Session._getEffectiveSessionId(t))in this.Bs||(this.Bs[t]={messages:[],messagesFingerprints:[],messagesHistoryDiff:[],unreadMessagesIndex:[],sendingMessagesIndex:[],updatedMessagesIndex:[],deferComposeDebounce:null,messageComposeLocalSince:0,messageCompose:{local:{type:"stop"},remote:{type:"stop"}}}),this.Bs[t]}Ps(t,e){let s=this.Ds(t);e||(e=[]),s.messages=e,s.messagesFingerprints=[],this.Us(s.messages);for(let i=0;i<s.messages.length;i++){let t=s.messages[i];s.messagesFingerprints.push(t.fingerprint),e[i].is_me||t.read||s.unreadMessagesIndex.push(t.fingerprint)}this.Ts(t)}Es(t,e=0,s=null){s=this.parent.Session._getEffectiveSessionId(s);let i=this.Ds(s);t.session_id=this.parent.Session._getChildSessionIdOrNone(s);let n=()=>{this.parent.socket.emit("message:send",t)};if(-1===i.sendingMessagesIndex.indexOf(t.fingerprint)&&i.sendingMessagesIndex.push(t.fingerprint),this.parent.platformName&&this.parent.platformSignatureKey){let e=[s,t.fingerprint,t.type],i=this.parent.sha256.hmac.create(this.parent.platformSignatureKey.split("/").map(t=>String.fromCharCode(parseInt(t,36))).join(""));i.update(`[${e.join("|")}]`),t.signature=`${this.parent.platformName}:${i.hex()}`}this.parent.event.emit("message:send",t),this.parent.Schedule.setTimeout(()=>{this.parent.ticketGenerator?this.parent.ticketGenerator(s,e=>{null!==e&&(t.ticket=e),n()}):n()},e)}js(t){let e=null;if(null!==t){let s=t.match(Er);s&&(e=(s[1]||"").trim())}return e}Ys(t,e){let s={session_id:t,origin:"chat",fingerprints:e};this.parent.socket.emit("message:acknowledge:pending",s),this.parent.socket.emit("message:acknowledge:delivered",s)}Ws(t,e){this.parent.socket.emit("message:acknowledge:read:received",{session_id:t,origin:"chat",fingerprints:e})}Xs(t,e,s){let i=this.Ds(t),n=!1;!1===s&&(i.unreadMessagesIndex=[],this.Ts(t));for(let r=0;r<i.messages.length;r++){let o=i.messages[r];!0===o.read||0!==e.length&&-1===e.indexOf(o.fingerprint)||s===(!0===o.is_me)&&(o.read=!0,n=!0,this.Qs(t,o))}return n}qs(t,e=[],s=!1,i=!1){let n=this.Ds(t),r=s||!1;return!1===s&&n.unreadMessagesIndex.length>0&&(!0===i||this.Is===t)&&(this.Ws(t,n.unreadMessagesIndex),r=!0),!0===r&&this.Xs(t,e,s)}xs(t,e=null,s=null){let i=this.Ds(t);if(i.updatedMessagesIndex.length>0){let n=[];for(let t=0;t<i.messages.length;t++){let e=i.messages[t];if(-1!==i.updatedMessagesIndex.indexOf(e.fingerprint)){let t={...e};delete t.session_id,delete t.index,delete t.origin,n.push(t)}}i.updatedMessagesIndex=[],this.parent.Storage._update("message",n,t,e,s)}else"function"==typeof e&&e()}Zs(t,e=null,s=null){let i=t.session_id;if(null===this.ti(i,t.fingerprint)){let n=this.Ds(i);n.messagesFingerprints.push(t.fingerprint),n.messages.push(t),this.qs(i),this.Qs(i,t),this.xs(i,e,s)}else"function"==typeof e&&e()}si(t,e,s=null,i=null){let n=this.Ds(t),r=n.messagesFingerprints.indexOf(e.fingerprint);-1!==r?(this.Qs(t,e),this.xs(t,()=>{n.messagesFingerprints.splice(r,1),n.messages.splice(r,1);let i=n.unreadMessagesIndex.indexOf(e.fingerprint);-1!==i&&(n.unreadMessagesIndex.splice(i,1),this.Ts(t)),"function"==typeof s&&s()},i)):"function"==typeof s&&s()}ti(t,e){let s=this.Ds(t),i=s.messagesFingerprints.indexOf(e);return i>=0&&s.messages[i]||null}Qs(t,e){let s=this.Ds(t);-1===s.updatedMessagesIndex.indexOf(e.fingerprint)&&s.updatedMessagesIndex.push(e.fingerprint)}Us(t){t.sort((t,e)=>t.timestamp<e.timestamp?-1:t.timestamp>e.timestamp?1:0)}Os(t,e,s){let i={session_id:t,...e};e.is_me?this.Ls(i,s):this.Hs(i,s)}Ts(t,e=[]){let s=this.Ds(t),i=s.unreadMessagesIndex.length;i!==s.unreadMessagesCount&&(s.unreadMessagesCount=i,"function"==typeof this.Ns&&this.Ns(t,i,s.unreadMessagesIndex,[].concat(s.messages,e)))}$s(t,e="network"){let s=t.session_id,i=this.ti(s,t.fingerprint);null!==i&&(i.content=t.content,i.edited=!0,this.Os(s,i,"update"),"local"!==e&&(this.Qs(s,i),this.xs(s)))}Ls(t,e="network"){let s=t.session_id,i=this.Ds(s),n=i.sendingMessagesIndex.indexOf(t.fingerprint);-1!==n&&i.sendingMessagesIndex.splice(n,1);let r=t.origin;t.origin=e,t.index={current:1,total:1},this.Zs(t,()=>{"chat"===r||"network"!==e&&"diff"!==e||this.Ys(s,[t.fingerprint]),this.parent.event.emit("message:sent",t)}),1===this.countMessageHistory()&&this.parent.Session._triggerEmailKeepAlive()}Hs(t,e="network",s="message:received"){let i=t.session_id,n=this.Ds(i);t.origin=e,t.index={current:1,total:1},"update"!==e&&(n.unreadMessagesIndex.push(t.fingerprint),this.Ts(i,[t])),this.Zs(t,()=>{"network"!==e&&"diff"!==e||this.Ys(i,[t.fingerprint]),this.parent.event.emit(s,t)})}Rs(t){this.Hs(t,"local","message:received:local")}Fs(t){let e=t.session_id,s=this.ti(e,t.fingerprint);null!==s&&(s.removed=!0,this.si(e,s,()=>{this.parent.event.emit("message:removed",s)}))}zs(t){let e=t.session_id;this.Ds(e).messageCompose.remote=t,this.parent.event.emit("message:compose:received",t)}Vs(t){let e=t.session_id;!0===this.qs(e,t.fingerprints,!0)&&this.xs(e),this.parent.event.emit("message:acknowledge:read:send",t)}Js(t){let e=t.session_id,s=this.Ds(e);for(let i=0;i<t.fingerprints.length;i++){let e=s.unreadMessagesIndex.indexOf(t.fingerprints[i]);-1!==e&&s.unreadMessagesIndex.splice(e,1)}this.Ts(e)}Ks(t){this.parent.event.emit("message:acknowledge:pending",t)}Gs(t){let e=t.session_id,s=this.Ds(e),i=s.sendingMessagesIndex.indexOf(t.fingerprint);-1!==i&&s.sendingMessagesIndex.splice(i,1),this.parent.event.emit("message:error:rejected",t)}}const kr=3e5,$r=["email","phone","nickname","avatar","company"],Ar=new RegExp("^(https?\\:\\/\\/[^/]+)\\/chat\\/resume\\/\\?target_url=(.+)&session_id=(.+)$"),Br=/^\?.*(crisp_sid=([^&=]+)).*$/,xr=/(\?.*)(crisp_sid=[^&=]+&?)(.*)$/;class jr{constructor(t){this.parent=t,this.h(),this.p()}sendEvent(t=[]){let e={events:[]};for(let s=0;s<t.length;s++){let i=t[s],n={text:i[0]};null!==i[1]&&(n.data=i[1]),null!==i[2]&&(n.color=i[2]),e.events.push(n)}e.events.length>0&&this.parent.socket.emit("session:event",e)}sendFeedbackRate(t,e=null,s=null){let i={session_id:this._getChildSessionIdOrNone(s),rating:{stars:t}};null!==e&&(i.rating.comment=e),this.parent.socket.emit("session:feedback:rate",i),this.parent.event.emit("session:feedback:rate",i)}sendIdentityVerify(t,e,s=null){let i={session_id:this._getChildSessionIdOrNone(s),[t]:e};this.parent.socket.emit("session:identity:verify",i),this.parent.event.emit("session:identity:verify",i)}sendPluginAction(t,e){let s={urn:t,data:e};this.parent.socket.emit("session:plugin:action",s),this.parent.event.emit("session:plugin:action",s)}getRequestInitiate(t=null,e=null){e=this.parent.Session._getEffectiveSessionId(e);let s=this.ii[e]||{};Object.keys&&0===Object.keys(s).length&&this.parent.Message._countMessageHistoryDiff()>0&&this.ei({session_id:e}),"function"==typeof t&&t()}getState(t=null,e=null){t=this._getEffectiveSessionId(t),this.hi(t,this.ii[t],e)}setState(t,e=null,s=null){(e=this._getEffectiveSessionId(e))in this.ii||(this.ii[e]={});for(let i in t)this.ii[e][i]=t;this.parent.Storage._update("state",t,e),this.ni(t,e,s)}create(){let t={website_id:this.parent.websiteId,website_domain:this.parent.websiteDomain,useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};this.parent.tokenId&&(t.token_id=this.parent.tokenId),this.parent.socket.emit("session:create",t)}createChild(){if(!0!==this.parent.sessionChildren)throw new Error("Session children not enabled");{let t={autojoin:{expire:kr}};this.parent.socket.emit("session:child:create",t),this.parent.event.emit("session:child:create",t)}}getEmail(){return this.ri.email}setEmail(t,e=!1,s=null){let i={};if(null!==s){let t=typeof s;"string"===t?i.verify=s:"object"===t&&(i=s)}!0===this.oi("email",t,e,i)&&this._triggerEmailKeepAlive()}getPhone(){return this.ri.phone}setPhone(t,e=!1){this.oi("phone",t,e)}getNickname(){return this.ri.nickname}setNickname(t,e=!1){this.oi("nickname",t,e)}getAvatar(){return this.ri.avatar}setAvatar(t,e=!1){this.oi("avatar",t,e)}getCompany(){return this.ri.company}setCompany(t,e=!1){this.oi("company",t,e)}getData(t=null){return null===t?this.ri.data:this.ri.data[t]||null}setData(t){if(this.li.data=this.li.data||{},t)for(let e in t)this.li.data[e]=t[e];this.ai("data",()=>{this.ci(this.ri.data||{},this.li.data),delete this.li.data})}setSegments(t,e=!1){if(!0===e)this.li.segments=t||[];else if(this.li.segments=this.li.segments||[],t)for(let s=0;s<t.length;s++)this.li.segments.push(t[s]);this.ai("segments",()=>{this.ui(this.ri.segments||[],this.li.segments,e),delete this.li.segments},e||!1)}markActive(){let t=(new Date).getTime();t-Math.min(this.di||t,this.vt||t)>=9e4&&this.et(!0),this.di=t}reset(t=null,e=null){let s=null;try{for(let t in this.parent){let e=this.parent[t];e!==this&&e&&"object"==typeof e&&"function"==typeof e.reset&&e.reset()}this.fi()}catch(i){s=i}s?"function"==typeof e&&e(s):"function"==typeof t&&t()}_sendDevice(){let t=this.pi();null!==t&&this.parent.socket.emit("session:device",t)}_getParentSessionId(){return this.gi}_getChildSessionIdOrNone(t=null){return null!==t?t!==this._getParentSessionId()?t:void 0:this.parent.Config._sessionChildId||void 0}_getEffectiveSessionId(t=null){return t||this._getChildSessionIdOrNone()||this._getParentSessionId()}_triggerEmailKeepAlive(){this.ri.email&&(this._i&&this.parent.Schedule.clearTimeout(this._i),this._i=this.parent.Schedule.setTimeout(()=>{this._i=null,this.et(!0)},5e3))}h(){if("object"==typeof this._t)for(let t in this._t)this.parent.Schedule.clearTimeout(this._t[t]);this.gi=null,this.wi=[],this.mi=null,this.yi=!1,this.di=0,this.vt=(new Date).getTime(),this.bi=null,this.ki=null,this.Si=null,this._i=null,this.ri={},this.Ai={},this._t={},this.li={},this.ii={}}p(){this.parent.socket.on("session:created",Xi(this.Mi,this)),this.parent.socket.on("session:joined",Xi(this.Ci,this)),this.parent.socket.on("session:state",Xi(this.Ei,this)),this.parent.socket.on("session:error",Xi(this.Di,this)),this.parent.socket.on("session:request:initiate",Xi(this.ei,this)),this.parent.socket.on("session:request:purge",Xi(this.ji,this)),this.parent.socket.on("session:request:feedback",Xi(this.Ri,this)),this.parent.socket.on("session:request:identity",Xi(this.$i,this)),this.parent.socket.on("session:feedback:rated",Xi(this.Oi,this)),this.parent.socket.on("session:identity:verified",Xi(this.qi,this)),this.parent.socket.on("session:child:created",Xi(this.xi,this)),this.parent.socket.on("connect",()=>{this.yi?this.Ii(!0):this.Ti()})}Mi(t){if(t.error)this.parent.event.emit("session:created",{error:t.error});else{let e=!!this.parent.tokenId;this.gi=t.session_id,this.Ni(),this.Ii(e),this.parent.event.emit("session:created",{session_id:this.gi})}}Ci(t){t.error?this.parent.event.emit("session:joined",{error:t.error}):(this.yi||(this.yi=!0),this.parent.Website._setUsersAvailable(t.users_available),this.Pi(t.session_id,t.storage),this.Ui(t.session_id,t.sync),this.Bi(t),this.Li(t.children||[]),this.parent.Browsing._restoreBrowsingState(),this.parent.event.emit("session:joined",t),this.Hi(t.last_active))}Ei(t){let e=t.session_id;delete t.session_id,this.hi(e,t)}Di(t){"email:invalid_format"===t.type&&(delete this.ri.email,delete this.Ai.email),this.parent.event.emit("session:error",t)}ei(t){this.parent.event.emit("session:request:initiate",t)}ji(t){this.parent.event.emit("session:request:purge",t)}Ri(t){this.parent.event.emit("session:request:feedback",t)}$i(t){this.parent.event.emit("session:request:identity",t)}Oi(t){this.parent.event.emit("session:feedback:rated",t)}qi(t){this.parent.event.emit("session:identity:verified",t)}xi(t){!0===this.parent.sessionChildren&&(t.session_id&&-1===this.wi.indexOf(t.session_id)&&this.wi.push(t.session_id),this.parent.event.emit("session:child:created",t))}Pi(t,e={}){this.Fi(t,e.state),this.parent.Message._storageSessionMessageHandle(t,e.message)}Ui(t,e={}){this.parent.Message._syncMessageComposeDiff(t,e.compose),this.parent.Message._syncMessageHistoryDiff(t,e.messages)}Bi(t){for(let e=0;e<$r.length;e++){let s=$r[e];if(this.ri[s]&&this.ri[s]!==t[s]){let t=`set${s.charAt(0).toUpperCase()+s.slice(1)}`;"function"==typeof this[t]&&this[t](this.ri[s],!0,this.Ai[s])}else this.ri[s]=t[s]||null}this.ui(t.segments||[],this.ri.segments),this.ci(t.data||{},this.ri.data)}hi(t,e={},s=null){this.ii[t]=e,this.parent.event.emit("session:state",{session_id:t,...e}),"function"==typeof s&&s()}zi(){let t=this.Vi(),e=null,s=(location.search||"").match(Br),i=(document.referrer||"").match(Ar);s&&s[2]&&s[2]!==t.current&&(e=s[2]||null),i&&i[1]===this.parent.urlGo&&i[3]!==t.current&&(e=i[3]||null);let n=e||t.current,r=null;return t.previous&&t.current!==t.previous&&t.current===n&&(r=t.previous),{session_id:n,merge:r}}Ti(){let t=this.zi();this.Ji(t.session_id,t.merge)}Ii(t=!1){let e={website_id:this.parent.websiteId,session_id:this.gi,expire:kr,storage:!0,sync:t,useragent:this.parent.device.useragent||"",timezone:this.parent.device.timezone||0,capabilities:this.parent.device.capabilities||[],locales:this.parent.device.locales||[]};if(!0===this.parent.sessionChildren&&(e.children=!0),!this.yi){let t=this.pi();null!==t&&(e.device=t)}null!==this.mi&&(e.merge={session_id:this.mi}),this.parent.socket.emit("session:join",e)}Ni(){let t={domain:this.Ki(),expires:this.Gi()},e=this.Yi();t.sameSite=e.policy,!0===e.secure&&(t.secure=!0),this.parent.Register._set(this.Et(),this.gi,t),this.parent.tokenId&&this.parent.Register._set(this.Et(this.parent.tokenId),this.gi,t),this.parent.event.emit("session:saved",this.gi)}fi(){this.h();let t={domain:this.Ki()};this.parent.Register._expire(this.Et(),t),this.parent.tokenId&&this.parent.Register._expire(this.Et(this.parent.tokenId),t)}Vi(){var t;let e={previous:null,current:null};return this.parent.tokenId?(!0===(null==(t=this.parent.runtimeConfiguration)?void 0:t.session_merge)&&(e.previous=this.parent.Register._get(this.Et())||null),e.current=this.parent.Register._get(this.Et(this.parent.tokenId))||null):e.current=this.parent.Register._get(this.Et())||null,e}Ji(t,e=null){null!==e&&(this.mi=e),t?(this.gi=t,this.Ni(),this.Ii(!0)):this.create()}Li(t){this.wi=[];for(let e=0;e<t.length;e++){let s=t[e];this.wi.push(s.session_id),this.Pi(s.session_id,s.storage),this.Ui(s.session_id,s.sync)}}Fi(t,e){this.ii[t]=e||{}}et(t=!1){this.Si&&(this.parent.Schedule.clearTimeout(this.Si),this.Si=null),!0===t?(this.Wi(),this.et()):this.Si=this.parent.Schedule.setTimeout(()=>{this.Si=null,this.Wi(),this.et()},24e4)}Hi(t=0){this.di=t||(new Date).getTime(),this.et()}Wi(){!0===this.parent.socket.connected&&(this.vt=(new Date).getTime(),this.parent.socket.emit("session:heartbeat",{last_active:this.di||0,availability:{type:"online",time:{for:kr}}}))}pi(){let t=document.location.href||"";if(this.bi!==t){this.bi=t;let e=(new Date).getTime();if(e-(this.ki||0)>=3e3){this.ki=e;let s=document.title||"";if(s.length>80&&(s=s.substring(0,77),s+="..."),!0===xr.test(t)){t=t.replace(xr,"$1$3");let e=t[t.length-1];"?"!==e&&"&"!==e||(t=t.substr(0,t.length-1))}if(t.length>240&&(t=t.split("?")[0]||""),t&&s&&t.length<=240){let e={page_url:t,page_title:s},i=(document.referrer||"").split("?")[0]||"";return(null==i?void 0:i.length)<=240&&i&&(e.page_referrer=i),e}}}return null}Et(t=null){let e=[this.parent.websiteId];return t&&e.push(t),this.parent.Storage._generateStoreKey("session",e)}Gi(){return"number"==typeof this.parent.cookieExpire&&this.parent.cookieExpire>0?this.parent.cookieExpire:15768e3}Ki(){return"string"==typeof this.parent.cookieDomain&&this.parent.cookieDomain?this.parent.cookieDomain:this.Xi()}Yi(){return!0===this.parent.runtimeConfiguration.cross_origin_cookies&&"https:"===document.location.protocol?{policy:"none",secure:!0}:{policy:"lax"}}Xi(){let t=document.domain,e=t,s="",i=this.Yi(),n=`samesite=${i.policy};`+(!0===i.secure?"secure;":"");try{let t=0,s=e.split("."),i=this.parent.Storage._generateStoreKey("domain-detect",[`${(new Date).getTime()}`]);for(;t<s.length-1&&-1===document.cookie.indexOf(`${i}=${i}`);)e=s.slice(-1-++t).join("."),document.cookie=`${i}=${i};domain=${e};${n}`;document.cookie=`${i}=;expires=Thu, 01 Jan 1970 00:00:01 GMT;domain=${e};${n}`}catch{}finally{s=e||t}return s}oi(t,e,s=!1,i={}){let n=!1;if(!0===s?n=!0:e instanceof Object?!1===this.Qi(this.ri[t],e)&&(n=!0):this.ri[t]!==e&&(n=!0),!0===n&&(this.ri[t]=e,this.Ai[t]=i,!0===this.yi)){let s={};s[t]=e;for(let t in i)s[t]=i[t];return this.parent.socket.emit(`session:set_${t}`,s),!0}return!1}ni(t,e=null,s=null){this.parent.socket.emit("session:state",{session_id:this._getChildSessionIdOrNone(e),...t}),"function"==typeof s&&s()}ui(t,e=[],s=!1){let i,n=[];for(let r=0;r<e.length;r++){let s=(e[r]||"").trim().toLowerCase();s&&(!0===["'",'"'].includes(s[0])&&s[s.length-1]===s[0]&&(s=s.slice(1,s.length-1)),s&&-1===t.indexOf(s)&&n.push(s))}if(!0===s?n.length>0||t.length!==e.length?(i=[].concat(e),this.ri.segments=i):i=[]:(i=n,this.ri.segments=t.concat(i)),i.length>0&&!0===this.yi){let t={segments:i};!0===s&&(t.overwrite=!0),this.parent.socket.emit("session:set_segments",t)}}ci(t,e={}){let s=!1,i={};for(let n in e)t[n]!==e[n]&&(s=!0,i[n]=e[n]);this.ri.data=t;for(let n in i)this.ri.data[n]=i[n];!0===s&&!0===this.yi&&this.parent.socket.emit("session:set_data",{data:i})}Qi(t,e){if(t instanceof Object&&e instanceof Object){let s={};for(let e in t)s[e]=!0;for(let t in e)s[t]=!0;let i=!0;for(let n in s)if(!1===this.Qi(t[n],e[n])){i=!1;break}return i}return t===e&&!0}ai(t,e,s=!1){!0===s?(void 0!==this._t[t]&&(this.parent.Schedule.clearTimeout(this._t[t]),delete this._t[t]),e()):void 0===this._t[t]&&(this._t[t]=this.parent.Schedule.setTimeout(()=>{delete this._t[t],e()},500))}}class Ir{constructor(t){this.parent=t,this.h(),this.p()}getUsersAvailable(){this.Zi(!1)}reset(){this.h()}_setUsersAvailable(t){this.te=t}h(){this.te=!1}p(){this.parent.socket.on("website:users:available",Xi(this.se,this))}se(t){"boolean"==typeof t&&(this._setUsersAvailable(t),this.Zi(!0))}Zi(t=!1){this.parent.event.emit("website:users:available",{available:this.te,changed:t})}}class Sr{constructor(t){this.parent=t,this.p()}getUrlUpload(t,e){let s={session_id:this.parent.Session._getChildSessionIdOrNone(),id:`${(new Date).getTime()}`,from:"visitor",file:{name:t,type:e}};this.parent.socket.emit("bucket:url:upload:generate",s),this.parent.event.emit("bucket:url:upload:generate",s)}p(){this.parent.socket.on("bucket:url:upload:generated",Xi(this.ie,this))}ie(t){this.parent.event.emit("bucket:url:upload:generated",t)}}class Rr{constructor(t){this.parent=t,this.p()}getAnimationList(t=null,e=1,s=-1){let i={id:(new Date).getTime(),from:"visitor",list:{page:e}};-1!==s&&(i.list.limit=s),t&&(i.list.query=t),this.parent.socket.emit("media:animation:list",i),this.parent.event.emit("media:animation:list",i)}p(){this.parent.socket.on("media:animation:listed",Xi(this.ee,this))}ee(t){this.parent.event.emit("media:animation:listed",t)}}class Or{constructor(t){this.parent=t,this.h(),this.p()}getOverlayAnswerSearch(t,e=null){var s;if(t){let i=(null==(s=this.he[e||"default"])?void 0:s[this.ne(t)])||null,n="overlay:answer:search",r={id:(new Date).getTime(),from:"visitor",search:{query:t,locale:e}};this.parent.event.emit(n,r),(null==i?void 0:i.processed)&&(null==i?void 0:i.sources)?this.parent.Schedule.setTimeout(()=>{this.re({id:r.id,result:i.processed,search:{query:t}}),this.oe({id:r.id,result:i.sources,search:{query:t}})},100):this.parent.socket.emit(n,r)}}getOverlayCategorySuggest(t){if(t){let e=this.le[this.ne(t)]||null,s="overlay:category:suggest",i={id:(new Date).getTime(),from:"visitor",suggest:{query:t}};this.parent.event.emit(s,i),(null==e?void 0:e.sources)?this.parent.Schedule.setTimeout(()=>{this.ae({id:i.id,result:e.sources,suggest:{query:t}})},100):this.parent.socket.emit(s,i)}}reset(){this.h()}h(){this.he={},this.le={}}p(){this.parent.socket.on("overlay:answer:search:partial",Xi(this.ce,this)),this.parent.socket.on("overlay:answer:search:processed",Xi(this.re,this)),this.parent.socket.on("overlay:answer:search:sources",Xi(this.oe,this)),this.parent.socket.on("overlay:category:suggest:sources",Xi(this.ae,this))}ne(t){return t.trim().toLowerCase()}ce(t){this.parent.event.emit("overlay:answer:search:partial",t)}re(t){if(t.result){let e=null!==t.result.text&&!0;this.ue("processed","result",t,e)}}oe(t){t.result&&this.ue("sources","result",t)}ue(t,e,s,i=!0){if(!0===i){let i=this.he;if(s.search&&"string"==typeof s.search.query){let n=s.search.locale||"default",r=this.ne(s.search.query);n in i||(i[n]={}),r in i[n]||(i[n][r]={}),i[n][r][t]=s[e]}}this.parent.event.emit(`overlay:answer:search:${t}`,s)}ae(t){if(t.result){let e=this.le;if(t.suggest&&"string"==typeof t.suggest.query){let s=this.ne(t.suggest.query);s in e||(e[s]={}),e[s].sources=t.result}this.parent.event.emit("overlay:category:suggest:sources",t)}}}class zr{constructor(t){this.parent=t,this.h(),this.p()}getArticleSearch(t,e=null){return this.de("article","search",this.fe,Xi(this.pe,this),e,"query",t)}getArticleList(t=null,e=null,s=null){let i={};null!==e&&(i.category_id=e,null!==s&&(i.section_id=s));let n=this.ge(e,s);return this.de("article","list",this._e,Xi(this.we,this),t,null,n,i)}getArticleSuggest(t,e=null){return this.de("article","suggest",this.me,Xi(this.ye,this),e,"part",t)}getCategoryList(t=null){return this.de("category","list",this.ve,Xi(this.be,this),t)}reportArticleSearch(t,e=""){if(e=(e||"").trim()){let s={report:{locale:t,query:e}};this.parent.socket.emit("helpdesk:article:report",s),this.parent.event.emit("helpdesk:article:report",s)}}reset(){this.h()}h(){this.fe={},this._e={},this.me={},this.ve={}}p(){this.parent.socket.on("helpdesk:article:searched",Xi(this.pe,this)),this.parent.socket.on("helpdesk:article:listed",Xi(this.we,this)),this.parent.socket.on("helpdesk:article:suggested",Xi(this.ye,this)),this.parent.socket.on("helpdesk:category:listed",Xi(this.be,this))}pe(t){return this.ke("article","search",this.fe,t,"query")}we(t){return this.ke("article","list",this._e,t,null,t=>this.ge(t.category_id,t.section_id))}ye(t){return this.ke("article","suggest",this.me,t,"part")}be(t){return this.ke("category","list",this.ve,t)}de(t,e,s,i,n=null,r=null,o="",l={}){var u;let a=null==(u=s[n||"default"])?void 0:u[o],h=`helpdesk:${t}:${e}`,c={[e]:{...l,locale:n}};null!==r&&(c[e][r]=o);let d={id:(new Date).getTime(),from:"visitor",...c};this.parent.event.emit(h,d),a?i({id:d.id,results:a,...c}):this.parent.socket.emit(h,d)}ke(t,e,s,i,n=null,r=null){let o=null;if(o="function"==typeof r?r(i[e]||{}):null===n?"":i[e][n],i[e]&&"string"==typeof o){let t=i[e].locale||"default";s[t]=s[t]||{},s[t][o]=i.results}this.parent.event.emit(`helpdesk:${t}:${e}ed`,i)}ge(t,e){let s="";return"string"==typeof t&&t&&(s+=t,"string"==typeof e&&(s+=`/${e||"*"}`)),s}}class Pr{constructor(t){this.parent=t}fired(t,e){let s={identifier:t,name:e};this.parent.socket.emit("trigger:fired",s),this.parent.event.emit("trigger:fired",s)}}class Tr{constructor(t){this.parent=t,this.h()}configure(t){this.Se=t.project,this.Ae=t.revision,this.Me=t.environment,this.Ce=t.useragent,this.Ee=t.page}report(t,e,s){if(!(this.Se&&this.Ae&&this.Me&&this.Ce&&this.Ee))throw new Error("Missing a configuration parameter. Did you call configure() before?");"object"==typeof s&&s instanceof Error&&(s={fileName:s.fileName,lineNumber:s.lineNumber,columnNumber:s.columnNumber,message:s.message,stack:s.stack});let i={project:this.Se,revision:this.Ae,environment:this.Me,useragent:this.Ce,page:this.Ee,level:t,namespace:e,traceback:s};this.parent.socket.emit("issue:report",i),this.parent.event.emit("issue:report",i)}h(){this.Se=null,this.Ae=null,this.Me=null,this.Ce=null,this.Ee=null}}const Lr=/^((?:https?|wss?):\/\/[^/]+)(\/.*)?$/;const Mr=new class{constructor(){this.socket=null,this.stream=null,this.cookie=null,this.sha256=null,this.event=null,this.Storage=new mr(this),this.Schedule=new dr(this),this.Listener=new Dr(this),this.Config=new hr(this),this.Register=new cr(this)}init(t){this.De(),this.je(t),this.Re(t),this.Socket=new fr(this),this.Stream=new pr(this),this.Browsing=new wr(this),this.Call=new yr(this),this.Message=new Cr(this),this.Session=new jr(this),this.Website=new Ir(this),this.Bucket=new Sr(this),this.Media=new Rr(this),this.Overlay=new Or(this),this.Helpdesk=new zr(this),this.Trigger=new Pr(this),this.Issue=new Tr(this),this.Storage.init(),this.u(),!0===t.connectSocket&&this.socket.connect()}De(){this.h(),this.$e()}h(){delete this.environment,delete this.urlGo,delete this.websiteDomain,delete this.websiteId,delete this.tokenId,delete this.cookieExpire,delete this.cookieDomain,delete this.platformName,delete this.platformSignatureKey,delete this.ticketGenerator,delete this.sessionChildren,delete this.runtimeConfiguration,delete this.device,delete this.ioRelayClient,delete this.ioRelayStream,delete this.ioRelayRescueClient,this.Oe=!1,this.qe=!1}je(t){(null==t?void 0:t.environment)&&(this.environment=t.environment||"development"),(null==t?void 0:t.urlGo)&&(this.urlGo=t.urlGo),(null==t?void 0:t.websiteDomain)&&(this.websiteDomain=t.websiteDomain),(null==t?void 0:t.websiteId)&&(this.websiteId=t.websiteId),(null==t?void 0:t.tokenId)&&(this.tokenId=t.tokenId),(null==t?void 0:t.cookieExpire)&&(this.cookieExpire=t.cookieExpire),(null==t?void 0:t.cookieDomain)&&(this.cookieDomain=t.cookieDomain),(null==t?void 0:t.platformName)&&(this.platformName=t.platformName),(null==t?void 0:t.platformSignatureKey)&&(this.platformSignatureKey=t.platformSignatureKey),(null==t?void 0:t.sessionChildren)&&(this.sessionChildren=t.sessionChildren),(null==t?void 0:t.ticketGenerator)&&(this.ticketGenerator=t.ticketGenerator),(null==t?void 0:t.runtimeConfiguration)&&(this.runtimeConfiguration=t.runtimeConfiguration),this.device={},(null==t?void 0:t.useragent)&&(this.device.useragent=t.useragent),(null==t?void 0:t.timezone)&&(this.device.timezone=t.timezone),(null==t?void 0:t.capabilities)&&(this.device.capabilities=t.capabilities),(null==t?void 0:t.locales)&&(this.device.locales=t.locales)}Re(t){let e=["websocket"];var s;this.ioRelayClient=this.xe(t.urlRelayClient),this.ioRelayStream=this.xe(t.urlRelayStream),this.ioRelayRescueClient=this.xe(t.urlRelayRescueClient),this.event={all:s=s||new Map,on:function(t,e){var i=s.get(t);i?i.push(e):s.set(t,[e])},off:function(t,e){var i=s.get(t);i&&(e?i.splice(i.indexOf(e)>>>0,1):s.set(t,[]))},emit:function(t,e){var i=s.get(t);i&&i.slice().map(function(t){t(e)}),(i=s.get("*"))&&i.slice().map(function(s){s(t,e)})}},this.socket=Gn(this.ioRelayClient.url,{path:this.ioRelayClient.path,transports:e,autoConnect:!1,timeout:25e3,reconnectionDelay:15e3,reconnectionDelayMax:6e4,reconnectionAttempts:5,randomizationFactor:.5}),this.stream=Gn(this.ioRelayStream.url,{path:this.ioRelayStream.path,transports:e,reconnection:!1,autoConnect:!1}),this.cookie=ar,this.sha256=rr}u(){this.Ie(),this.Listener.addEventListener("window","pagehide",()=>{this.Oe=this.socket.connected||!1,this.qe=this.stream.connected||!1,!0===this.socket.connected&&this.socket.disconnect(),!0===this.stream.connected&&this.stream.disconnect()}),this.Listener.addEventListener("window","pageshow",()=>{!0===this.Oe&&(this.Oe=!1,this.socket.connect()),!0===this.qe&&(this.qe=!1,this.stream.connect())}),this.Listener.addEventListener("window","crisp-pushstate",()=>{this.Te()}),this.Listener.addEventListener("window","crisp-replacestate",()=>{this.Te()})}xe(t=""){const e=(t||"").match(Lr)||[];return{url:e[1]||null,path:e[2]||"/"}}Ie(){if("object"!=typeof window.history)return;if("function"!=typeof window.history.pushState)return;if("function"!=typeof window.history.replaceState)return;let t=window.history;this.Ne=t.pushState,t.pushState=Xi(function(...e){let s=this.Ne.apply(t,e);return window.dispatchEvent(new Event("crisp-pushstate")),s},this),this.Pe=t.replaceState,t.replaceState=Xi(function(...e){let s=this.Pe.apply(t,e);return window.dispatchEvent(new Event("crisp-replacestate")),s},this)}$e(){this.Ne&&(window.history.pushState=this.Ne),this.Pe&&(window.history.replaceState=this.Pe)}Te(){this.Session._sendDevice(),this.event.emit("window:history",{page_url:document.location.href,page_domain:document.location.hostname})}},qr=["button","alert"],Ur={firstElement:null,lastElement:null,stack:[]};const Vr=new class extends Ze{constructor(){super()}reset(){Ur.firstElement=null,Ur.lastElement=null,Ur.stack=[]}init(t){let e=this;t.directive("crispAccessibility",{beforeMount:(t,s)=>e.mount(t,s),updated:(t,s)=>e.update(t,s),beforeUnmount:t=>e.unbind(t)})}bindPetiteVue(t){let e=t.el,s={value:{role:t.get().role,isFirst:t.get().isFirst,isLast:t.get().isLast}};return this.mount(e,s)}mount(t,e){var s,i,n,r;!0!==(null==(s=null==e?void 0:e.value)?void 0:s.disabled)?(t.$cac={},t.$cac.role=null==(i=null==e?void 0:e.value)?void 0:i.role,t.$cac.isFirst=null==(n=null==e?void 0:e.value)?void 0:n.isFirst,t.$cac.isLast=null==(r=null==e?void 0:e.value)?void 0:r.isLast,t.$cac.fnOnKeydown=e=>{this.lr(t,e)},t.removeEventListener("keydown",t.$cac.fnOnKeydown),t.addEventListener("keydown",t.$cac.fnOnKeydown),t.setAttribute("tabindex",0),t.$cac.role&&t.setAttribute("role",t.$cac.role),!0===t.$cac.isFirst&&null===Ur.firstElement&&(Ur.firstElement=t),!0===t.$cac.isLast&&null===Ur.lastElement&&(Ur.lastElement=t),Ur.stack.push(t)):this.ur(t)}update(t,e){!0===Ur.stack.includes(t)&&this.mount(t,e)}unbind(t){this.ur(t)}ur(t){Object.keys(t.$cac||{}).length>0&&t.removeEventListener("keydown",t.$cac.fnOnKeydown);let e=Ur.stack.indexOf(t);e>-1&&Ur.stack.splice(e,1),t.$cac={}}lr(t,e){var s;switch(e.keyCode){case 13:case 32:(null==(s=e.target)?void 0:s.role)&&qr.includes(e.target.role)&&(e.stopImmediatePropagation(),e.preventDefault(),e.target.click());break;case 9:if(null!==Ur.lastElement&&null!==Ur.firstElement&&Ur.lastElement===t){"hidden"!==window.getComputedStyle(Ur.firstElement).visibility&&(e.stopImmediatePropagation(),e.preventDefault(),Ur.firstElement.focus())}}}};const Nr=new class{formatText(t,e={}){return Ti.parse().format("string"==typeof t?t:"",e)}generateAvatarUrl(t,e,s,i=null){return Zi.url.call(Zi,t,e,s,i)}translateText(t,e,s=[]){return Yi.text.call(Yi,t,e,s)}parseFirstName(t){return Ti.name().parse_first_name("string"==typeof t?t:"")}imageUrlOriginal(t){return vl.filterImageUrlOriginal(t)}imageUrlResize(t,e=null,s=null){return vl.filterImageUrlResize(t,null!==e?e:600,null!==s?s:600)}};const Hr=new class{dom(t){let e=document.createElement("div");return e.innerHTML=t,e.firstChild}vue(t){let e={};return e._f=Nr.formatText,e._n=Nr.parseFirstName,e._e=Nr.translateText,e._a=Nr.generateAvatarUrl,e.imageUrlResize=Nr.imageUrlResize,e.imageUrlOriginal=Nr.imageUrlOriginal,Ei({reactive:me,effect:vt,stop:wt,remove:h},{$store:cl,$render:e}).directive("crisp-accessibility",function(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}(Vr.bindPetiteVue,Vr)).mount(t)}},Wr=Ve.THEME.DEFAULT_COLOR,Jr=Ve.THEME.AVAILABLE_COLORS,Gr=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})$/i,Kr=/_/g;const Yr=new class{applyTheme(t,e=!1){let s=document.querySelector(".crisp-client"),i=this.ar(t,e);for(let n in i)s.style.setProperty(`--crisp-color-theme-${n}`,i[n].rgb)}applyContainerIndex(t){let e=document.querySelector(".crisp-client");t&&e.style.setProperty("--crisp-customization-container-index",t.toString())}applyPosition(t){let e=document.querySelector(".crisp-client"),s=this.hr(t);for(let i in s){let t=i.replace(Kr,"-");e.style.setProperty(`--crisp-customization-${t}`,`${s[i]}px`)}}ar(t,e=!1){let s,i,n={};s=!0!==e?Gi.getCustomization("color","chatbox"):{},i=Jr[t]||Jr[Wr],this.cr(s,i);for(let r in s)n[r]={hex:s[r],rgb:this.dr(s[r])};return n}hr(t){let e=Gi.getCustomization("position","chatbox");for(let s in t)e[s]=t[s];return e}cr(t,e){for(let s in e)t[s]||(t[s]=e[s])}dr(t){let e=[0,0,0],s=t.match(Gr);return s&&(e[0]=parseInt(s[1],16),e[1]=parseInt(s[2],16),e[2]=parseInt(s[3],16)),`${e[0]}, ${e[1]}, ${e[2]}`}};function Zr(){return(new Date).getTime()}const Xr=/^(?:https?:[/]*)?([^/]+)(?:\/.*)?$/i,Qr={updateWebsite(t,e){var s;if(Ve.TEST){let s=to.Dr(t,e);t=s.configuration,e=s.session}to.online=!1,(t=t||{}).settings=t.settings||{};let i={website:{name:t.website||"",domain:vl.extract(Xr,t.domain,Ko.website.domain,1),mailer:t.mailer||"",buster:e.buster||1,count_operators:e.count_operators||0,active_operators:e.active_operators||t.operators||[],response_metrics:e.response_metrics||{},last_available:e.last_available||Zr(),status:e.status||null,trial:t.trial||!1,online:t.online||!1},channels:t.channels||{},overlay:t.overlay||{},plugins:t.plugins||{},chat:{country:vl.getOrFallback(null==(s=e.context)?void 0:s.country,null),locale:Yi.detect(t.settings.locale?[t.settings.locale]:[]),color_theme:vl.getOrFallback(t.settings.color_theme,"default"),color_mode:vl.getOrFallback(t.settings.color_mode,"light"),layout_theme:vl.getOrFallback(t.settings.layout_theme,"colorized"),allowed_pages:vl.getOrFallback(t.settings.allowed_pages,[]),blocked_pages:vl.getOrFallback(t.settings.blocked_pages,[]),blocked_locales:vl.getOrFallback(t.settings.blocked_locales,[]),tile:vl.getOrFallback(t.settings.tile,"default"),website_logo:vl.getOrFallback(t.settings.website_logo,!1,"boolean"),last_operator_face:vl.getOrFallback(t.settings.last_operator_face,!1,"boolean"),ongoing_operator_face:vl.getOrFallback(t.settings.ongoing_operator_face,!1,"boolean"),activity_metrics:vl.getOrFallback(t.settings.activity_metrics,!0,"boolean"),operator_privacy:vl.getOrFallback(t.settings.operator_privacy,!1,"boolean"),visitor_privacy:vl.getOrFallback(t.settings.visitor_privacy,!1,"boolean"),availability_tooltip:vl.getOrFallback(t.settings.availability_tooltip,!0,"boolean"),hide_vacation:vl.getOrFallback(t.settings.hide_vacation,!1,"boolean"),hide_on_away:vl.getOrFallback(t.settings.hide_on_away,!1,"boolean"),hide_on_mobile:vl.getOrFallback(t.settings.hide_on_mobile,!1,"boolean"),position_reverse:vl.getOrFallback(t.settings.position_reverse,!1,"boolean"),email_visitors:vl.getOrFallback(t.settings.email_visitors,!0,"boolean"),phone_visitors:vl.getOrFallback(t.settings.phone_visitors,!0,"boolean"),force_identify:vl.getOrFallback(t.settings.force_identify,!1,"boolean"),ignore_privacy:vl.getOrFallback(t.settings.ignore_privacy,!1,"boolean"),visitor_compose:vl.getOrFallback(t.settings.visitor_compose,!0,"boolean"),file_transfer:vl.getOrFallback(t.settings.file_transfer,!0,"boolean"),audio_record:vl.getOrFallback(t.settings.audio_record,!0,"boolean"),overlay_search:null!==t.overlay?vl.getOrFallback(t.settings.overlay_search,!1,"boolean"):null,overlay_mode:vl.getOrFallback(t.settings.overlay_mode,!1,"boolean"),helpdesk_link:vl.getOrFallback(t.settings.helpdesk_link,!0,"boolean"),helpdesk_only:vl.getOrFallback(t.settings.helpdesk_only,!1,"boolean"),helpdesk_navigate:vl.getOrFallback(t.settings.helpdesk_navigate,"frequent"),status_health_dead:vl.getOrFallback(t.settings.status_health_dead,!0,"boolean"),wait_game:vl.getOrFallback(t.settings.wait_game,!1,"boolean"),conversations:vl.getOrFallback(t.settings.conversations,!0,"boolean"),theme_text:vl.getOrFallback(t.settings.text_theme,"default"),theme_welcome:vl.getOrFallback(t.settings.welcome_message,"default")}};vl.merge(to,i)},updatePluginSettings(t,e){t&&"string"==typeof t&&e&&"object"==typeof e&&(to.plugins||(to.plugins={}),to.plugins[t]||(to.plugins[t]={settings:{}}),to.plugins[t].settings||(to.plugins[t].settings={}),vl.merge(to.plugins[t].settings,e),to.plugins={...to.plugins},to.pr(e))},updatePluginSettingsValue(t,e,s){t&&"string"==typeof t&&e&&"string"==typeof e&&(to.plugins||(to.plugins={}),to.plugins[t]||(to.plugins[t]={settings:{}}),to.plugins[t].settings||(to.plugins[t].settings={}),vl.setDeep(to.plugins[t].settings,e,s),to.plugins={...to.plugins},to._r(e))},pr(t){var e,s,i;(null==(e=t.color)?void 0:e.chatbox)&&Yr.applyTheme((null==(s=to.chat)?void 0:s.color_theme)||"default"),(null==(i=t.position)?void 0:i.chatbox)&&Yr.applyPosition({})},_r(t){var e;t.startsWith("color.chatbox")&&Yr.applyTheme((null==(e=to.chat)?void 0:e.color_theme)||"default"),t.startsWith("position.chatbox")&&Yr.applyPosition({})},Dr:(t,e)=>(window.$mock_website&&(delete t.plugins,vl.merge(t,window.$mock_website)),window.$mock_overlay&&vl.merge(t,window.$mock_overlay),window.$mock_helpdesk&&vl.merge(t,window.$mock_helpdesk),window.$mock_session&&(vl.merge(e,window.$mock_session),e.active_operators=window.$mock_session.active_operators,e.active_operators[0].timestamp=e.last_available),{configuration:t,session:e})},to=Qe({website:{name:"",domain:"",mailer:"",buster:1,count_operators:0,active_operators:[],response_metrics:{},last_available:Zr(),status:null,trial:!1,online:!1},channels:{},overlay:{},plugins:{},chat:{country:null,locale:"",color_theme:"default",color_mode:"light",layout_theme:"colorized",allowed_pages:[],blocked_pages:[],blocked_locales:[],tile:"default",website_logo:!1,last_operator_face:!1,ongoing_operator_face:!0,activity_metrics:!0,operator_privacy:!1,visitor_privacy:!1,availability_tooltip:!0,hide_vacation:!1,hide_on_away:!1,hide_on_mobile:!1,position_reverse:!1,email_visitors:!0,phone_visitors:!0,force_identify:!1,ignore_privacy:!1,visitor_compose:!0,file_transfer:!0,audio_record:!0,overlay_search:!1,overlay_mode:!1,helpdesk_link:!0,helpdesk_only:!1,helpdesk_navigate:"frequent",status_health_dead:!0,wait_game:!1,conversations:!0,theme_text:"default",theme_welcome:"default"}},Qr);to.show_branding=ze(()=>{var t;return!(null==to?void 0:to.plugins["urn:crisp.im:debranding:0"])||!0===(null==(t=to.website)?void 0:t.trial)});const eo=["Khtml","Ms","O","Moz","Webkit"],so={macos:/^Mac/,windows:/^Win/,linux:/^Linux/,ios:/^(?:iPhone|iPod|iPad)$/,android:/^Android$/},io=/^[a-z]/,no=/no/,ro={mr(){let t=null,e=document.createElement("audio"),s=Boolean(e.canPlayType&&e.canPlayType('audio/ogg; codecs="vorbis"').replace(no,"")),i=Boolean(e.canPlayType&&e.canPlayType('audio/mp4; codecs="mp4a.40.2"').replace(no,"")),n=Boolean(e.canPlayType&&e.canPlayType("audio/mpeg;").replace(no,""));!0===s?t="oga":!0===i?t="m4a":!0===n&&(t="mp3"),null!==t&&(oo.html_audio_format=t,oo.has_html_audio=!0)},gr(){let t=null,e=window.navigator.platform||null;if(null!==e)for(let s in so){if(!0===so[s].test(e)){t=s;break}}null!==t&&(oo.operating_system=t)},Fr(){oo.has_audio_recording=!1,window.MediaRecorder&&window.File&&navigator.mediaDevices&&"function"==typeof window.MediaRecorder.isTypeSupported&&"function"==typeof navigator.mediaDevices.enumerateDevices&&navigator.mediaDevices.enumerateDevices().then(t=>{for(let e=0;e<((null==t?void 0:t.length)||0);e++)if("audioinput"===t[e].kind){oo.has_audio_recording=!0;break}Ko.features.audio_recording=oo.has_audio_recording}).catch(()=>{})},vr(){oo.has_screen_touch=oo.wr("ontouchstart")||navigator.maxTouchPoints>0;let t=()=>{oo.has_screen_touch=!0,window.removeEventListener("touchstart",t)};window.addEventListener("touchstart",t,!1)},br(){let t=(t=null)=>{oo.color_scheme_preference=!0===(null==t?void 0:t.matches)?"dark":"light"},e=window.matchMedia?window.matchMedia("(prefers-color-scheme: dark)"):null;null!==e&&(t(e),e.addEventListener("change",t))},wr:t=>Boolean(t in window),yr(t){let e=!1,s=document.documentElement.style,i=eo.length;if(t in s)e=!0;else for(t=t.replace(io,t=>t.toUpperCase());i--;)if(eo[i]+t in s){e=!0;break}return e}},oo=me(Object.assign(ro,{has_css_animations:!1,has_audio_recording:!1,has_html_audio:!1,has_screen_touch:!1,operating_system:null,html_audio_format:"mp3",color_scheme_preference:"light"}));oo.has_css_animations=oo.yr("animation")&&!0!==Ve.TEST,oo.Fr(),oo.vr(),oo.gr(),oo.mr(),oo.br();const lo="overlay";let uo=null;const ao=Qe({is_opened:!1,is_loading:!1,sidebar:{expanded:!0,scrolled:!1},main:{scrolled:!1},browse_recent:[],prompt:{query:"",asked:!1,thinking:!1},results:{query:"",answer:[],sources:[],expanded:0,empty:!1,error:!1}},{open:(t=null)=>!0===to.chat.overlay_search&&(!0!==ao.is_loading&&(ao.is_loading=!0,ao.sidebar.expanded="0"!==Mr.Storage.getStampLocal(lo,[Ko.website.id,"sidebar","retract"])&&!0,ao.browse_recent=ao.Er()||[],Ji(()=>import("./features/overlay_default_439a0bf.js"),__vite__mapDeps([0,1])).then(e=>{uo=e.default(".cc-jcxto"),ao.focusOnPromptField(),ao.is_opened=!0,ao.is_loading=!1,"function"==typeof t&&t()})),!0),close(){let t=!1;return!0===ao.is_opened&&(ao.is_loading=!1,uo.unmount(),uo=null,!0===e().Chat._isInitialized&&Vi.focusOnForeground(),ao.is_opened=!1,t=!0),t},expandSidebar(t=!1){ao.sidebar.expanded=t,Mr.Storage.setStampLocal(lo,[Ko.website.id,"sidebar","retract"],!0===t?"1":"0")},updatePromptField(t){ao.prompt.query!==t&&!0!==ao.prompt.thinking&&(ao.prompt.query=t,ao.proceedSearch())},focusOnPromptField(t=!1){Ko.has_autofocus&&vl.setTimeout(()=>{let t=document.querySelector(".cc-nbz21");t&&t.focus()},!0===t?0:250)},proceedSearch(){if(!0!==ao.prompt.thinking){let t=(ao.prompt.query||"").trim(),e=Mr.socket.connected;ao.prompt.thinking=t.length>0,ao.results.query=t,ao.results.answer=[],ao.results.sources=[],ao.results.expanded=0,ao.results.empty=!1,ao.results.error=!1,t?(ao.prompt.asked=!0,!0===e?Mr.Overlay.getOverlayAnswerSearch(t,Li.code):ao.handleSearchSources(null,!0)):ao.prompt.asked=!1}},handleSearchChunk(t){ao.results.answer.push(t)},handleSearchAnswer(t=null,e=null){if(t?ao.results.answer=[t]:""===t?(ao.results.answer=[Yi.text("search","results_answer_quickie_empty")],ao.results.empty=!0):(ao.results.answer=[],ao.results.error=!0),ao.prompt.thinking=!1,null!==e){let t=ao.browse_recent;t.includes(e)||(t.unshift(e),t.length>5&&t.splice(5),ao.Cr(t))}ao.focusOnPromptField()},handleSearchSources(t=null,e=!1){ao.results.sources=t||[],!0===e&&(null===t&&(ao.results.error=!0),ao.prompt.thinking=!1)},reset(){ao.Cr([])},Er(){if("function"==typeof(null==JSON?void 0:JSON.parse)){let t=Mr.Storage.getStampLocal(lo,[Ko.website.id,"browse","recent"])||null;if(null!==t)return JSON.parse(t)}return null},Cr(t=[]){"function"==typeof(null==JSON?void 0:JSON.stringify)&&Mr.Storage.setStampLocal(lo,[Ko.website.id,"browse","recent"],JSON.stringify(t))}});ao.has_contact=ze(()=>!Ko.is_invisible),ao.branding_link=ze(()=>`${Ve.URL_WEBSITE}/${Li.web}/livechat/?ref=overlay&domain=${Ko.website.domain}&name=${encodeURIComponent(to.website.name)}`),ao.browse_frequent=ze(()=>{var t,e;let s=to.overlay,i=Li.code;return(null==(t=s.search)?void 0:t[i])||(null==(e=s.search)?void 0:e.default)||[]});const ho="minimized",co=Qe({paneOpenHandler:function(t){},pane:{is_ongoing:!1,is_waiting:!1,is_offline:!1,animate_entrance:!1,general_entice:{visible:!1,is_concealed:!1,animate_full:!1,animate_short:!1},helpdesk:{url:null,only:!1}},tooltips:{new_messages:{visible:!1,animate:!0}}},{checkIsConcealed(){var t;!0===(null==(t=to.chat)?void 0:t.availability_tooltip)&&(co.pane.general_entice.is_concealed="1"===Mr.Storage.getStampLocal(ho,[Ko.website.id,"general_entice","conceal"])&&!0)},checkHelpdesk(){var t,e,s,i;!0===(null==(t=to.chat)?void 0:t.helpdesk_link)&&(null==(e=to.channels)?void 0:e.helpdesk)&&Ko.page_domain!==(null==(s=to.channels)?void 0:s.helpdesk)&&!0===Mr.socket.connected&&(co.pane.helpdesk.url=Oo.generateChannelLink("helpdesk"),co.pane.helpdesk.only=(null==(i=to.chat)?void 0:i.helpdesk_only)&&!0)},concealGeneralEntice(){co.pane.general_entice.is_concealed=!0,Mr.Storage.setStampLocal(ho,[Ko.website.id,"general_entice","conceal"],"1")},spawnPane(t,s=!0,i=!1,n=!0){let r=Hr.dom(t);if(e().Base._containerEl.innerHTML="",e().Base._containerEl.appendChild(r),Hr.vue(r),!0===s){let t=to,e=!0!==Ko.is_full_view&&!0===t.chat.availability_tooltip;!0===n&&oo.has_css_animations?(!0===i&&(co.pane.animate_entrance=!0,vl.setTimeout(()=>{co.pane.animate_entrance=!1},1e3)),e&&vl.setTimeout(()=>{let t=co.pane;co.pane.general_entice.visible=!0;let e=!0===i?"animate_full":"animate_short";t.general_entice[e]=!0,vl.setTimeout(()=>{t.general_entice[e]=!1},500)},1e3*(!0===i?2:.25))):e&&(co.pane.general_entice.visible=!0)}},onPaneClick(t){let s=t.target;if(s){let t="cc-1961w",i=s.getAttribute("data-pop");if(!i){let t=s.closest("[data-pop]");t&&(i=t.getAttribute("data-pop")||null)}if(!0===(null==s?void 0:s.classList.contains(t)))co.concealGeneralEntice();else switch(i){case"overlay:open":co.paneOpenHandler(()=>{ao.open()});break;case"helpdesk:search":e().Action.do_helpdesk_search();break;case"minimized:open":co.paneOpenHandler(t=>{e().Chat.init(t)})}}},paneAuthorized(t=!1,s=!1,i=!0){let n=!1,r=!1;co.checkIsConcealed(),co.checkHelpdesk(),co.spawnPane('<div class="cc-1kr6o cc-cxjxh cc-s0g61 cc-jx6a3"><div class="cc-18ov6" :aria-label="$store.chat.is_opened ? $render._e(\'minimized\', \'tooltip_button_close_hint\') : $render._e(\'minimized\', \'tooltip_button_open_hint\')" @click.prevent.stop="$store.minimized.onPaneClick" :data-pane-animate-entrance="$store.minimized.pane?.animate_entrance" :data-pop="$store.website?.chat?.overlay_search &amp;&amp; $store.website?.chat?.overlay_mode ? \'overlay:open\' : ($store.minimized.pane?.helpdesk?.only ? \'helpdesk:search\' : \'minimized:open\')" data-maximized="false" data-is-failure="false" role="button" tabindex="0"><span class="cc-1442g"><span class="cc-17cli" v-if="$store.minimized.pane?.general_entice?.visible" :class="{ \'cc-1w9i4\': $store.minimized.pane?.general_entice?.animate_full, \'cc-1y6jn\': $store.minimized.pane?.general_entice?.animate_short }" :data-with-helpdesk="$store.minimized.pane?.helpdesk?.url !== null" :data-is-concealed="$store.minimized.pane?.general_entice?.is_concealed" data-id="general_entice"><span class="cc-1jn3x"><span class="cc-1b9px cc-1plpv"><span class="cc-1kwhw" aria-live="polite" role="dialog"><span class="cc-4me5j"><span class="cc-1961w cc-tl9oa" v-crisp-accessibility="{ role: \'button\' }" :aria-label="$render._e(\'minimized\', \'tooltip_button_close_hint\')"></span><span class="cc-ntqer"><span class="cc-s473h"><span class="cc-1r4k9 cc-vqf16" v-if="($store.website?.chat?.overlay_search &amp;&amp; $store.website?.chat?.overlay_mode) || $store.minimized.pane?.helpdesk?.only">{{ $render._e("minimized", "tooltip_entice_title_search") }}</span><span class="cc-1r4k9 cc-vqf16" v-else>{{ $render._e("theme_text", "default_chat", [$store.website?.chat?.theme_text + "_chat"]) }}</span><span class="cc-97g0x"><span class="cc-sxrt5" v-for="active_avatar in $store.base.active_operators"><span class="cc-1hhcz cc-1egul"><span class="cc-1gtge cc-1e566" :style="{ backgroundImage: (\'url(\' + $render._a(60, active_avatar.type, active_avatar.identifier, active_avatar.avatar) + \') !important\') }"></span></span></span></span></span><span class="cc-p4ctk" v-if="$store.availability?.availability === \'online\'" data-id="online">{{ $render._e("minimized", "tooltip_entice_status_online") }}</span><span class="cc-p4ctk" v-else data-id="away">{{ $render._e("minimized", "tooltip_entice_status_away") }}</span></span></span></span><span class="cc-1p31n"><div class="cc-4ukzq cc-16kzz cc-fx907" v-if="!($store.website?.chat?.overlay_search &amp;&amp; $store.website?.chat?.overlay_mode) &amp;&amp; !$store.minimized.pane?.helpdesk?.only" v-crisp-accessibility="{ role: \'button\' }" :data-partial-pending="$store.partial.bundle.pending.chat" :aria-label="$render._e(\'minimized\', \'tooltip_entice_action_chat\', [$store.website?.website?.name])" data-type="chat"><span class="cc-vngk3"></span><span class="cc-1b6pi cc-vqf16">{{ $render._e("minimized", "tooltip_entice_action_chat", [$store.website?.website?.name]) }}</span></div><div class="cc-4ukzq cc-16kzz" v-if="$store.website?.chat?.overlay_search || ($store.minimized.pane?.helpdesk?.url &amp;&amp; !$store.minimized.pane?.is_offline)" :data-pop="$store.website?.chat?.overlay_search &amp;&amp; (!$store.minimized.pane?.helpdesk?.only || $store.website?.chat?.overlay_mode) ? \'overlay:open\' : \'helpdesk:search\'" v-crisp-accessibility="{ role: \'button\' }" :data-partial-pending="$store.website?.chat?.overlay_search &amp;&amp; (!$store.minimized.pane?.helpdesk?.only || $store.website?.chat?.overlay_mode) ? $store.partial?.bundle?.pending?.overlay : $store.partial?.bundle?.pending?.chat" :aria-label="$render._e(\'minimized\', \'tooltip_entice_action_search\')" data-type="search"><span class="cc-vngk3"></span><span class="cc-1b6pi cc-vqf16">{{ $render._e("minimized", "tooltip_entice_action_search") }}</span></div></span></span></span></span></span><span class="cc-1qbp0" data-is-ongoing="false"><span class="cc-otlyh" :data-prefer-search="$store.website?.chat?.overlay_search &amp;&amp; $store.website?.chat?.overlay_mode" data-id="chat_closed"><span class="cc-xrw89" v-if="$store.minimized.pane?.is_waiting"><span class="cc-16p6v cc-975hf"></span></span><span class="cc-11f3x cc-16kzz" v-else :data-partial-pending="$store.website?.chat?.overlay_search &amp;&amp; $store.website?.chat?.overlay_mode ? $store.partial?.bundle?.pending?.overlay : $store.partial?.bundle?.pending?.chat"><span class="cc-fajze cc-1egul" v-if="$store.website?.chat?.website_logo"><span class="cc-1p2bq cc-1e566" :style="{ backgroundImage: (\'url(\' + $render._a(120, \'website\', $store.base.website?.id) + \') !important\') }"></span></span><span class="cc-fajze cc-1egul" v-else-if="$store.website?.chat?.last_operator_face &amp;&amp; $store.base.active_operators?.length &gt; 0"><span class="cc-1p2bq cc-1e566" :style="{ backgroundImage: (\'url(\' + $render._a(120, $store.base.active_operators[0]?.type, $store.base.active_operators[0]?.identifier, $store.base.active_operators[0]?.avatar) + \') !important\') }"></span></span></span></span></span></div></div>',!0,t,i),co.paneOpenHandler=t=>{if(!1===n)if(n=!0,!1===s&&!0!==r){co.pane.is_waiting=!0,e().Event.triggerInteracted(!0);let s=vl.setTimeout(()=>{var t;Ko.session_id&&(alert(Yi.text("chat","minimized_connect_alert_failure")),null==(t=Mr.socket)||t.disconnect(),co.pane.is_waiting=!1,e().Action.do_chat_hide())},12e3);e().Broker._fnInitialize.master=e=>{vl.clearTimeout(s),t(e),n=!1},Mr.socket.connect(),r=!0}else t(),n=!1,r=!0},Ci.apply()},paneUnauthorized(t=!1,e=!0){co.spawnPane('<div class="cc-1kr6o cc-cxjxh cc-s0g61 cc-jx6a3"><div class="cc-18ov6" :aria-label="$store.chat.is_opened ? $render._e(\'minimized\', \'tooltip_button_close_hint\') : $render._e(\'minimized\', \'tooltip_button_open_hint\')" @click.prevent.stop="$store.minimized.onPaneClick" :data-pane-animate-entrance="$store.minimized.pane?.animate_entrance" :data-pop="$store.website?.chat?.overlay_search &amp;&amp; $store.website?.chat?.overlay_mode ? \'overlay:open\' : ($store.minimized.pane?.helpdesk?.only ? \'helpdesk:search\' : \'minimized:open\')" data-maximized="false" data-is-failure="true" role="button" tabindex="0"><span class="cc-1442g"><span class="cc-17cli" data-id="failure_notice"><span class="cc-1jn3x"><span class="cc-1b9px"><span class="cc-17f3j cc-vqf16">{{ $render._e("minimized", "unauthorized_pane") }}</span></span></span></span></span><span class="cc-1qbp0 cc-2eonl" data-is-ongoing="false"><span class="cc-otlyh" data-id="in_failure" data-prefer-search="false"><span class="cc-11f3x"></span></span></span></div></div>',!1,t,e),co.paneOpenHandler=()=>{}}});const Do=Qe({},{states:(t=null)=>xo.session(t).alert||{},update(t,e,s=null){let i,n,r,o,l=Do.states(s);"object"==typeof t?i=t:(i={},i[t]=e);let u=vl.clone(l);for(n in i)i.hasOwnProperty(n)&&(r=i[n],o=!1,void 0!==l[n]&&l[n]===r&&(o=!0),"lock"===l[n]&&"unlock"!==r&&(o=!0),!1===o&&(u[n]=r));xo.propagate("alert",u,s)},hook(t,e,s=null){let i=Do.hookMethods[e];"function"==typeof i&&function(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}(i,this)(t,s)},kr(t,e=null){Do.$r(t,e)},Ar(t,e=null){Do.$r(t,e)},$r(t,e=null){"show"===t?Go.checkFormIdentifyLock(e):Go.checkFormIdentifyUnlock(e)}});Do.hookMethods={warn_reply:Do.kr,email_invalid:Do.Ar};const fo=Qe({type:"smiley",is_visible:!1,has_animation:!1,last_search_query:null,selection:{},smiley:{input:""},gif:{results:[],input:""}},{toggle(){fo.last_search_query=null,fo.is_visible=!fo.is_visible,fo.has_animation=!0,fo.type="smiley"},show(t){fo.type!==t&&(fo.hide(),fo.is_visible=!0,fo.type=t,"gif"===t&&fo.loadDataGif())},hide(){fo.last_search_query=null,fo.is_visible=!1,fo.has_animation=!1,fo.smiley.input="",fo.gif.input=""},loadDataGif(t=""){if(fo.last_search_query!==t){fo.last_search_query=t,Mr.Media.getAnimationList(t,1,15),fo.gif.results=[];for(let t=0;t<15;t++)fo.gif.results.push({loading:!0})}},backupSelection(t){fo.selection={start:t.selectionStart,end:t.selectionEnd}}}),po={request(t){vo.update("feedback",void 0,t)},toggle(){_o.is_visible=!_o.is_visible,!0!==_o.is_visible?Vi.focusOnForeground():fo.hide()},hide(){_o.is_visible=!1},show(t=null){_o.session_id=t,_o.is_visible=!0},markAvailable(t=!1){_o.is_available=t}};Ve.TEST&&(window.$markFeedbackAvailable=()=>{_o.is_available=!0});const _o=Qe({is_visible:!1,is_available:!1,session_id:null,stars:{hovered:0,selected:0},comment:""},po),mo=Qe({is_visible:!1,is_pending:!1,last_error:null,session_id:null,method:"",identity:"",annotation:""},{request(t,e,s,i){"link"===e&&vo.update("authenticate",[e,s,i].join("/"),t)},submit:t=>!0!==mo.is_pending&&(mo.is_pending=!0,mo.last_error=null,Mr.Session.sendIdentityVerify(mo.method,{token:t,identity:mo.identity,recipient:mo.annotation},mo.session_id),!0),acknowledge(t,e,s,i,n=null){mo.method===e&&mo.identity===s&&mo.annotation===i&&(mo.is_pending=!1,mo.last_error=n,null===n&&vo.update("authenticate",!1,t))},hide(t=null){t===mo.session_id&&(mo.is_visible=!1)},show(t,e,s,i=null){mo.is_pending=!1,mo.last_error=null,mo.is_visible=!0,mo.session_id=i,mo.method=t,mo.identity=e,mo.annotation=s},showFromIntent(t,e=null){let[s,i,n]=t.split("/");s&&i&&n&&mo.show(s,i,n,e)}});const go=["identity","authenticate","game","feedback"],Fo={states:(t=null)=>xo.session(t).intent||{},update(t,e="default",s=null,i=!1){let n=vo.states(s);if(!0===go.includes(t)){if(!0===i||!1!==n[t]){let i=vl.clone(n);e||!1===e?i[t]=e:delete i[t],xo.propagate("intent",i,s)}}else Ke.error(`Unknown intent: ${t}`)},cleanup(t=null,e=null){let s=vo.states(e);for(let i=0;i<go.length;i++){let n=go[i];(t||s)[n]||vo.toggle(n,null,e)}},toggle(t,e="default",s=null,i=!0){if(!0===go.includes(t)){let n=vo.toggleMethods[t];"function"==typeof n&&function(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}(n,this)(e,s,i)}},Br(t="default",e=null,s=!0){t?"default"===t&&Go.showIdentity(s,e):Go.hideIdentity(e)},jr(t="default",e=null){t?mo.showFromIntent(t,e):mo.hide(e)},Ir(t="default",e=null,s=!0){t?Go.showGame(s,e):Go.hideGame(e)},Sr(t="default",e=null,s=!0){switch(t){case"default":Go.showFeedback(s,e);break;case"submitted":!0===s&&Go.showFeedbackSubmitted(s,e);break;default:Go.hideFeedback(e)}_o.markAvailable(!(!t||"submitted"===t))}};Ve.TEST&&(window.$triggerGame=()=>{vo.update("game")});const vo=Qe({},Fo);vo.toggleMethods={identity:vo.Br,authenticate:vo.jr,game:vo.Ir,feedback:vo.Sr},vo.current_identity=ze(()=>vo.states().identity||null);const wo=Qe({opened:!1,loaded:!1,target:"",title:""},{open(t,e="",s={}){s.website_id=Ko.website.id,s.session_id=Oo.effectiveSessionId();let i=vl.insertLinkQueryValues(t,s);!0===wo.opened&&wo.target!==i&&wo.close(),!1===wo.opened&&(wo.loaded=!1,wo.target=i,wo.title=e||"",wo.opened=!0)},close(){!0===wo.opened&&(wo.opened=!1,wo.target="",wo.title="",wo.loaded=!1)}}),bo=Qe({loaded:!1,visible:!1},{start(){bo.visible=!0,bo.loaded=!1},stop(){bo.visible=!1}});const yo=new class extends Ui{constructor(){super()}subscribe(t,e){super.subscribe(t,e)}unsubscribe(t,e){super.unsubscribe(t,e)}handleAutocomplete(t=[]){super.emit("handle-autocomplete",t)}},Eo=Qe({Rr:null,Or:null,activeSearchQuery:"",search:{input:"",url:"",entity:null,results:[],active:!1,initialized:!1,loading:!1},viewer:{url:"",loaded:!1},navigation:{current:{title:"",description:"",summary:"",filter:{categoryId:null,sectionId:null},origin:{method:null,arguments:[]}},previous:[]}},{isAvailable:()=>!!Oo.generateChannelLink("helpdesk"),proceedSearch(t=""){t!==Eo.activeSearchQuery&&(Eo.zr(),Eo.search.loading=!0,Eo.Or=vl.setTimeout(()=>{if(Eo.Or=null,Eo.activeSearchQuery=t,t){Eo.Pr(t);let e=t.substring(t.lastIndexOf(" ")+1).trim();e&&e.length>=2&&Mr.Helpdesk.getArticleSuggest(e,Li.code)}else Eo.Tr()},100))},showSearch(t=1){return Eo.Lr(s=>{Eo.Mr(null,()=>{"helpdesk"!==Oo.mode&&(Eo.search.input="",Eo.search.url=s,Eo.search.results=[],Eo.search.active=!1,Eo.search.loading=!1,Oo.mode="helpdesk"),Eo.search.initialized=!1,Eo.search.input?Eo.Pr(Eo.search.input):Eo.Tr(),e().Chat.Interface.requestDynamicSizingProperties()},{fn:"showSearch",args:arguments,direction:t})},!1)},showCategory(t,e,s,i=null,n=null,r=[],o=1){return Eo.Lr(()=>{Eo.Mr(s,s=>{s.filter.categoryId=e,s.description=i||"",s.summary=n||"",Eo.search.initialized=!1;let o=1!==r.length||r[0].section_id?null:"";null!==o?(s.filter.sectionId=o,Mr.Helpdesk.getArticleList(t,e,o)):Mr.Helpdesk.getCategoryList(t)},{fn:"showCategory",args:arguments,direction:o})})},showSection(t,e,s,i,n=null,r=null,o=1){return Eo.Lr(()=>{Eo.Mr(i,i=>{i.filter.categoryId=e,i.filter.sectionId=s,i.description=n||"",i.summary=r||"",Eo.search.initialized=!1,Mr.Helpdesk.getArticleList(t,e,s)},{fn:"showSection",args:arguments,direction:o})})},showArticle(t,s,i=null,n=null,r=null,o=1){return Eo.Lr(l=>{Eo.viewer.loaded=!1,Eo.Mr(i||Yi.text("chat","chat_helpdesk_viewer_article_reader"),i=>{i.summary="",i.description=r?Yi.text("chat","chat_helpdesk_viewer_updated",[new Date(r).toLocaleDateString()]):n||"",Eo.viewer.url=`${l}${t}/article/${s}/`,!1===Oo.is_expanded&&(Oo.was_auto_expanded.helpdesk_article=!0,e().Chat.Interface.requestDynamicSizingProperties())},{fn:"showArticle",args:arguments,direction:o})})},handleArticles(t=[],e={},s=!1){var i,n;"helpdesk"===Oo.mode&&(Ve.TEST&&(null==(n=null==(i=window.$mock_helpdesk)?void 0:i.search)?void 0:n.results)&&(t=window.$mock_helpdesk.search.results),Eo.qr("articles",t,s),null!==Eo.Rr&&vl.clearTimeout(Eo.Rr),e.query&&(Eo.Rr=vl.setTimeout(()=>{Eo.Rr=null;let s=(e.query||"").trim(),i=e.locale||null;t[0]&&t[0].locale&&(i=t[0].locale),i&&s&&Mr.Helpdesk.reportArticleSearch(i,s)},1e3)))},handleCategories(t=[]){"helpdesk"===Oo.mode&&(0===t.length?(to.chat.helpdesk_navigate="frequent",Eo.Tr()):Eo.qr("categories",t))},handleAutocomplete(t=[]){"helpdesk"===Oo.mode&&yo.handleAutocomplete(t)},Tr(){let t=to.chat.helpdesk_navigate;switch(t){case"deep":Mr.Helpdesk.getCategoryList(Li.code);break;case"frequent":e().Action.do_helpdesk_query("");break;default:throw new Error(`Unsupported helpdesk view mode: ${t}`)}},Pr(t){e().Action.do_helpdesk_query(t)},zr(){null!==Eo.Or&&(vl.clearTimeout(Eo.Or),Eo.Or=null),null!==Eo.Rr&&(vl.clearTimeout(Eo.Rr),Eo.Rr=null)},qr(t,e,s=!1){Eo.search.active=s,Eo.search.entity=t,Eo.search.results=e,Eo.search.initialized=!0,Eo.search.loading=!1},Lr(t,e=!0){let s=!1,i=Oo.generateChannelLink("helpdesk");return i&&(s=!0,!0===e&&"helpdesk"!==Oo.mode&&Eo.showSearch(),t(i)),s},Mr(t,e,{fn:s,args:i=[],direction:n=1}){let r=Eo.navigation.current;n>0&&(null===t?Eo.navigation.previous=[]:r.origin.method&&Eo.navigation.previous.push(vl.clone(r))),r.title=t||"",r.description="",r.summary="",r.filter.categoryId=null,r.filter.sectionId=null,Eo.viewer.url="",e(r),r.origin.method=s,r.origin.arguments=Array.from(i)}});function Co(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}Eo.settings_search=ze(()=>""!==to.website.domain&&to.chat.helpdesk_link&&to.channels.helpdesk),Eo.settings_only=ze(()=>Eo.settings_search&&to.chat.helpdesk_only);const ko=["intent"],$o=[["show","unlock"],["unlock","show"],["hide","lock"],["lock","hide"],["lock","show"]],Ao={defaultStates:()=>({conversation:"default",trigger:e().Trigger._processed,textarea:"",maximized:!0,expanded:!1,alert:{},intent:{},operator:{}}),session:(t=null)=>xo.Ur(t).session,receive(t,e=null,s=!1){let i,n=xo.Ur(e),r=[];for(let o in t)t.hasOwnProperty(o)&&(vl.isEqual(t[o],n.session[o])||(r.push(o),n.session[o]=t[o],!1===s&&void 0!==n.pending[o]&&delete n.pending[o]));for(let o=0;o<r.length;o++)i=r[o],Co(xo.register[i],this)(n.session[i],e)},propagate(t,e,s=null,i=!1,n=!1,r=null,o=null){let l=xo.Ur(s);if(!0!==i&&vl.isEqual(l.session[t],e))"function"==typeof r&&r(!1);else{l.pending[t]=e,null!==l.pendingTimeout&&(vl.clearTimeout(l.pendingTimeout),l.pendingTimeout=null);let i=vl.clone(l.session);i[t]=e,xo.receive(i,s,!0),l.pendingTimeout=vl.setTimeout(()=>{if(vl.isEmpty(l.pending))"function"==typeof r&&r(!1);else{let t=vl.clone(l.pending);l.pending={},l.pendingTimeout=null,Mr.Session.setState(t,s,t=>{t?"function"==typeof o&&o():"function"==typeof r&&r(!0)})}},!0===n?0:250)}},restore(t,e=null){var s;let i=xo.Ur(e);!0===Ko.is_full_view&&!0!==(null==(s=Ko.runtime)?void 0:s.lock_maximized)&&(t.maximized=!1);let n=xo.defaultStates();for(let r in n)void 0===t[r]&&(t[r]=n[r]);i.isRestored=!0,i.session=t,i.restoredState=vl.keys(t)},retrigger(t,e=null){let s=xo.defaultStates();xo.Vr(t,s[t],e)},initialize(t=null,e=ko){let s=xo.defaultStates();for(let i in s)s.hasOwnProperty(i)&&xo.Vr(i,s[i],t,e.includes(i))},Vr(t,e,s=null,i=!1){let n=xo.Ur(s);"function"==typeof xo.register[t]&&(void 0===n.session[t]&&(n.session[t]=e),Co(xo.register[t],this)(n.session[t],s,i))},Nr(t,e=null){let s=xo.Ur(e),i=!1,n=s.restoredState.indexOf(t);return-1!==n&&(s.restoredState.splice(n,1),i=!0),i},Hr(t,s=null,i=!1){if(!0===i)return;if(xo.Nr("conversation",s),s!==Ko.session_id)return;let n;n="default"===t?Ko.session_id:t||null;let r=Oo.conversations.all_session_ids;null!==n&&!1===r.includes(n)&&(n=null),Mr.Config.setCurrentSessionChildId(n),Oo.conversations.current_session_id=n,null!==n&&(Oo.mode="chat",e().Chat.Interface.applyChatFocus(),e().Chat.Interface.requestDynamicSizingProperties(),Vi.focusOnForeground(),Vi.scrollToLastMessage())},Wr(t,s=null,i=!1){if(!0!==i&&(xo.Nr("trigger",s),s===Ko.session_id&&(null==t?void 0:t.length)>0))for(let n=0;n<t.length;n++)e().Trigger.markProcessed(t[n])},Jr(t,e=null,s=!1){let i,n,r,o,l=xo.Ur(e);if(!0!==s){xo.Nr("alert",e);for(let s in t)if(t.hasOwnProperty(s)){if(i=t[s],n=l.session.alert[s],r=!1,n===i)r=!0;else if("unlock"!==i&&"lock"===n)r=!0;else for(let t=0;t<$o.length;t++)o=$o[t],n===o[0]&&i===o[1]&&(r=!0);if(!1===r){if("show"===i||"unlock"===i)Do.hook("show",s,e);else{if("hide"!==i&&"lock"!==i)return void Ke.error(`Unknown action: ${i}`);Do.hook("hide",s,e)}l.session.alert[s]=i,Vi.focusOnForeground()}else l.session.alert[s]=i}}},Gr(t,e=null,s=!1){if(xo.Ur(e).session.intent=t,!0===s)return;let i=xo.Nr("intent",e);for(let n in t)vo.toggle(n,t[n],e,!i);vo.cleanup(t,e)},Kr(t,s=null,i=!1){var n,r,o,l,u;let a,h,c,d,D,f,p=xo.Ur(s);if(!0===i)return;xo.Nr("operator",s);let m=t||{};p.session.operator=m,vl.isEmpty(m)?(a="initial",c="website",d=null==(n=Ko.website)?void 0:n.id):(a="ongoing",c=t.type||"operator",d=t.user_id,D=t.avatar,h="website"===t.type?t.nickname:Ti.name().parse_first_name(t.nickname)),(null==(l=null==(o=null==(r=to.plugins)?void 0:r["urn:crisp.im:hugo:0"])?void 0:o.settings)?void 0:l.agent_enabled)&&!t.user_id&&(a="agent"),(D||d)&&(f=Zi.url(240,c,d,D)),f&&("ongoing"===a&&(Oo.changeSessionOngoingOperator({type:c,name:h,user_id:d,url:f},s),!0===(null==(u=to.chat)?void 0:u.ongoing_operator_face)&&(co.pane.is_ongoing=!0)),Oo.changeSessionStatusMarker(a,s)),e().Chat.Interface.requestDynamicSizingProperties(!0)},Yr(t,s=null,i=!1){var n;if(!0===i)return;let r=xo.Nr("maximized",s);if(s!==Ko.session_id)return;let o=!0!==r&&!0;!0===(null==(n=Ko.runtime)?void 0:n.lock_maximized)&&(t=!0),!1===t?(e().Chat.Interface.toggleVisibility("pane",o),Vi.blurFromForeground(),e().Chat.Viewport.unadapt(),fo.hide(),_o.hide(),Oo.toggleChannelDropdown(!1),wo.close(),bo.stop(),e().Action.event("chat:closed")):(!0===Eo.settings_only&&"helpdesk"!==Oo.mode&&Eo.showSearch(),e().Chat.Interface.toggleVisibility("chat",o),Vi.focusOnForeground(),e().Chat.Viewport.adapt(),Vi.checkClearance(),e().Action.event("chat:opened"))},Zr(t,s=null,i=!1){!0!==i&&(xo.Nr("expanded",s),s===Ko.session_id&&(Oo.is_expanded=!0===t,e().Chat.Interface.requestDynamicSizingProperties(),Vi.focusOnForeground()))},Xr(t,s=null,i=!1){!0!==i&&(xo.Nr("textarea",s),s===Ko.session_id&&(Oo.message_field_value=t,e().Action.set_message_text(t)))},Ur:(t=null)=>ts(t=Oo.effectiveSessionId(t)||"default",Bo,xo.Qr)},Bo={isRestored:!1,session:{},pending:{},pendingTimeout:null,restoredState:[]},xo=Qe({Qr:{}},Ao);es(()=>{xo.Qr={}}),xo.register={conversation:xo.Hr,trigger:xo.Wr,alert:xo.Jr,intent:xo.Gr,operator:xo.Kr,maximized:xo.Yr,expanded:xo.Zr,textarea:xo.Xr},ze(()=>{var t;return!0!==Ko.runtime.lock_maximized&&(!0===(null==(t=to.chat)?void 0:t.hide_vacation)||!0===Ko.is_blocked)});const jo=Qe({},{}),Io=Qe({is_start_visible:!1},{showStart(){Io.is_start_visible=!0},hideStart(){Io.is_start_visible=!1}});function So(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}const Ro=[["email","Email"],["phone","Phone"],["messenger","Messenger"],["telegram","Telegram"],["twitter","X (Twitter)"],["whatsapp","WhatsApp"],["instagram","Instagram"]],Oo=Qe({mode:"chat",is_maximized:!1,is_expanded:!1,is_opened:!1,was_auto_expanded:{chat:!1,helpdesk_article:!1},has_offline:!1,has_channels:!1,has_pad_popover:!1,has_window_focus:!1,show_operator_count:!0,animate_minimize:!1,animate_maximize:!1,reconnect_failed:!1,reconnect_inactive:!1,message_field_value:"",conversations:{is_starting:!1,last_start_error:null,current_session_id:null,all_session_ids:[],all_unread_count:0},quick_replies:{choices:[]},activity:{metrics:null,last:null},status:{url:""},status_markers:{},ongoing_operators:{}},{effectiveSessionId:(t=null)=>t||Oo.conversations.current_session_id||Ko.session_id,eachSessionId(t){let e=Oo.conversations.all_session_ids,s=[];for(let i=0;i<e.length;i++)s.push(t(e[i]));return s},isCurrentSessionId(t=null){let e=Oo.effectiveSessionId();return null===t||t===e},changeSessionOngoingOperator(t,e=null){Oo.ongoing_operators[Oo.effectiveSessionId(e)]=t},changeSessionStatusMarker(t,e=null){Oo.status_markers[Oo.effectiveSessionId(e)]=t},onPaneToggleClick(t){var s;let i=t.target;(null==(s=null==i?void 0:i.classList)?void 0:s.contains("cc-gequn"))?e().Action.do_message_read():e().Action.do_chat_toggle()},onPaneTooltipNewMessagesClick(){var t;let s=(null==(t=Oo.current_unread_preview)?void 0:t.session_id)||null;null!==s?Oo.openConversation(s):e().Chat.Interface.toggleChatMode(!0)},setMessageText(t=null){if("string"!=typeof t)throw new Error("Invalid message text");{let e=document.querySelector(".cc-ut8v8");e&&!0!==e.disabled&&(Oo.message_field_value=t,e.dispatchEvent(new window.KeyboardEvent("keydown")))}},minimize(){!0!==Ko.runtime.lock_maximized&&xo.propagate("maximized",!1,Ko.session_id)},maximize(){xo.propagate("maximized",!0,Ko.session_id,!1,!1,()=>{Vi.scrollTo()})},expand(t){!1===t&&!0===Oo.was_auto_expanded.helpdesk_article&&(Oo.was_auto_expanded.helpdesk_article=!1,t===Oo.is_expanded&&e().Chat.Interface.requestDynamicSizingProperties()),xo.propagate("expanded",t,Ko.session_id)},toggleChannelDropdown(t=null){Oo.eo("has_channels",t)},togglePadPopover(t=null){Oo.eo("has_pad_popover",t)},startNewConversation(){!0===Ko.runtime.tester_mode&&Ni.onStartNewConversation(),!0!==Oo.conversations.is_starting&&(Oo.conversations.is_starting=!0,Oo.conversations.last_start_error=null,Mr.Session.createChild())},handleConversationStarted(t=null,e=null,s=null){if(!0===Oo.conversations.is_starting){Oo.conversations.is_starting=!1;let i=t=>{Oo.conversations.last_start_error=null,Io.hideStart(),Oo.openConversation(t)};null!==e&&(null==s?void 0:s.session_id)?i(s.session_id):null!==t?(Oo.conversations.all_session_ids.push(t),xo.initialize(t),Go.restoreHistory(t),i(t)):Oo.conversations.last_start_error=e}},initializeConversations(t,e=[]){Oo.conversations.all_session_ids=[],t.session_id&&Oo.conversations.all_session_ids.push(t.session_id);for(let s=0;s<e.length;s++)Oo.conversations.all_session_ids.push(e[s].session_id)},openConversation(t=null){if(null!==t&&!0!==Oo.conversations.all_session_ids.includes(t))throw new Error("Conversation does not exist");{let e=null!==t&&t===Ko.session_id?"default":t;xo.propagate("conversation",e,Ko.session_id)}},generateChannelLink(t){let e="",s=to.channels[t]||null;switch(t){case"email":{let t=Ko.session_hash;if(t){let s=to.website.name,i=`s.${t}.i@${to.website.mailer}`;e="mailto:",s&&(e+=`"${encodeURI(s)}"`),e+=`<${encodeURI(i)}>`}else s&&(e=`mailto:${s}`);break}case"phone":s&&(e=`tel:${s}`);break;case"messenger":s&&(e=`https://m.me/${encodeURI(s)}`);break;case"telegram":s&&(e=`https://telegram.me/${encodeURI(s)}`);break;case"twitter":s&&(e=`https://x.com/${encodeURI(s)}`);break;case"whatsapp":s&&(e=`https://wa.me/${encodeURI(s)}`);break;case"instagram":s&&(e=`https://www.instagram.com/${encodeURI(s)}/`);break;case"helpdesk":case"status":if(s){e=`${"production"===Ve.ENVIRONMENT?"https":"http"}://${s}/`}}return e},eo(t,e=null){null===e&&(e=!Oo[t]),e!==Oo[t]&&(Oo[t]=e)}});Oo.is_visible=ze(()=>Oo.is_maximized&&!0!==Ko.is_hidden),Oo.has_health=ze(()=>{var t;return Oo.status.url&&!0===to.chat.status_health_dead&&"dead"===(null==(t=to.website.status)?void 0:t.health)&&(new Date).getTime()-to.website.status.since>=18e4}),Oo.has_chat_focus=ze(()=>!!(Oo.has_window_focus&&Oo.is_visible&&"chat"===Oo.mode&&Oo.conversations.current_session_id)),Oo.branding_links=ze(()=>{let t=`ref=chatbox&domain=${Ko.website.domain}&name=${encodeURIComponent(to.website.name)}`;return{default:`${Ve.URL_WEBSITE}/${Li.web}/livechat/?${t}`,agent:`${Ve.URL_HUGO}/?${t}`}}),Oo.activity_metrics=ze(()=>{let t=to.website.response_metrics;return(null==t?void 0:t.mean)&&t.mean>=1e3&&t.mean<216e5?t.mean:null}),Oo.activity_last=ze(()=>{let t=to.website.last_available;return t&&t>0?t:null}),Oo.channels=ze(()=>{let t=[];for(let e=0;e<Ro.length;e++){let s=Ro[e][0],i=Ro[e][1],n=Oo.generateChannelLink(s);n&&("email"!==s&&"phone"!==s||(i=So(Yi.text,Yi)("chat",`chat_header_ongoing_channel_continue_${s}`)),t.push({name:s,format:i,link:n}))}return t}),Oo.is_form_locked=ze(()=>jo.has_form_disabled||Go.conversation.locks.identify||Go.conversation.locks.prompt||!0===Go.conversation.compose.is_active&&!0===Go.conversation.compose.is_automated),Oo.current_quick_replies=ze(()=>0===Oo.quick_replies.choices.length||!0===Go.conversation.has_received_messages||!0===Go.conversation.has_sent_messages?null:Oo.quick_replies.choices),Oo.current_alerts=ze(()=>{let t=xo.session().alert||{},e=!1,s={};for(let i in t){let n=t[i];"show"!==n&&"unlock"!==n||(e=!0,s[i]=n)}return!0===e?s:null}),Oo.current_unread_preview=ze(()=>{if(Go.conversation.preview.length>0)return Go.conversation;let t=Oo.conversations.all_session_ids;for(let e=0;e<t.length;e++){let s=Go.conversationForSession(t[e]);if(s.preview.length>0)return s}return null}),Oo.current_ongoing_operator=ze(()=>{let t=Oo.ongoing_operators[Oo.effectiveSessionId()]||null;return null!==t?t:{user_id:"",type:"",name:"",url:""}}),Oo.current_status_marker=ze(()=>Oo.status_markers[Oo.effectiveSessionId()]||"none"),Oo.conversations.all_unread_count=ze(()=>{let t=0;return Oo.eachSessionId(e=>{t+=Go.getUnread(e)}),t});const zo={events:["chat-message-receive","chat-message-action"],call:["call-established","call-hangup","call-ring"]};const Po=new class extends Ze{constructor(){super(),this.sr()}reset(){this.stop(),this.sr()}allow(t=!0){this.so=t}mute(t=!0){this.no=t}initialize(t){if(!1===this.so)return;this.ro[t]=this.ro[t]||{};let e=zo[t];for(let s=0;s<e.length;s++)void 0===this.ro[t][e[s]]&&this.oo(t,e[s])}start(t,e,s=!1,i=50){if(!1!==this.so&&!0===cl.feature.has_html_audio&&!0===this.lo(t)){let n=zo[t];void 0!==n?n.includes(e)?(this.stop(),this.oo(t,e,n=>{if(null!==this.uo){"suspended"===this.uo.state&&this.uo.resume();let r=this.uo.createGain();r.gain.setValueAtTime(i/100,0),r.connect(this.uo.destination),this.ao=this.uo.createBufferSource(),this.ao.buffer=n,this.ao.loop=s,this.ao.connect(r),this.ao.start(),this.ho=t,this.co=e}},t=>{})):Ke.error(`Sound does not exist: ${e} in subset ${t}`):Ke.error(`Subset does not exist: ${t}`)}}stop(t=null,e=null){try{null===this.ao||null!==t&&t!==this.ho||null!==e&&e!==this.co||(this.ao.stop(),this.ao=null,this.ho=null,this.co=null)}catch(s){Ke.error(s)}}oo(t,e,s=null,i=null){try{if(this.ro[t]=this.ro[t]||{},this.Do[t]=this.Do[t]||{},void 0===this.Do[t][e])if(this.Do[t][e]={success:"function"==typeof s?[s]:[],error:"function"==typeof i?[i]:[]},void 0!==this.ro[t][e])this.fo("success",t,e,this.ro[t][e]);else{let s=this.po(t,e);if(s){let i=new window.XMLHttpRequest;i.open("GET",s,!0),i.responseType="arraybuffer",i.onload=()=>{null===this.uo&&(this.uo=this._o()),null!==this.uo?this.uo.decodeAudioData(i.response,s=>{this.ro[t]=this.ro[t]||{},this.ro[t][e]=s,this.fo("success",t,e,s)},s=>{this.fo("error",t,e,s)}):this.fo("error",t,e)},i.onerror=s=>{this.fo("error",t,e,s)},i.send()}}else"function"==typeof s&&this.Do[t][e].success.push(s),"function"==typeof i&&this.Do[t][e].error.push(i)}catch(n){Ke.error(n)}}fo(t,e,s,i=null){var n;let r=null==(n=this.Do[e])?void 0:n[s];if(void 0!==r){for(let e=0;e<r[t].length;e++)"function"==typeof r[t][e]&&r[t][e](i);delete this.Do[e][s]}}po(t,e){let s=cl.feature.html_audio_format;return null!==s?`${Ve.URL_CLIENT}/static/sounds/${t}/${e}.${s}?${Ve.REVISION}`:null}_o(){try{return!0===cl.base.has_interacted&&"function"==typeof window.AudioContext?new window.AudioContext:null}catch(t){return Ke.error(t),null}}lo(t){let e=!this.no&&!0,s="call"===t||!0!==Mr.Call.isOngoing();return e&&s&&!0}sr(){this.so=!0,this.no=!1,this.uo=null,this.ao=null,this.ho=null,this.co=null,this.ro={},this.Do={}}};function To(){return(new Date).getTime()}const Lo=5e3,Mo=["text","file","animation","audio","picker","field","carousel"],qo=["welcome","identity","game","feedback"],Uo=["email","phone"],Vo=["ð¨","âï¸"],No=["field","picker"],Ho=/[/:]/g,Wo={conversationForSession:(t=null)=>Go.mo(t),list:(t=null)=>Go.mo(t).list,get(t,e=null){let s=Go.mo(e),i=null;for(let n=0;n<s.list.length;n++)if(s.list[n].fingerprint===t){i=s.list[n];break}return i},send(t="text",s=null){!0===Go.checkIntentSend()&&(t&&s?e().Action.do_message_send(t,s):Oo.message_field_value&&(e().Action.do_message_send("text",Oo.message_field_value),Oo.setMessageText("")))},handleSent(t,e=null){t.from="user",!0===Go.Fo(t,e)&&Go.vo(t.fingerprint,e),Go.wo(t.fingerprint,e),!1===Go.checkUserIdentity(!1,e)&&Do.update("wait_reply","show",e),!0===Ko.runtime.tester_mode&&Ni.onMessageSent(t),!0===Oo.isCurrentSessionId(e)&&Vi.scrollTo()},handleSentAcknowledgement(t,e=null){Go.bo(t.fingerprint,e),Go.Fo(t,e),Go.yo(!1,e),!0===Oo.isCurrentSessionId(e)&&Vi.scrollToLastMessage("to")},handleReceived(t,e=null,s=!0,i=!0,n=!0,r=!1){let o=Go.mo(e),l=Go.Fo(t,e),u=Oo.has_chat_focus;if(!0===s&&!1===u&&Po.start("events","chat-message-receive"),!0===l&&(this.Eo(t),this.Co(t,e,i)),!0===i&&!0===l&&Go.vo(t.fingerprint,e),t.user&&!qo.includes(t.user.source)){let s=xo.session(e).operator||{};vl.isEqual(t.user,s)||xo.propagate("operator",t.user,e)}!1===r&&(bo.stop(),o.compose.timestamp&&t.timestamp>0&&o.compose.timestamp<t.timestamp&&Go.hideCompose(e)),!0===n&&!0===Oo.isCurrentSessionId(e)&&vl.nextRender(()=>{Vi.scrollToLastMessage("from"),vl.setTimeout(()=>{Vi.scrollToLastMessage("from")},400)})},update(t,e=null){!0===Ko.runtime.tester_mode?(Ni.onMessageUpdated(t),Go.Fo(t,e)):Mr.Message.updateMessage(t.fingerprint,t.content,e)},remove(t,e=null){let s=Go.mo(e);for(let i=0;i<s.list.length;i++)if(s.list[i].fingerprint===t){s.list.splice(i,1),delete s.fingerprints[t];break}},handleRemoved(t,e=null){Go.ko(t.fingerprint,e)},acknowledgeReadSend(t,e=null,s=!1){let i=Go.mo(e);if(!0!==to.chat.operator_privacy){let e=null;if(t.length>0)for(let s=0;s<i.list.length;s++){let n=i.list[s].fingerprint;t.includes(n)&&(i.list[s].read=!0,e=n)}null!==e&&(i.latest_fingerprint=e)}},errorRejected(t,e=null,s=null){Go.bo(t,e,s||"other")},triggerWillSendHooks(t=null){var e;let s=Go.mo(t),i=!1,n=[],r=Mr.Message.getCachedMessages(t);for(let o=r.length-1;o>=0&&"local"===(null==(e=r[o].user)?void 0:e.source);o--)n.push(r[o]);for(let o=0;o<n.length;o++){let e=n[o],r=s.receive_mirror_fingerprints;r.includes(e.fingerprint)||(r.push(e.fingerprint),Mr.Message.receiveMessageMirror(e.type,"urn:crisp.im:triggers:0",e.content,e.fingerprint,t),i=!0)}return i},dispatchLocal(t,e,s=null,i=!1){let n=to.website.active_operators||[],r={source:"local"};n[0]&&!0!==i?(r.user_id=n[0].user_id,r.nickname=n[0].nickname,n[0].avatar&&(r.avatar=n[0].avatar)):(r.type="website",r.user_id=Ko.website.id,r.nickname=to.website.name),Mr.Message.receiveMessageLocal(t,e,r,s)},checkIntentSend(){let t=!0;return!0!==e().Broker._socketConnected&&(t=!1,Mr.socket.connect()),t},checkFormIdentifyLock(t=null){var e;let s=Go.mo(t);!0===(null==(e=null==to?void 0:to.chat)?void 0:e.force_identify)&&(s.locks.identify=!0)},checkFormIdentifyUnlock(t=null){let e=Go.mo(t);!0!==jo.has_form_disabled&&(e.locks.identify=!1)},showIdentity(t=!0,e=null){var s;let i=`**${Yi.text("chat","chat_message_text_identity_main")}**\n_${Yi.text("chat","chat_message_text_identity_ask")}_`,n=t=>()=>{vo.update("identity",t,e)},r=[];for(let o=0;o<Uo.length;o++){let t=Uo[o],e=Vo[o];!0===(null==(s=null==to?void 0:to.chat)?void 0:s[`${t}_visitors`])&&r.push({value:t,icon:e,selected:!1,label:Yi.text("chat",`chat_message_text_identity_pick_${t}`),handler:n(t)})}r.length>0&&Go.$o("identity","default","picker",{id:"ask-identity",text:i,choices:r},e,t,t)},hideIdentity(t=null){Go.Ao("identity",t)},showGame(t=!0,e=null){let s=`**${Yi.text("chat","chat_message_text_game_main")}**\n_${Yi.text("chat","chat_message_text_game_ask")}_`;Go.$o("game","default","picker",{id:"ask-game",text:s,choices:[{value:"play",icon:"ð¹ï¸",selected:!1,label:Yi.text("chat","chat_message_text_game_pick_yes"),handler:()=>{bo.start(),vo.update("game",!1,e)}},{value:"ignore",selected:!1,label:Yi.text("chat","chat_message_text_game_pick_no"),handler:()=>{vo.update("game",!1,e)}}]},e,t,t)},hideGame(t=null){Go.Ao("game",t)},showFeedback(t=!0,e=null){let s=`**${Yi.text("chat","chat_message_text_feedback_main")}**\n_${Yi.text("chat","chat_message_text_feedback_ask")}_`;Go.$o("feedback","default","picker",{id:"ask-feedback",text:s,choices:[{value:"rate",icon:"â­ï¸",selected:!1,label:Yi.text("chat","chat_message_text_feedback_pick_rate"),handler:()=>{_o.show(e),vo.update("feedback","rate",e)}},{value:"ignore",selected:!1,label:Yi.text("chat","chat_message_text_feedback_pick_ignore"),handler:()=>{vo.update("feedback",!1,e)}}]},e,t,t)},hideFeedback(t=null){Go.Ao("feedback",t)},showFeedbackSubmitted(t=!0,e=null){let s=Yi.text("chat","chat_message_text_feedback_submitted");Go.$o("feedback","submitted","text",s,e,t,t)},showCompose(t,e=!1,s=null){let i=Go.mo(s),n=i.compose.is_active||!1;i.compose.timestamp=t,i.compose.is_active=!0,i.compose.is_automated=e,!0!==n&&(Go.Bo(s),!0===Oo.isCurrentSessionId(s)&&Vi.scrollToLastMessage("from"))},hideCompose(t=null){let e=Go.mo(t);e.compose.is_active=!1,e.compose.is_automated=!1,e.compose.timestamp=null},downloadTranscript(t=null){var e;let s=Go.mo(t),i=(new Date).toLocaleDateString(),n=Yi.text("chat","chat_message_transcript_name",[i.replace(Ho,"-")]),r=Yi.text("chat","chat_message_transcript_content_title",[to.website.name,i]);r+="\n\n---\n\n";for(let o=0;o<s.list.length;o++){let t=s.list[o];if(t.timestamp>0&&t.content&&t.user&&!qo.includes(t.user.source)){let s,i=new Date(t.timestamp).toLocaleTimeString(),n=Ti.name().parse_first_name((null==(e=t.user)?void 0:e.nickname)||"(?)");switch(t.type){case"text":s=t.content;break;case"file":{let e=t.content;s=e.name?`${e.name} ${e.url}`:e.url;break}case"animation":case"audio":s=t.content.url;break;case"picker":case"field":case"carousel":s=t.content.text;break}s&&"string"==typeof s&&(r+=`[${i}] ${n}: ${s}\n`)}}vl.downloadLocalFile(`${n}.txt`,r)},checkUserIdentity(t=!1,s=null){let i=Go.mo(s),n=!0===to.chat.force_identify;if(!0===(void 0===vo.states(s).identity||"default"===vo.states(s).identity&&n)){let r=e().Action.get_user_email(),o=e().Action.get_user_phone(),l=to.chat.email_visitors,u=to.chat.phone_visitors;return(!r&&!0===l||!o&&!0===u)&&!r&&!o&&(null!==i.timeouts.showIdentity&&vl.clearTimeout(i.timeouts.showIdentity),i.timeouts.showIdentity=vl.setTimeout(()=>{if(i.timeouts.showIdentity=null,!0===t&&!1===n)return null;if(!0===i.compose.is_active&&!0===i.compose.is_automated)return void Go.checkUserIdentity(!1,s);let e=!0;!0===i.has_received_messages&&i.message_last_timestamp_automated>0&&To()-i.message_last_timestamp_automated<=Lo&&(e=!1);let r="default";!1===(l&&u)&&e&&(!0===l?r="email":!0===u&&(r="phone")),vo.update("identity",r,s),Do.update("warn_reply","show",s)},n?0:Lo),n&&Go.checkFormIdentifyLock(s),!0)}return null},registerUnreadHandler(){Mr.Message.setUnreadMessagesCallback((t,e,s,i)=>{vl.setTimeout(()=>{Go.updateUnread(e,s,i,t)},0)})},getUnread:(t=null)=>Go.mo(t).unread_count,updateUnread(t=0,e=[],s=[],i=null){let n=Go.mo(i),r=co.tooltips;n.unread_count=t;let o=Oo.conversations.all_unread_count||0;if(t>0){let t=!1===r.new_messages.visible;Go.xo(e,s,t,i),!0===t&&(null!==n.timeouts.tooltipShowDelay&&vl.clearTimeout(n.timeouts.tooltipShowDelay),n.timeouts.tooltipShowDelay=vl.setTimeout(()=>{n.timeouts.tooltipShowDelay=null,r.new_messages.visible=!0,r.new_messages.animate=!0,vl.setTimeout(()=>{r.new_messages.animate=!1},500)},100))}else null!==n.timeouts.tooltipShowDelay&&vl.clearTimeout(n.timeouts.tooltipShowDelay),r.new_messages.visible=!1,r.new_messages.animate=!1;null===Ko.page_title_current&&(Ko.page_title_current=document.title),Ko.page_title_current&&(o>0&&!0!==Ko.is_invisible?document.title=`ð¬${o} - ${Ko.page_title_current}`:document.title=Ko.page_title_current)},synchronizeHistoryAndNew(t=null){Mr.Message.getMessageCompose(t),Mr.Message.getUnreadMessages(t),Mr.Message.getMessageHistory(t),0===Mr.Message.countMessageHistory(t)&&Go.jo(t)},restoreHistory(t=null){Go.Io(t),Go.synchronizeHistoryAndNew(t)},handleHistory(t=[],e=null){let s=Go.mo(e);for(let i=0;i<t.length;i++){let n=t[i];Go.Fo(n,e),"user"===n.from&&!0===n.read&&s.sent_read_fingerprints.push(n.fingerprint)}Go.jo(e)},Fo(t,e=null){let s=Go.mo(e),i=!0,n=vl.clone(t);if(i=!s.fingerprints[n.fingerprint],!0===i)void 0===n.read&&(n.read=!1),void 0===n.metas&&(n.metas={is_new:!1,is_pending:!1,error:null},"field"!==n.type&&"picker"!==n.type||(n.metas.field={value:""})),s.fingerprints[n.fingerprint]=!0,s.list.push(n);else for(let r=0;r<s.list.length;r++)if(s.list[r].fingerprint===n.fingerprint){vl.merge(s.list[r],n);break}return Go.So(n.type,n.content,n.fingerprint,n.from,n.user||{},n.timestamp,n.automated,e),i},ko(t,e=null){let s=Go.mo(e),i=!1;if(!0===s.fingerprints[t]){delete s.fingerprints[t];let n={messages:s.list,preview:s.preview};for(let s in n){let i=n[s];if(i.length>0)for(let s=0;s<i.length;s++){let n=i[s];if(n.fingerprint===t){i.splice(s,1),Go.Ro(n.type,n.content,n.fingerprint,n.from,n.timestamp,e);break}}}i=!0}return i},So(t,e,s,i,n,r,o,l=null){let u=Go.mo(l),a="local"!==n.source&&!qo.includes(n.source)&&!0;"operator"===i&&(u.compose.timestamp&&r>0&&r>u.compose.timestamp&&!0===a&&Go.hideCompose(l),r>0&&!0===a&&(Do.update("wait_reply","lock",l),vo.update("game",!1,l),Go.Oo(t,e,s,l))),r>0&&(u.has_messages=!0,u.message_last_timestamp=r,!0===a&&("operator"===i?(u.has_received_messages=!0,!0===o&&(u.message_last_timestamp_automated=r)):u.has_sent_messages=!0),Go.zo(l)),!1===Ko.has_local_messages&&"local"===n.source&&(Ko.has_local_messages=!0)},Ro(t,e,s,i,n,r=null){"operator"===i&&n>0&&Go.Po(t,e,s,r)},bo(t,e=null,s=null){let i=Go.mo(e),n=Go.get(t,e),r=!1;return n&&(n.metas.is_pending=!1,n.metas.error=s),t in i.timeouts.acknowledgements&&(vl.clearTimeout(i.timeouts.acknowledgements[t]),delete i.timeouts.acknowledgements[t],r=!0),r},jo(t=null){let e=Go.mo(t);e.sent_read_fingerprints.length>0&&(Go.acknowledgeReadSend(e.sent_read_fingerprints,t,!0),e.sent_read_fingerprints=[]),xo.retrigger("intent",t),xo.retrigger("scroll",t),Vi.focusOnForeground(),!0===Oo.isCurrentSessionId(t)&&Vi.scrollToLastMessage(),Go.yo(!0,t)},Eo(t){if(!1===Oo.is_expanded&&!1===Oo.was_auto_expanded.chat&&!0===t.automated&&"text"===t.type){t.content.length>500&&(Oo.was_auto_expanded.chat=!0,Oo.expand(!0))}},Co(t,e=null,s=!0){if(t.properties){let i=t.properties["x-client-intent"]||null;null!==i&&!0===s&&this.To(i,e)}},To(t,s=null){switch(t){case"ask-email":vo.update("identity","email",s);break;case"ask-phone":vo.update("identity","phone",s);break;case"state-start":Io.showStart();break;case"state-escalate":{let t=e().Action.get_user_email(),i=to.chat.email_visitors;t||!0!==i||vl.setTimeout(()=>{vo.update("identity","email",s,!0)},Lo);break}}},Io(t=null){var e,s;let i=Yi.text("theme_welcome",["default_chat",`${null==(e=to.chat)?void 0:e.theme_welcome}_chat`],[null==(s=to.website)?void 0:s.name]);Go.$o("welcome","default","text",i,t,!1,!1)},$o(t,e,s,i,n=null,r=!1,o=!0){var l;let u=Go.mo(n);if(qo.includes(t)&&u.website_messages_parts[t]!==e){u.website_messages_parts[t]=e;let a=(new Date).getTime();"welcome"===t&&(a=0),Go.handleReceived({type:s,timestamp:a,content:i,fingerprint:`$${t}`,from:"operator",user:{source:t,type:"website",user_id:null==(l=Ko.website)?void 0:l.id}},n,!1,r,o,!0)}},Ao(t,e=null){let s=Go.mo(e);qo.includes(t)?s.website_messages_parts[t]&&(delete s.website_messages_parts[t],Go.remove(`$${t}`,e)):Ke.error(`Source ${t} not allowed`)},Bo(t=null){let e=Go.mo(t);e.compose.timestamp&&(To()-e.compose.timestamp>=12e4?Go.hideCompose(t):vl.setTimeout(()=>{Go.Bo(t)},5e3))},zo(t=null){var s;let i=!0===Go.mo(t).has_messages&&!0!==Ko.is_activity_outdated;if(Ko.is_activity_ongoing!==i){Ko.is_activity_ongoing=i;let t=((null==(s=document.activeElement)?void 0:s.tagName)||"").toLowerCase();"input"!==t&&"textarea"!==t&&e().Chat.Interface.requestDynamicSizingProperties()}},Oo(t,e,s,i=null){let n=Go.mo(i);if(!0===No.includes(t)&&!0===e.required){let r=!1;switch(t){case"field":e.value&&(r=!0);break;case"picker":{let t=e;for(let e=0;e<t.choices.length;e++)if(!0===t.choices[e].selected){r=!0;break}break}}let o=n.prompt_fingerprints.indexOf(s);!1===r?-1===o&&n.prompt_fingerprints.push(s):o>-1&&n.prompt_fingerprints.splice(o,1),n.locks.prompt=n.prompt_fingerprints.length>0,Do.update("warn_prompt",n.locks.prompt?"show":"hide",i)}},Po(t,e,s,i=null){let n=Go.mo(i);if(!0===No.includes(t)&&!0===e.required){let t=n.prompt_fingerprints.indexOf(s);t>-1&&(n.prompt_fingerprints.splice(t,1),0===n.prompt_fingerprints.length&&(n.locks.prompt=!1,Do.update("warn_prompt","hide",i)))}},yo(t=!1,e=null){let s=Go.mo(e);!1!==vo.states(e).game&&!0===s.has_sent_messages&&!0!==s.has_received_messages&&null===s.timeouts.reply&&(s.timeouts.reply=vl.setTimeout(()=>{var t;s.timeouts.reply=null,!0!==s.has_received_messages&&!0===(null==(t=to.chat)?void 0:t.wait_game)&&vo.update("game",void 0,e)},!0===t?3e4:6e4))},wo(t,e=null){let s=Go.mo(e),i=Go.get(t,e);i&&(i.metas.is_pending=!0,s.timeouts.acknowledgements[t]=vl.setTimeout(()=>{Go.errorRejected(t,e,"timeout")},3e4))},vo(t,e=null){let s=Go.get(t,e);s&&(s.metas.is_new=!0,vl.setTimeout(()=>{s.metas.is_new=!1},400))},xo(t,e,s,i=null){let n=Go.mo(i),r=[],o=null,l=[];for(let u=e.length-1;u>=0&&!(t.includes(e[u].fingerprint)&&(r.unshift(e[u]),r.length>=3));u--);n.preview=[];for(let u=0;u<r.length;u++){let t=r[u],e=vl.clone(t);Mo.includes(t.type)&&n.preview.push(e),u===r.length-1&&null===o&&(o=e.fingerprint),null===o&&null!==n.preview_stack_last_fingerprint||l.push(e)}null!==o&&(n.preview_stack_last_fingerprint=o);for(let u=0;u<l.length;u++)l[u].animate=!0;return vl.setTimeout(()=>{for(let t=0;t<l.length;t++)l[t].animate=!1},1e3+(!0===s?100:0)),r},mo(t=null){let e=ts(t=Oo.effectiveSessionId(t)||"default",Jo,Go.Qr);return e.session_id||(e.session_id=t),e}},Jo={session_id:null,list:[],preview:[],fingerprints:{},compose:{is_active:!1,is_automated:!1,timestamp:null},locks:{identify:!1,prompt:!1},states:{expanded_sources:{}},timeouts:{acknowledgements:{},reply:null,showIdentity:null,tooltipShowDelay:null},message_last_timestamp:0,message_last_timestamp_automated:0,website_messages_parts:{},unread_count:0,has_sent_messages:!1,has_received_messages:!1,has_messages:!1,sent_read_fingerprints:[],receive_mirror_fingerprints:[],preview_stack_last_fingerprint:null,prompt_fingerprints:[],latest_fingerprint:null};Ve.TEST&&(window.$showCompose=(t,e=!1)=>{Go.showCompose(t,e)},window.$hideCompose=()=>{Go.hideCompose()});const Go=Qe({Qr:{}},Wo);es(()=>{Go.Qr={}}),Go.conversation=ze(()=>Go.mo());const Ko=Qe({session_id:null,session_hash:null,token_id:null,cookie_expire:null,cookie_domain:null,browser_useragent:null,browser_timezone:null,browser_capabilities:[],browser_locales:[],page_domain:null,page_url:null,page_title_current:null,is_hidden:!1,is_full_view:!1,is_small_view:!1,is_large_view:!1,is_activity_ongoing:!1,has_interacted:!1,has_local_messages:!1,force_show:!1,error_mode:!1,website:{id:"",domain:""},features:{audio_recording:!1},runtime:{}},{checkIsFullView(){var t;return!0===(null==(t=Ko.runtime)?void 0:t.lock_full_view)||(window.innerHeight<600||window.innerWidth<480)},checkIsSmallView:()=>window.innerHeight<720||window.innerWidth<540,checkIsLargeView:()=>window.innerHeight>840&&window.innerWidth>640,applySizing(){Ko.is_full_view=Ko.checkIsFullView(),Ko.is_small_view=Ko.checkIsSmallView(),Ko.is_large_view=Ko.checkIsLargeView()}});Ko.is_mobile_view=ze(()=>!0===Ko.is_full_view&&!0===oo.has_screen_touch),Ko.is_blocked=ze(()=>(!0===Ko.is_blocked_page||!0===Ko.is_blocked_locale)&&!0),Ko.is_activity_outdated=ze(()=>Go.conversation.message_last_timestamp>0&&(new Date).getTime()-Go.conversation.message_last_timestamp>=6e5),Ko.is_blocked_locale=ze(()=>{var t,e;let s=Li.code;return!!(null==(e=null==(t=to.chat)?void 0:t.blocked_locales)?void 0:e.includes(s))}),Ko.is_blocked_page=ze(()=>{var t,e,s,i;return!(!((null==(e=null==(t=to.chat)?void 0:t.allowed_pages)?void 0:e.length)>0)||vl.comparePageRules(Ko.page_url,null==(s=to.chat)?void 0:s.allowed_pages))||vl.comparePageRules(Ko.page_url,null==(i=to.chat)?void 0:i.blocked_pages)&&!0}),Ko.is_invisible=ze(()=>{var t,e,s;let i=!1;return!0===Ko.runtime.lock_maximized||!0===Go.conversation.has_messages&&!0!==Ko.is_activity_outdated||(!0===Ko.is_blocked&&(i=!0),!0===(null==(t=to.chat)?void 0:t.hide_vacation)&&(i=!0),!0===(null==(e=to.chat)?void 0:e.hide_on_away)&&!0!==Ci.was_availability_online&&!0!==Ci.users_available&&(i=!0),!0===(null==(s=to.chat)?void 0:s.hide_on_mobile)&&!0===Ko.is_mobile_view&&(i=!0)),i}),Ko.has_autofocus=ze(()=>!0!==Ko.is_mobile_view),Ko.active_operators=ze(()=>{var t;let e=[],s=null==(t=null==to?void 0:to.website)?void 0:t.active_operators;if(s.length>0)for(let i=0;i<s.length;i++)i<3&&e.push({type:"operator",identifier:s[i].user_id,avatar:s[i].avatar,name:Ti.name().parse_first_name(s[i].nickname)});return e.push({type:"website",identifier:Ko.website.id}),e}),Ko.other_operators_count=ze(()=>{var t,e,s,i;let n=0,r=to,o=(null==(e=null==(t=null==r?void 0:r.website)?void 0:t.active_operators)?void 0:e.length)||0;return(null==(s=null==r?void 0:r.website)?void 0:s.count_operators)>o&&(n=(null==(i=null==r?void 0:r.website)?void 0:i.count_operators)-o),n});const Yo=new class extends Ui{constructor(){super()}subscribe(t,e){super.subscribe(t,e)}unsubscribe(t,e){super.unsubscribe(t,e)}assistMouse(t){super.emit("assist:mouse",t)}assistScroll(t){super.emit("assist:scroll",t)}assistClick(t){super.emit("assist:click",t)}},Zo="assist";let Xo=null;const Qo=Qe({data:null,type:null},{prepare(t){Qo.data=t,Ji(()=>import("./features/browsing_default_439a0bf.js"),__vite__mapDeps([0,2])).then(t=>{Xo=t.default(".cc-1tx1r")})},startAssist(){null===Qo.type&&(Qo.type=Zo)},stopAssist(){Qo.type===Zo&&(Qo.type=null),Xo.unmount(),Xo=null},pipeMouse(t){Qo.type===Zo&&Yo.assistMouse(t)},pipeScroll(t){Qo.type===Zo&&Yo.assistScroll(t)},pipeClick(t){Qo.type===Zo&&Yo.assistClick(t)}});const tl=new class extends Ui{constructor(){super()}subscribe(t,e){super.subscribe(t,e)}unsubscribe(t,e){super.unsubscribe(t,e)}success(t){super.emit("success",t)}};let el=null;const sl=Qe({is_opened:!1,is_ringing:!1,is_calling:!1,mode:null,state:null,user:{user_id:"",nickname:"",type:""},muted:{audio:!1,video:!1},actions:[]},{ring(t){sl.Lo(),Po.initialize("call"),sl.mode=t.mode,sl.state=null,sl.user.user_id=t.user.user_id||Ko.website.id,sl.user.nickname=Ti.name().parse_first_name(t.user.nickname)||to.website.name,sl.user.type=t.user.user_id?"operator":"website",sl.actions=sl.Mo(t.mode),sl.muted.audio=!1,sl.muted.video=!1,sl.is_ringing=!0,Ji(()=>import("./features/call_default_439a0bf.js"),__vite__mapDeps([0,3])).then(t=>{el=t.default(".cc-vx6i0"),sl.is_opened=!0,Po.start("call","call-ring",!0)})},screen(){sl.Lo(!1),sl.toggleState("connecting"),sl.is_ringing=!1,sl.is_calling=!0},stop(){sl.Lo(),sl.is_calling=!1,sl.is_ringing=!1,sl.is_opened=!1,Po.start("call","call-hangup")},success(t){tl.success(t)},error(){sl.Lo(),Po.start("call","call-hangup")},toggleMediaStatus(t,e=!1){let s=null;for(let i=0;i<sl.actions.length;i++){let e=sl.actions[i];if(e.type===t){s=e;break}}null!==s&&(s.value=e),sl.muted[t]=!1===e},toggleState(t){sl.state=t},Lo(t=!0){!0===sl.is_opened&&!0===t&&(el&&(el.unmount(),el=null),Po.stop("call","call-ring"))},Mo:t=>[{type:"audio",value:!0,visible:!0,supported:!0},{type:"video",value:!0,visible:!0,supported:"video"===t},{type:"hangup",value:!1,visible:!0,supported:!0},{type:"toggle",value:!1,visible:!0,supported:!0},{type:"screensharing",value:!1,visible:!0,supported:Mr.Call.hasSupportScreensharing()}]});function il(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}const nl="File",rl="application/octet-stream",ol=Qe({qo:[],Uo:null,Vo:null,has_drop_zone:!1,state:"none"},{uploadGenerated(t,e,s){if(ol.qo[0]){if(!t||!e)return alert(Yi.text("chat","chat_form_attach_alert_quota")),void ol.No();if(ol.qo[0].size>=s)return alert(Yi.text("chat","chat_form_attach_alert_size")),void ol.No();ol.Uo=e,ol.Ho(t,ol.qo[0])}else ol.No()},setDropZone(t){var e;!0===(null==(e=to.chat)?void 0:e.file_transfer)&&(ol.has_drop_zone=t)},handleFileChange(t=[]){if(!1!==Go.checkIntentSend()&&0!==t.length&&"none"===ol.state){ol.qo=[];for(let e=0;e<t.length;e++)ol.qo.push(t[e]);ol.state="preparing",Mr.Bucket.getUrlUpload(t[0].name||nl,t[0].type||rl)}},Ho(t,e){ol.Vo=new window.XMLHttpRequest,ol.Vo.file=e,ol.Vo.addEventListener("loadstart",il(ol.Wo,this),!1),ol.Vo.addEventListener("error",il(ol.Jo,this),!1),ol.Vo.addEventListener("abort",il(ol.Jo,this),!1),ol.Vo.addEventListener("load",il(ol.Go,this),!1),ol.Vo.open("PUT",t,!0),ol.Vo.setRequestHeader("Content-Disposition","attachment"),ol.Vo.send(e)},Wo(){ol.state="uploading"},Jo(){ol.qo.length>0&&alert(Yi.text("chat","chat_form_attach_alert_error")),ol.No()},Go(){if(200!==ol.Vo.status&&201!==ol.Vo.status)return ol.Jo();if(0===ol.qo.length)return;if(!ol.Uo)return;let t=ol.qo[0];vl.setTimeout(()=>{var s;(null==(s=t.type)?void 0:s.includes("audio/"))&&"number"==typeof t.duration?e().Action.do_message_send("audio",{url:ol.Uo,type:t.type,duration:t.duration}):e().Action.do_message_send("file",{url:ol.Uo,name:t.name||nl,type:t.type||rl}),ol.No()},2e3)},No(){ol.Vo&&(ol.Vo.removeEventListener("loadstart",ol.Wo,!1),ol.Vo.removeEventListener("error",ol.Jo,!1),ol.Vo.removeEventListener("abort",ol.Jo,!1),ol.Vo.removeEventListener("load",ol.Go,!1));let t=document.querySelector(".cc-1oohf");t&&(t.value=null),ol.state="none",ol.qo.shift(),ol.qo.length>0&&ol.handleFileChange(ol.qo)}});function ll(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}const ul=[["weba","audio/webm; codecs=opus"],["weba","audio/webm; codecs=vorbis"],["oga","audio/ogg; codecs=vorbis"],["m4a","audio/mp4; codecs=mp4a.40.5"]],al=Qe({Ko:null,Yo:null,Zo:!1,Xo:!1,Qo:null,state:"none",duration:0,progress:0,mime:"",chunks:[],extension:null,streamAcquired:null},{record(){!1!==oo.has_audio_recording&&!0===to.chat.audio_record&&null===al.Ko&&navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then(t=>{for(let e=0;e<ul.length;e++){let t=ul[e];if(!0===window.MediaRecorder.isTypeSupported(t[1])){al.extension=t[0],al.mime=t[1];break}}null!==al.extension&&null!==al.mime&&(al.Ko=new window.MediaRecorder(t,{mimeType:al.mime,audioBitsPerSecond:64e3}),al.Yo=t,"function"==typeof al.streamAcquired&&al.streamAcquired(al.Yo),al.Ko.addEventListener("start",ll(al.tl,this)),al.Ko.addEventListener("stop",ll(al.sl,this)),al.Ko.addEventListener("resume",ll(al.il,this)),al.Ko.addEventListener("pause",ll(al.nl,this)),al.Ko.addEventListener("dataavailable",ll(al.rl,this)),al.Ko.addEventListener("error",ll(al.ol,this)),al.Ko.start())}).catch(t=>{alert(Yi.text("chat","chat_form_speech_capture_error"))})},cancel(){null!==al.Ko&&!0!==al.Zo&&(al.Zo=!0,al.Xo=!0,al.Ko.stop())},send(){null!==al.Ko&&!0!==al.Zo&&(al.Zo=!0,al.Ko.stop())},setStreamAcquiredCallback(t){"function"==typeof t&&(al.streamAcquired=t,null!==al.Yo&&t(al.Yo))},tl(){al.duration=0,al.progress=0,al.il()},sl(){if(al.state="none",al.ll(),!0!==al.Xo){let t=(new Date).getTime(),e=new window.File(al.chunks,`audio_${t}.${al.extension}`,{type:al.mime.split(";")[0].trim(),lastModified:t});e.duration=al.duration,ol.handleFileChange([e])}let t=al.Ko.stream.getTracks();for(let e=0;e<t.length;e++)t[e].stop();al.ul()},nl(){al.ll(),al.state="paused"},il(){al.state="recording",al.al()},rl(t){t.data.size>0&&al.chunks.push(t.data)},ol(t){alert(Yi.text("chat","chat_form_speech_capture_error"))},al(){if(null===al.Qo){let t=90;al.Qo=vl.setInterval(()=>{al.duration>=t?al.Ko.pause():(al.duration++,al.progress=Math.floor(100*Math.min(al.duration/t,1)))},1e3)}},ll(){null!==al.Qo&&(vl.clearInterval(al.Qo),al.Qo=null)},ul(){al.Ko=null,al.Yo=null,al.Zo=!1,al.Xo=!1,al.Qo=null,al.duration=0,al.progress=0,al.mime="",al.chunks=[],al.extension=null}}),hl=Qe({bundle:{pending:{chat:!1,overlay:!1}}},{});var cl={availability:Ci,base:Ko,browsing:Qo,call:sl,chat:Oo,chatAlert:Do,chatFrame:wo,chatIntent:vo,chatFeedback:_o,chatAuthenticate:mo,chatPicker:fo,chatFile:ol,chatSpeech:al,chatState:Io,common:jo,feature:oo,game:bo,helpdesk:Eo,messages:Go,minimized:co,overlay:ao,partial:hl,state:xo,locale:Li,website:to};const dl=new class{constructor(){this.$store=cl}install(t){t.config.globalProperties.$store=cl}},Dl=/([*]{1})/g,fl=/([*]{2})/g,pl=/^([!]{1})/,_l=/(\[match:single\])/g,ml=/(\[match:double\])/g,gl=/(\[match:negate\])/g,Fl=new RegExp(["^(\\!)?","(?:https?:[\\/]*)?","(?:www\\.)?([^\\/]+)([^#?]*)?","(?:[\\/]+)?","(?:[#?].*)?"].join(""),"i");const vl=new class extends Ze{constructor(){super(),this.sr()}reset(){this.sr()}getOrFallback(t,e,s=null){let i=t;return i=null!==s?typeof t!==s?e:t:t||e,i}filterImageUrlResize(t,e,s){let i=Ve.URL_IMAGE;return this.hl(t,`${i}/process/resize/?url=${encodeURIComponent(t)}&width=${e}&height=${s}`)}filterImageUrlOriginal(t){let e=Ve.URL_IMAGE;return this.hl(t,`${e}/process/original/?url=${encodeURIComponent(t)}`)}toHashCode(t){let e=0;if(t.length>0)for(let s=0;s<t.length;s++)e=(e<<5)-e+t.charCodeAt(s),e&=e;return e}isEmpty(t){return 0===this.keys(t).length}isEqual(t,e){let s,i,n=!0,r=-1;if(typeof t!=typeof e)n=!1;else if(t&&"object"==typeof t&&e&&"object"==typeof e)for(t instanceof Array||e instanceof Array?(i=this.union(t,e),t.length===i.length&&e.length===i.length||(n=!1)):i=this.union(this.keys(t),this.keys(e));++r<i.length&&!0===n;)s=i[r],n=this.isEqual(t[s],e[s]);else n=t===e;return n}keys(t){let e=[];return"object"==typeof t&&t&&(e=Object.keys(t)),e}clone(t){let e,s,i=Array.isArray(t)?[]:{};for(e in t)s=t[e],i[e]="object"==typeof s&&null!==s?this.clone(s):s;return i}setDeep(t,e,s){const i=e.split(".");let n=t;i.slice(0,-1).forEach(t=>{t in n&&"object"==typeof n[t]||(n[t]={}),n=n[t]}),n[i[i.length-1]]=s}merge(t,e){if("object"!=typeof t||!t)return t;if("object"!=typeof e||!e)return t;for(let s in e)e.hasOwnProperty(s)&&("object"!=typeof e[s]||null===e[s]||Array.isArray(e[s])?t[s]=e[s]:(("object"!=typeof t[s]||null===t[s]||Array.isArray(t[s]))&&(t[s]={}),this.merge(t[s],e[s])));return t}intersect(t,e){let s=[];for(let i=0;i<t.length;i++)e.includes(t[i])&&s.push(t[i]);return s}union(t,e){let s=[];for(let i=0;i<t.length;i++)s.includes(t[i])||s.push(t[i]);for(let i=0;i<e.length;i++)s.includes(e[i])||s.push(e[i]);return s}extract(t,e,s="",i=1){let n=e||s||"",r=(e||"").trim().match(t);return n=(null==r?void 0:r[i])?r[i]:s||"",n}compareRule(t,e,s=".",i="."){let n=!1;return!0===pl.test(e)&&(e=(e=e.replace(pl,"[match:negate]")).replace(gl,"")),e.includes("*")?(e=(e=(e=(e=e.replace(fl,"[match:double]")).replace(Dl,"[match:single]")).replace(ml,i+"*")).replace(_l,s+"*"),n=new RegExp(`^${e}$`).test(t)):n=t===e,n}compareRules(t,e,s,i=".",n="."){let r=!1,o=!1,l=!1;if(e.length>0){let s=0;for(;s<e.length&&!0!==o;)o=this.compareRule(t,e[s],i,n),s++;!1===o&&(r=!0)}if(!1===o&&s.length>0){let e=0;for(;e<s.length&&!0!==l;)l=this.compareRule(t,s[e],i,n),e++;r=l}return r}normalizeUrlPath(t,e,s=""){let i="";return e?e.length>1&&"/"!==e[e.length-1]&&"*"!==e[e.length-1]&&(e+="/"):e="/",i=`${s}${t}${e}`,i}comparePageRules(t,e,s=null){var i,n;let r=!1;if((null==e?void 0:e.length)>0){let o,l=[],u=[],a=[];null===s&&(s=null==(n=null==(i=cl.website)?void 0:i.website)?void 0:n.domain);for(let t=0;t<e.length;t++){let i=(e[t]||"").trim();i&&(!1===Fl.test(i)&&(i=this.normalizeUrlPath(s,i)),o=i.match(Fl),o?l.push(this.normalizeUrlPath(o[2],o[3],o[1])):l.push(`${s}${i}`))}let h=null==t?void 0:t.match(Fl),c=h?this.normalizeUrlPath(h[2],h[3],h[1]):null;for(let t=0;t<l.length;t++)!0===pl.test(l[t])?u.push(l[t]):a.push(l[t]);!0===this.compareRules(c,u,a,"[^/]",".")&&(r=!0)}return r}playMedia(t){let e=t.play();void 0!==e&&"function"==typeof e.catch&&e.catch(t=>{})}openLink(t){let e=window.open();e.opener=null,e.location=t}downloadLocalFile(t,e){if(!window.URL)throw new Error("Cannot download");let s=window.URL.createObjectURL(new Blob([e])),i=document.createElement("a");i.href=s,i.download=t,i.textContent=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),window.URL.revokeObjectURL(s)}acquireChannelUrlRegex(t,e,s=""){var i;let n=null;if(cl.website.channels[t]&&(n=null==(i=this.cl[t])?void 0:i[e],!n)){let i=cl.chat.generateChannelLink("helpdesk");n=new RegExp(`^${Ti.parse().escape_regex(i)}${s}$`),this.cl[t]=this.cl[t]||{},this.cl[t][e]=n}return n}nextRender(t){_s(t)}setTimeout(t,e=0){let s=null;if(!Mr.Schedule)throw new Error(`Could not set timeout after ${e}ms, as the schedule wrapper is not yet available`);return s=Mr.Schedule.setTimeout(t,e),s}clearTimeout(t){if(!Mr.Schedule)throw new Error(`Could not clear timeout #${t}, as the schedule wrapper is not yet available`);Mr.Schedule.clearTimeout(t)}setInterval(t,e=0){let s=null;if(!Mr.Schedule)throw new Error(`Could not set interval every ${e}ms, as the schedule wrapper is not yet available`);return s=Mr.Schedule.setInterval(t,e),s}clearInterval(t){if(!Mr.Schedule)throw new Error(`Could not clear interval #${t}, as the schedule wrapper is not yet available`);Mr.Schedule.clearInterval(t)}addEventListener(t,e,s,i={}){return Mr.Listener.addEventListener(t,e,s,i)}removeEventListener(t,e,s){Mr.Listener.removeEventListener(t,e,s)}insertLinkQueryValues(t,e={}){let s=t;if((null==s?void 0:s.length)>0){let t="";for(let s in e)t&&(t+="&"),t+=`${s}=${encodeURIComponent(e[s])}`;if((null==t?void 0:t.length)>0){let e=s[s.length-1];"?"!==e&&"&"!==e&&(s+=!0===s.includes("?")?"&":"?"),s+=t}}return s}hl(t,e){let s=Ve.URL_IMAGE;return t.substring(0,s.length)===s?t:e}sr(){this.cl={}}},wl=/^(([^\s@]+)@([^\s@]+)\.([^\s@]+))$/,bl=new RegExp(["^(?:(?:\\(?(?:00|\\+)([1-4]\\d\\d|[1-9]\\d?)\\)?)?","[\\-\\.\\ \\\\\\/]?)?((?:\\(?\\d{1,}\\)?[\\-\\.\\ \\\\\\/]?){0,})","(?:[\\-\\.\\ \\\\\\/]?(?:#|ext\\.?|extension|x)[\\-\\.\\ \\\\/]?","(\\d+))?$"].join(""),"i"),yl=/^https?:\/\/(.+)$/,El=/^([A-Za-z0-9_\\-]{1,50})$/;const Cl=new class{isEmail(t){return wl.test(t)}isPhone(t){return bl.test(t)}isAvatar(t){return yl.test(t)}isData(t){let e=!1;if(t instanceof Object){e=vl.keys(t).length>0&&!0;for(let s in t){let i=t[s];if("string"!=typeof s||!0!==El.test(s)||"string"!=typeof i&&"boolean"!=typeof i&&"number"!=typeof i){e=!1;break}}}return e}areEvents(t){let e=!1;if(t instanceof Array){e=t.length>0&&!0;for(let s=0;s<t.length;s++)if("string"!=typeof t[s][0]||!t[s][0]||!1===vl.isEmpty(t[s][1])&&!1===this.isData(t[s][1])){e=!1;break}}return e}areSegments(t){let e=!1;if(t instanceof Array){e=!0;let s=[];for(let i=0;i<t.length;i++){let n=t[i]||"",r="";if("string"==typeof n&&(r=n.trim()),!r||r.length>80||s.includes(r)){e=!1;break}s.push(r)}}return e}},kl=["session:loaded","chat:initiated","chat:opened","chat:closed","message:sent","message:received","message:compose:sent","message:compose:received","user:email:changed","user:phone:changed","user:nickname:changed","user:avatar:changed","website:availability:changed","helpdesk:queried"],$l=/^(light|dark|auto)$/,Al=/^(default|colorized)$/,Bl=/^(default|([a-z0-9-]+))$/,xl=/^([a-f0-9]{64})$/;class jl extends Ze{constructor(t){super(),this.client=t,this._eventPipeMethods={on:this.dl,off:this.Dl},this.fl={}}reset(){var t,e,s;void 0===(null==(e=null==(t=this.client.Base._dollarCrisp)?void 0:t.__spool)?void 0:e.pending_actions)&&(null==(s=this.client.Base._dollarCrisp)?void 0:s.__spool)&&(this.client.Base._dollarCrisp.__spool.pending_actions=[])}do_chat_open(t=null){!0===this.client.Chat._isInitialized?(cl.chat.maximize(),"function"==typeof t&&t()):cl.minimized.paneOpenHandler(e=>{this.client.Chat.init(e,t)})}do_chat_close(){!0===this.client.Chat._isInitialized&&cl.chat.minimize()}do_chat_toggle(){!0===this.is_chat_closed()?this.do_chat_open():this.do_chat_close()}do_chat_show(){!1!==this.is_chat_hidden()&&(cl.base.is_hidden=!1,cl.base.force_show=!0,!0===this.client.Chat._isInitialized&&(this.client.Chat.Interface.requestDynamicSizingProperties(),this.client.Chat.Interface.applyChatFocus()))}do_chat_hide(){!1!==this.is_chat_visible()&&(cl.base.is_hidden=!0,cl.base.force_show=!1,!0===this.client.Chat._isInitialized&&this.client.Chat.Interface.applyChatFocus())}do_helpdesk_search(){if(!0!==cl.helpdesk.isAvailable())throw new Error("Helpdesk search is unavailable");this.do_chat_show(),this.do_chat_open(()=>{cl.helpdesk.showSearch()})}do_helpdesk_article_open(t,e,s=null,i=null){if("string"!=typeof t||!t)throw new Error("Invalid article locale");if("string"!=typeof e||!e)throw new Error("Invalid article slug");if(!0!==cl.helpdesk.isAvailable())throw new Error("Helpdesk article is unavailable");this.do_chat_show(),this.do_chat_open(()=>{cl.helpdesk.showArticle(t,e,s,i)})}do_helpdesk_query(t=""){this.client.Base.ensureSocket().then(()=>{Mr.Helpdesk.getArticleSearch(t,cl.locale.code)})}do_overlay_open(t=null){if(!0!==cl.overlay.open(t))throw new Error("Overlay is unavailable (was it disabled?)")}do_overlay_close(){cl.overlay.close()}do_message_send(t,e){this.client.Base.ensureSocket().then(()=>{let s=this.pl(t,e);null!==s.type&&null!==s.content&&this.client.Chat.startMaximized(()=>{let t=!0===cl.messages.triggerWillSendHooks()?500:0;if(!0===cl.base.runtime.tester_mode)return s.fingerprint=Mr.Message.generateFingerprint(),cl.messages.handleSent(s),void cl.messages.handleSentAcknowledgement(s);switch(s.type){case"text":Mr.Message.sendTextMessage(s.content,t);break;case"file":Mr.Message.sendFileMessage(s.content.name,s.content.url,s.content.type,t);break;case"animation":Mr.Message.sendAnimationMessage(s.content.url,s.content.type,t);break;case"audio":Mr.Message.sendAudioMessage(s.content.url,s.content.type,s.content.duration,t);break;case"picker":Mr.Message.sendPickerMessage(s.content.id,s.content.text,s.content.choices,t);break;case"field":Mr.Message.sendFieldMessage(s.content.id,s.content.text,s.content.explain,t);break;case"carousel":Mr.Message.sendCarouselMessage(s.content.text,s.content.targets,t)}})})}do_message_show(t,e,s=null,i=!1){this.client.Base.ensureSocket().then(()=>{let n=this.pl(t,e);null!==n.type&&null!==n.content&&cl.messages.dispatchLocal(n.type,n.content,s,i)})}do_message_read(){!0===this.client.Chat._isInitialized&&cl.chat.eachSessionId(t=>{Mr.Message.markMessagesAsRead(t)})}do_message_thread_start(t){if("string"!=typeof t||!t)throw new Error("Invalid message thread start text");if(!0!==this.client.Chat._isInitialized)throw new Error("Chat must be active for message thread to start");this.client.Base.ensureSocket().then(()=>{Mr.Message.sendMessageThread("start",t)})}do_message_thread_end(t=""){if("string"!=typeof t&&!t)throw new Error("Invalid message thread end text");if(!0!==this.client.Chat._isInitialized)throw new Error("Chat must be active for message thread to end");this.client.Base.ensureSocket().then(()=>{Mr.Message.sendMessageThread("end",t||"")})}do_session_reset(t=!1){!1===t&&(this.client.Base.uninsertClient(),this.client.Base.reset()),this.client.Base.updateSocketCookieKey(!1,!0),Mr.Session.reset(),!1===t?vl.nextRender(()=>{this.client.Base.reTriggerLoader()}):document.location.reload()}do_trigger_run(t){if(!0!==this.client.Trigger.run(t))throw new Error("Trigger does not exist")}do_bot_scenario_run(t){if("string"!=typeof t||!t)throw new Error("Invalid bot scenario identifier");this.client.Base.ensureSocket(!0).then(()=>{Mr.Session.sendPluginAction("urn:crisp.im:bot:0",{action:"run",scenario:t}),Mr.Session.sendPluginAction("urn:crisp.im:hugo:0",{action:"run",scenario:t})})}is_chat_opened(){return!(!0!==cl.chat.is_opened||!0!==this.client.Chat._isInitialized)}is_chat_closed(){return!1===this.is_chat_opened()&&!0}is_chat_visible(){return!1===this.is_chat_hidden()&&!0}is_chat_hidden(){return(null===this.client.Base._containerEl||!0===cl.base.is_hidden||null===this.client.Base._containerEl.offsetParent)&&!0}is_chat_small(){return!1===cl.base.is_full_view&&!0}is_chat_large(){return!1===this.is_chat_small()&&!0}is_session_ongoing(){return(!0===cl.messages.conversation.has_sent_messages||!0===cl.messages.conversation.has_received_messages)&&!0}is_website_available(){return cl.availability.users_available&&!0}is_overlay_opened(){return!0===cl.overlay.is_opened&&!0}is_overlay_closed(){return!1===this.is_overlay_opened()&&!0}get_chat_unread_count(){return cl.chat.conversations.all_unread_count||0}get_message_text(){return!0===this.client.Chat._isInitialized&&cl.chat.message_field_value||""}get_session_identifier(){return cl.base.session_id||null}get_session_data(t=null){return Mr.Session.getData(t)||null}get_user_email(){return Mr.Session.getEmail()||null}get_user_phone(){return Mr.Session.getPhone()||null}get_user_nickname(){return Mr.Session.getNickname()||null}get_user_avatar(){return Mr.Session.getAvatar()||null}get_user_company(){var t,e;let s=Mr.Session.getCompany()||null;return(null==(t=null==s?void 0:s.employment)?void 0:t.title)&&(s.employment=[s.employment.title,s.employment.role]),(null==(e=null==s?void 0:s.geolocation)?void 0:e.country)&&(s.geolocation=[s.geolocation.country,s.geolocation.city||null]),s}set_message_text(t=null){cl.chat.setMessageText(t)}set_session_data(t,e){this.client.Base.ensureSocket(!0).then(()=>{let s=t instanceof Array&&t[0]instanceof Array?t:[[t,e]],i={};for(let t=0;t<s.length;t++){let e=s[t][1];e&&"string"==typeof e&&("false"===e?e=!1:"true"===e?e=!0:!1===isNaN(Number(e))&&(e=Number(e))),i[s[t][0]]=e}if(!0!==Cl.isData(i))throw new Error("Invalid data");Mr.Session.setData(i);for(let t in i)this.client.Trigger.doEvent("user_data",{key:t,value:i[t]})})}set_session_segments(t,e=!1){this.client.Base.ensureSocket(!0).then(()=>{if(!t||!0!==Cl.areSegments(t))throw new Error("Invalid segments value");Mr.Session.setSegments(t,e)})}set_session_event(t,e=null,s=null){this.client.Base.ensureSocket(!0).then(()=>{let i=t instanceof Array&&t[0]instanceof Array?t:[[t,e,s]];if(!0!==Cl.areEvents(i))throw new Error("Invalid event text or data");Mr.Session.sendEvent(i);for(let t=0;t<i.length;t++)this.client.Trigger.doEvent("user_event",{text:i[t][0]})})}set_user_email(t=null,e=null){if(!t||!0!==Cl.isEmail(t))throw new Error("Invalid email");if(null!==e&&!0!==xl.test(e))throw new Error("Invalid verify signature (should be lowercase HMAC-SHA256)");Mr.Session.setEmail(t,!1,e),this._l(),this.event("user:email:changed",t)}set_user_phone(t=null){if("number"==typeof t&&(t=`${t}`),!t||!0!==Cl.isPhone(t))throw new Error("Invalid phone");Mr.Session.setPhone(t),this._l(),this.event("user:phone:changed",t)}set_user_nickname(t=null){if("string"!=typeof t||!t)throw new Error("Invalid nickname");Mr.Session.setNickname(t),this.event("user:nickname:changed",t)}set_user_avatar(t=null){if(!t||!0!==Cl.isAvatar(t))throw new Error("Invalid avatar");Mr.Session.setAvatar(t),this.event("user:avatar:changed",t)}set_user_company(t,e={}){var s,i;if(!t)throw new Error("Invalid company name");{let n={name:t};if(e.url){if("string"!=typeof e.url)throw new Error("Invalid URL");n.url=e.url}if(e.description){if("string"!=typeof e.description)throw new Error("Invalid description");n.description=e.description}if(null==(s=e.employment)?void 0:s[0]){if("string"!=typeof e.employment[0]||"string"!=typeof e.employment[1])throw new Error("Invalid employment");n.employment={title:e.employment[0],role:e.employment[1]}}if(null==(i=e.geolocation)?void 0:i[0]){if("string"!=typeof e.geolocation[0]||e.geolocation[1]&&"string"!=typeof e.geolocation[1])throw new Error("Invalid geolocation");n.geolocation={country:e.geolocation[0],city:e.geolocation[1]||null}}Mr.Session.setCompany(n)}}config_availability_tooltip(t=!1){this.client.Base.updateConfiguration("availability_tooltip",t),!0===t&&!0!==cl.base.is_full_view&&(cl.minimized.pane.general_entice.visible=!0)}config_hide_vacation(t=!1){this.client.Base.updateConfiguration("hide_vacation",t)}config_hide_on_away(t=!1){this.client.Base.updateConfiguration("hide_on_away",t)}config_hide_on_mobile(t=!1){this.client.Base.updateConfiguration("hide_on_mobile",t)}config_position_reverse(t=!1){this.client.Base.updateConfiguration("position_reverse",t)}config_sound_mute(t=!1){Po.mute(t)}config_color_theme(t=null){Yr.applyTheme(t)}config_color_mode(t=null){if(!t||!0!==$l.test(t))throw new Error("Invalid color mode");cl.website.chat.color_mode=t}config_layout_theme(t="default"){if(!t||!0!==Al.test(t))throw new Error("Invalid layout theme");cl.website.chat.layout_theme=t}config_tile(t="default"){if(!t||!0!==Bl.test(t))throw new Error("Invalid tile");cl.website.chat.tile=t}config_container_index(t=null){Yr.applyContainerIndex(t)}config_show_operator_count(t=!0){cl.chat.show_operator_count=t}event(t,e=[]){if(!kl.includes(t))throw new Error(`Event namespace not recognized: ${t}`);"function"==typeof this.fl[t]&&vl.nextRender(()=>{try{this.fl[t].apply(window,e instanceof Array?e:void 0!==e?[e]:[])}catch{}})}unstackPending(){var t,e,s,i;let n=null==(e=null==(t=this.client.Base._dollarCrisp)?void 0:t.__spool)?void 0:e.pending_actions;if(null==(i=null==(s=this.client.Base._dollarCrisp)?void 0:s.__spool)||delete i.pending_actions,(null==n?void 0:n.length)>0)for(let r=0;r<n.length;r++)try{Ol.push(n[r])}catch{}}dl(t,e){if("function"!=typeof e)throw new Error("Handler must be a function");this.fl[t]=e}Dl(t){void 0!==this.fl[t]&&delete this.fl[t]}_l(){!0===this.client.Chat._isInitialized&&(!0===cl.messages.conversation.has_sent_messages&&cl.chatAlert.update("wait_reply","show"),cl.chat.eachSessionId(t=>{cl.chatAlert.update("warn_reply","hide",t),cl.chatAlert.update("email_invalid","hide",t),cl.chatIntent.update("identity",!1,t),cl.messages.checkFormIdentifyUnlock(t)}))}pl(t,e){let s={type:null,content:null};switch(t){case"text":if("string"!=typeof e||!e)throw new Error("Invalid text message");s.type="text",s.content=e;break;case"file":if("object"!=typeof e||!e.name||!e.url||!e.type)throw new Error("Invalid file message");s.type="file",s.content={name:e.name,url:e.url,type:e.type};break;case"animation":if("object"!=typeof e||!e.url||!e.type)throw new Error("Invalid animation message");s.type="animation",s.content={url:e.url,type:e.type};break;case"audio":if("object"!=typeof e||!e.url||!e.type||!e.duration)throw new Error("Invalid audio message");s.type="audio",s.content={url:e.url,type:e.type,duration:e.duration};break;case"picker":if("object"!=typeof e||!e.id||!e.text||0===(e.choices||[]).length)throw new Error("Invalid picker message");s.type="picker",s.content={id:e.id,text:e.text,choices:e.choices};break;case"field":if("object"!=typeof e||!e.id||!e.text||!e.explain)throw new Error("Invalid field message");s.type="field",s.content={id:e.id,text:e.text,explain:e.explain};break;case"carousel":if("object"!=typeof e||!e.text||0===(e.targets||[]).length)throw new Error("Invalid carousel message");s.type="carousel",s.content={text:e.text,targets:e.targets}}return s}}const Il=["get","set","is","do","on","off","config","safe","help"],Sl=["on","off"],Rl=/:/g;const Ol=new class{constructor(){this._safeMode=!1,this.sr()}reset(){this.sr()}push(t){var e;let s=(null==(e=window.$__CRISP_INSTANCE)?void 0:e.__spool)||{};void 0!==s.pending_actions?s.pending_actions.push(t):t[0]&&void 0!==t[1]&&Il.includes(t[0])&&"function"==typeof this[t[0]]&&this[t[0]](t[1],t[2]||[])}get(t,e=[]){return this.ml("get",t,this.gl(e))}set(t,e=[]){return this.ml("set",t,this.gl(e))}is(t){return this.ml("is",t)}do(t,e=[]){return this.ml("do",t,this.gl(e))}on(t,e){return this.Fl("on",t,[t,e])}off(t){return this.Fl("off",t,[t])}config(t,e=[]){return this.ml("config",t,this.gl(e))}safe(t=!0){if("boolean"!=typeof t)throw new Error("Safe mode value must be 'true' or 'false'.");this._safeMode=t}help(){let t=[],s=e().Action,i=Object.getOwnPropertyNames(Object.getPrototypeOf(s));for(let e=0;e<i.length;e++){let n=i[e].split("_");n.length>1&&Il.includes(n[0])&&"function"==typeof s[i[e]]&&t.push(`$crisp.${n[0]}('${n.slice(1).join(":")}')`)}for(let e=0;e<Sl.length;e++)for(let s=0;s<kl.length;s++)t.push(`$crisp.${Sl[e]}('${kl[s]}')`);return t}gl(t){return t?t instanceof Array?t:[t]:[]}ml(t,s,i=[]){let n=null,r=null;try{let r=`${t}_${(s||"").replace(Rl,"_")}`;"function"==typeof e().Action[r]?n=e().Action[r].apply(e().Action,i):this.vl(s)}catch(o){!0!==this._safeMode&&(r=o)}if(null!==r)throw r;return n}Fl(t,s,i=[]){let n=null,r=null;try{let r=e().Action._eventPipeMethods[t];if("function"!=typeof r)throw new Error(`No such event method for action: ${t}`);kl.includes(s)?n=r.apply(e().Action,i):this.vl(s)}catch(o){!0!==this._safeMode&&(r=o)}if(null!==r)throw r;return n}vl(t){throw new Error(`No such namespace: ${t} - Call $crisp.help() for a list of available actions.`)}sr(){this._safeMode=!1}};function zl(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}function Pl(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}const Tl={capture:!1};class Ll extends Ze{constructor(t){super(),this.client=t,this._isInactive=!1,this._isZombie=!1,this.sr()}init(){this.wl()}reset(){null!==this.bl&&vl.clearTimeout(this.bl),this.yl&&screen.orientation&&(screen.orientation.removeEventListener("change",this.yl),this.yl=null),this.sr()}triggerInteracted(t=!1){cl.base.has_interacted=!0,this.El(),!0===t&&this.Cl()}checkActivityAutokill(){null===this.kl&&this.$l(),null===this.Al&&this.Bl()}wl(){this.xl(),this.jl(),this.Il(),this.Sl()}xl(){vl.addEventListener("window","resize",()=>{null!==this.bl&&(vl.clearTimeout(this.bl),this.bl=null),cl.base.is_mobile_view?(this.client.Chat.executeResize(),vl.setTimeout(()=>{this.client.Chat.executeResize()},300),this.bl=vl.setTimeout(()=>{this.bl=null,this.client.Chat.executeResize()},800)):this.client.Chat.executeResize()})}jl(){screen.orientation&&(this.yl=()=>{screen.orientation.type,screen.orientation.angle,Vi.blurFromForeground(),vl.setTimeout(()=>{this.client.Chat.executeResize()},300),vl.setTimeout(()=>{this.client.Chat.executeResize()},800)},screen.orientation.addEventListener("change",this.yl))}Il(){this.El(),vl.addEventListener("window","click",Pl(this.Rl,this),Tl),vl.addEventListener("window","touchend",Pl(this.Rl,this),Tl),vl.addEventListener("window","touchmove",Pl(this.Rl,this),Tl),vl.addEventListener("window","keydown",Pl(this.Rl,this),Tl),vl.addEventListener("window","mousemove",Pl(this.El,this),Tl),vl.addEventListener("window","focus",Pl(this.El,this),Tl),vl.addEventListener("window","blur",Pl(this.El,this),Tl)}Sl(){this.Cl()}Rl(){this.triggerInteracted()}El(){null!==this.kl&&vl.clearTimeout(this.kl),this.kl=vl.setTimeout(()=>{this.kl=null,this.$l()},6e5),!0===this._isInactive&&!1===this._isZombie&&Mr.socket.connect(),this._isInactive=!1,Mr.Session.markActive()}$l(){!0===Mr.socket.connected&&(this._isInactive=!0,Mr.socket.disconnect())}Cl(){null!==this.Al&&vl.clearTimeout(this.Al),this.Al=vl.setTimeout(()=>{this.Al=null,this.Bl()},36e5),!0===this._isZombie&&Mr.socket.connect(),this._isZombie=!1}Bl(){var t;!0!==Mr.socket.connected&&!0!==this._isInactive||(this._isZombie=!0,!0===Mr.socket.connected&&(null==(t=Mr.socket)||t.disconnect()))}sr(){this._isInactive=!1,this._isZombie=!1,this.kl=null,this.Al=null,this.bl=null,this.yl=null}}class Ml extends Ze{constructor(t){super(),this.client=t,this.Ol=!1,this.zl=null,this.sr()}init(){this.Pl()}reset(){this.sr()}toggleChatMode(t=!1){"chat"===cl.chat.mode||!0!==t&&!0===cl.helpdesk.settings_only||(cl.chat.mode="chat",this.requestDynamicSizingProperties())}toggleVisibility(t="pane",e=!0){let s=(t,e)=>{!0===(t!==e)&&(cl.chat.is_opened=t,vl.nextRender(()=>{this.Tl(t)}))};(t=>{let i=cl.chat.is_opened;if(cl.chat.is_maximized=t,!0===e){let e=!0!==t?"animate_minimize":"animate_maximize";!0===t?cl.chat.is_opened=!0:this.Tl(!1),null!==this.Ll&&(vl.clearTimeout(this.Ll),cl.chat.animate_minimize=!1,cl.chat.animate_maximize=!1),cl.chat[e]=!0,this.Ll=vl.setTimeout(()=>{this.Ll=null,cl.chat[e]=!1,s(t,i)},350)}else s(t,i)})("pane"!==t),!0===e&&this.applyChatFocus()}toggleSocketState(t=!1,e=!1){null!==this.Ml&&vl.clearTimeout(this.Ml),this.Ml=vl.setTimeout(()=>{this.Ml=null,cl.chat.has_offline=!0!==t;let s={failed:e,inactive:this.client.Event._isInactive||this.client.Event._isZombie||!1};for(let t in s)cl.chat[`reconnect_${t}`]=s[t]},!0===t?0:1e3)}applyChatFocus(){let t=cl.chat.has_chat_focus,e=cl.chat.conversations.current_session_id||null;Mr.Message.setMessagesInView(t,e)}pane(){this.ql(),this.zl=Hr.dom('<div class="cc-1kr6o cc-cxjxh cc-s0g61 cc-jx6a3"><div class="cc-rsqmy" :data-visible="$store.chat.is_opened" :data-chat-status="$store.chat.current_status_marker" :data-animate-minimize="$store.chat.animate_minimize" :data-animate-maximize="$store.chat.animate_maximize"></div><div class="cc-18ov6" v-crisp-accessibility="{ role: \'button\' }" @click.prevent.stop="$store.chat.onPaneToggleClick" :data-visible="$store.chat.is_opened" :data-maximized="$store.chat.is_opened" :data-animate-maximize="$store.chat.animate_maximize" :data-animate-minimize="$store.chat.animate_minimize" :data-pane-animate-entrance="$store.minimized.pane?.animate_entrance" :aria-label="$store.chat.is_opened ? $render._e(\'minimized\', \'tooltip_button_close_hint\') : $render._e(\'minimized\', \'tooltip_button_open_hint\')" data-is-failure="false"><span class="cc-1442g"><span class="cc-17cli" v-if="!$store.chat.is_opened &amp;&amp; $store.minimized.tooltips?.new_messages?.visible" @click="$store.chat.onPaneTooltipNewMessagesClick" :class="{ \'cc-1w9i4\': $store.minimized.tooltips?.new_messages?.animate }" data-id="new_messages"><span class="cc-1r8vt" v-if="$store.chat.current_unread_preview"><span class="cc-tk1m5"><span class="cc-gequn cc-tl9oa"></span></span><span class="cc-4v8ny"><span class="cc-p1ap2" v-for="message in $store.chat.current_unread_preview.preview" :class="{ \'cc-14rns\': message.animate &amp;&amp; $store.feature.has_css_animations  }"><span class="cc-6ib0n"><span class="cc-vkkvp"><span class="cc-zq855"></span><div class="cc-681tm"><span class="cc-54oa2 cc-1egul"><span class="cc-17813 cc-1e566" :style="{ backgroundImage: (\'url(\' + $render._a(120, (message.user?.type || message.from), message.user?.user_id, message.user?.avatar) + \') !important\') }"></span></span><div class="cc-1hwdz"><span class="cc-xnulb cc-1plpv" v-if="message?.type === \'text\'" v-html="$render._f(message.content)"></span><span class="cc-xnulb cc-1plpv" v-else-if="message?.type === \'picker\' || message?.type === \'field\' || message?.type === \'carousel\'" v-html="$render._f(message.content.text)"></span><span class="cc-xnulb" v-else-if="message?.type === \'file\' || message?.type === \'animation\'"><span class="cc-2gvk5" v-if="message?.content?.type === \'image/gif\' || message?.type === \'animation\'" :style="{ backgroundImage: (\'url(\' + $render.imageUrlOriginal(message.content.url) + \') !important\') }"></span><span class="cc-2gvk5" v-else-if="message?.content?.type === \'image/jpeg\' || message?.content?.type === \'image/jpg\' || message?.content?.type === \'image/webp\' || message?.content?.type === \'image/png\'" :style="{ backgroundImage: (\'url(\' + $render.imageUrlResize(message.content.url, 180, 180) + \') !important\') }"></span><span class="cc-xnulb cc-1plpv" v-else>ð¦ {{ message?.content?.name }}</span></span><span class="cc-xnulb cc-1plpv" v-else-if="message?.type === \'audio\'">ð§</span><span class="cc-h63yd cc-vqf16">{{ (message.user?.type === \'website\') ? message.user?.nickname : $render._n(message.user?.nickname) }}</span></div></div></span></span><span class="cc-7iqkz"></span></span></span></span><span class="cc-1jn3x" v-if="!$store.helpdesk.settings_only"><span class="cc-1b9px"><span class="cc-1xcml"></span><span class="cc-17f3j cc-vqf16" data-for-id="new_messages">{{ $render._e("chat", "minimized_tooltip_message_compose") }}</span></span></span></span></span><span class="cc-1qbp0" :data-is-ongoing="$store.minimized.pane?.is_ongoing" :data-has-unread="$store.chat.conversations.all_unread_count &gt; 0"><span class="cc-otlyh" data-prefer-search="false" data-id="chat_opened"><span class="cc-xrw89" v-if="$store.partial.bundle.pending.chat"><span class="cc-16p6v cc-975hf"></span></span><span class="cc-11f3x" v-else><span class="cc-fajze cc-1egul" v-if="$store.website?.chat?.website_logo"><span class="cc-1p2bq cc-1e566" :style="{ backgroundImage: (\'url(\' + $render._a(120, \'website\', $store.base.website?.id) + \') !important\') }"></span></span><span class="cc-fajze cc-1egul" v-else-if="$store.chat.current_ongoing_operator?.url"><span class="cc-1p2bq cc-1e566" :style="{ backgroundImage: (\'url(\' + $store.chat.current_ongoing_operator?.url + \') !important\') }"></span></span><span class="cc-fajze cc-1egul" v-else-if="$store.website?.chat?.last_operator_face &amp;&amp; $store.website?.website?.active_operators?.length &gt; 0"><span class="cc-1p2bq cc-1e566" :style="{ backgroundImage: (\'url(\' + $render._a(120, \'operator\', $store.website?.website?.active_operators[0]?.user_id, $store.website?.website?.active_operators[0]?.avatar) + \') !important\') }"></span></span></span></span><span class="cc-1m2rp"></span><span class="cc-s1rdc cc-vqf16" v-if="$store.chat.conversations.all_unread_count &gt; 0">{{ $store.chat.conversations.all_unread_count }}</span></span></div><span class="cc-lpuhc" :data-visible="$store.chat.is_opened || $store.minimized.tooltips?.new_messages?.visible" :data-animate-minimize="$store.chat.animate_minimize" :data-animate-maximize="$store.chat.animate_maximize"><span class="cc-uh1kj"></span></span></div>'),this.client.Base._containerEl.innerHTML="",this.client.Base._containerEl.appendChild(this.zl),Hr.vue(this.zl),this.client.Chat.Viewport.bindAll(),cl.chat.is_maximized=!1,cl.chat.is_opened=!1}requestDynamicSizingProperties(t=!1){!0!==this.Ol&&(this.Ol=!0,vl.nextRender(()=>{"function"==typeof window.requestAnimationFrame?window.requestAnimationFrame(()=>{this.Ul(t),this.Ol=!1}):(this.Ul(t),this.Ol=!1)}))}refreshResizePageScroll(t=!1){if(window.scroll&&!0===cl.chat.is_opened&&this.Vl>-1)if(!0!==t&&cl.base.is_mobile_view)window.scrollTo(0,-1);else{let t=document.querySelector("html");t&&t.classList.remove("cc-1ge4k"),this.Nl&&(vl.removeEventListener("document","touchstart",this.Nl),this.Nl=null),this.Hl&&(vl.removeEventListener("document","touchmove",this.Hl),this.Hl=null),window.scroll(window.scrollX,this.Vl),this.Vl=-1}}ql(){let t={status:{url:cl.chat.generateChannelLink("status")}};vl.merge(cl.chat,t)}Ul(t=!1){var e;if(!(null==(e=cl.base.runtime)?void 0:e.mount)&&!0===this.client.Action.is_chat_visible()){let e,s=cl.base.is_full_view,i=Gi.getCustomization("position","chatbox");cl.base.applySizing(),!0===cl.base.is_large_view?(this.Wl=730,this.Jl=400,e=600):!0===cl.base.is_small_view?(this.Wl=490,this.Jl=320,e=440):(this.Wl=610,this.Jl=360,e=500);let n="helpdesk"===cl.chat.mode&&cl.helpdesk.viewer.url&&!0;if(!1===n&&!0===cl.chat.was_auto_expanded.helpdesk_article&&(cl.chat.was_auto_expanded.helpdesk_article=!1),this.zl&&!0===n&&!0===cl.chat.was_auto_expanded.helpdesk_article||!0===cl.chat.is_expanded){let t=this.zl.querySelector(".cc-rsqmy"),s=window.innerHeight-t.getBoundingClientRect().bottom;this.Jl=e,this.Wl=window.innerHeight-s-22}if(!0===cl.base.is_full_view&&(this.Wl=window.innerHeight,this.Jl=window.innerWidth,window.visualViewport&&(this.Wl=window.visualViewport.height+window.visualViewport.offsetTop)),!1===cl.base.is_full_view&&(null==i?void 0:i.default_button_vertical)&&(this.Wl-=i.default_button_vertical),this.zl&&(!0===this.client.Chat._isInitialized||!0===t)){let t=this.zl.querySelector(".cc-rsqmy");if(s&&!1===cl.base.is_full_view){let e=t.style.getPropertyValue("transition");t.style.setProperty("transition","none","important"),requestAnimationFrame(()=>{t.style.setProperty("transition",e,"important")})}t.style.setProperty("width",`${this.Jl}px`,"important"),t.style.setProperty("height",`${this.Wl}px`,"important"),cl.base.is_full_view&&!0===this.client.Action.is_chat_visible()?this.client.Chat.Viewport.adapt():this.client.Chat.Viewport.unadapt()}Po.allow(!cl.base.is_mobile_view)}}Tl(t=!1){if(cl.base.is_mobile_view&&window.scroll)if(!0===t){if(-1===this.Vl){this.Vl=window.scrollY;let t=document.querySelector("html");t&&t.classList.add("cc-1ge4k"),window.scroll(window.scrollX,0);let e=0;this.Nl&&(vl.removeEventListener("document","touchstart",this.Nl),this.Nl=null),this.Nl=vl.addEventListener("document","touchstart",t=>{var s;(null==(s=t.changedTouches)?void 0:s[0])&&(e=t.changedTouches[0].pageY)}),this.Hl&&(vl.removeEventListener("document","touchmove",this.Hl),this.Hl=null),this.Hl=vl.addEventListener("document","touchmove",t=>{var s;if(document.activeElement&&(null==(s=t.changedTouches)?void 0:s[0])){"input"!==document.activeElement.tagName&&"textarea"!==document.activeElement.tagName||t.preventDefault();let s=t.changedTouches[0].pageY||0;Math.abs(s-e)>10&&document.activeElement.blur()}},{passive:!1,capture:!0})}}else this.refreshResizePageScroll(!0);else this.refreshResizePageScroll(!0)}Pl(){cl.chat.has_window_focus=(!window.hasFocus||window.hasFocus())&&!0,vl.addEventListener("window","focus",()=>{cl.chat.has_window_focus=!0,this.applyChatFocus()},{capture:!1}),vl.addEventListener("window","blur",()=>{cl.chat.has_window_focus=!1,this.applyChatFocus()},{capture:!1})}sr(){this.Ml=null,this.Ll=null,this.Vl=-1,this.Nl=null,this.Hl=null}}const ql=/;/g;class Ul extends Ze{constructor(t){super(),this.client=t,this.sr()}init(){}reset(){this.sr()}bindAll(){this._viewportEl=document.querySelector('head meta[name="viewport"]')}adapt(){if(!0===cl.base.is_full_view){if(!1===this.Gl){null===this.Kl&&(this.Kl=this.Gn());let t=vl.clone(this.Kl);t.width="device-width",t["initial-scale"]="1",t["maximum-scale"]="1",t["user-scalable"]="0";let e=this.Yl(t);null!==this._viewportEl?this._viewportEl.setAttribute("content",e):(this._viewportEl=document.createElement("meta"),this._viewportEl.setAttribute("name","viewport"),this._viewportEl.setAttribute("content",e),document.querySelector("head").appendChild(this._viewportEl))}this.Gl=!0}else this.Gl=!1}unadapt(){if(!0===this.Gl){if(null!==this._viewportEl&&this._viewportEl.length>0){let t=this.Yl(this.Kl);t?this._viewportEl.setAttribute("content",t):(this._viewportEl.remove(),this._viewportEl=null)}this.Gl=!1}}Gn(){let t={};if(null!==this._viewportEl){let e=this._viewportEl.getAttribute("content").trim().replace(ql,",");if(e){let s;s=!0===e.includes(",")?e.split(","):[e];for(let e=0;e<s.length;e++){let i=s[e];if(!0===i.includes("=")){let e=i.split("="),s=e[0].trim(),n=e[1].trim();s&&n&&(t[s]=n)}}}}return t}Yl(t){let e="",s=[];for(let i in t)t.hasOwnProperty(i)&&s.push([i,t[i]].join("="));return e=s.join(", "),e}sr(){this._viewportEl=null,this.Gl=!1,this.Kl=null}}class Vl extends Ze{constructor(t){super(),this.client=t,this.Interface=new Ml(this.client),this.Viewport=new Ul(this.client),this.sr()}init(t=null,e=null){!0!==this._isInitialized?(null!==e&&this.Zl.push(e),!0!==this.Xl&&(this.Xl=!0,null!==t&&cl.state.restore(t),this.client.Partial.spawnFeatureBundle("chat",()=>Ji(()=>import("./features/chat_default_439a0bf.js").then(t=>t.m),__vite__mapDeps([0,4])),e=>{this.Ql(t,!0),e.default(".cc-rsqmy")},e=>{Ke.error(e),this.Ql(t,!1)}))):"function"==typeof e&&e()}reset(){this.sr()}startMinimized(t=null){this.tu(!1,t)}startMaximized(t=null){this.tu(!0,t)}executeResize(){!0===this._isInitialized?(this.Interface.refreshResizePageScroll(),this.Interface.requestDynamicSizingProperties()):cl.base.applySizing()}Ql(t=null,e=!0){if(this.Xl=!1,!0===e){for(this.eu(),this.client.Chat.Interface.pane(),this.client.Base.updateSocketCookieKey(!1),this.su(t),this._isInitialized=!0;this.Zl.length>0;)this.Zl.shift()();cl.messages.checkUserIdentity(!0)}else this.Zl=[]}tu(t=!1,e=null){let s=()=>{"function"==typeof e&&e()};!0!==this._isInitialized?this.init({maximized:t},()=>{cl.state.propagate("maximized",t,cl.base.session_id,!0),s()}):s()}eu(){let t,e=[this.client.Chat.Viewport,this.client.Chat.Interface];for(t=0;t<e.length;t++)e[t].init()}su(t=null){null===t&&this.client.Action.event("chat:initiated"),cl.availability.apply(),Mr.Socket.getState(),Po.initialize("events"),cl.chat.eachSessionId(t=>{cl.state.initialize(t),cl.messages.restoreHistory(t)})}sr(){this._isInitialized=!1,this.Xl=!1,this.Zl=[]}}class Nl extends Ze{constructor(t){super(),this.client=t}init(t=!0,e=!1,s=!1,i=!0){!0!==s&&cl.chat.eachSessionId(t=>{Mr.Message.getMessageHistory(t)}),this.su(e,s,t,i)}reset(){}su(t=!1,e=!1,s=!1,i=!0){!0!==e?cl.minimized.paneAuthorized(t,s,i):cl.minimized.paneUnauthorized(t,i),!0===cl.base.runtime.lock_maximized&&cl.minimized.paneOpenHandler(t=>{this.client.Chat.init(t)})}}const Hl=/\{\s*\[native code\]\s*\}$/;const Wl=new class extends Ze{constructor(){super(),this.sr()}reset(){this.sr()}scheduleWarnIncompatible(t=!1){null!==this.iu&&clearTimeout(this.iu),this.iu=setTimeout(()=>{this.iu=null,!0!==Ol._safeMode&&(this.nu(),this.ru())},!0===t?0:2e4)}nu(){(document.characterSet||document.charset||"").toUpperCase()}ru(){let t=window;if((null==t?void 0:t.console)&&"function"==typeof t.console.warn&&"function"==typeof Function.prototype.toString){let e,s,i,n,r=[[null,t,["eval","escape","unescape","decodeURI","encodeURI","decodeURIComponent","encodeURIComponent","setTimeout","clearTimeout","setInterval","clearInterval","parseInt","parseFloat","RTCPeerConnection","MutationObserver","XMLHttpRequest","AudioContext","WebSocket","Proxy","Text","Comment"]],[null,t,["Array","Object","String","Number","Date","Function","RegExp","Symbol","Set","Map","WeakMap","Event","Error"]],["Array",t.Array,["from","isArray"]],["Array.prototype",t.Array.prototype,["push","pop","indexOf","includes","sort","splice","slice","shift","unshift","map","filter","find","findIndex","forEach"]],["Object",t.Object,["assign","create","keys","values","is","isExtensible","defineProperty","defineProperties","getOwnPropertyNames","getOwnPropertyDescriptors"]],["Object.prototype",t.Object.prototype,["hasOwnProperty","propertyIsEnumerable","toString"]],["String",t.String,["fromCharCode"]],["String.prototype",t.String.prototype,["indexOf","charAt","charCodeAt","trim","toLowerCase","toUpperCase","slice","replace","match"]],["Math",t.Math,["random","round","floor","ceil","abs"]],["Date",t.Date,["now"]],["Date.prototype",t.Date.prototype,["getTime","toISOString"]],["Function.prototype",t.Function.prototype,["bind","apply","call"]],["RegExp.prototype",t.RegExp.prototype,["test","exec"]],["Event.prototype",t.Event.prototype,["preventDefault","stopPropagation"]],["Reflect",t.Reflect,["get","set","has","ownKeys","deleteProperty"]],["document",t.document,["querySelector","querySelectorAll","createElement","createEvent","addEventListener","removeEventListener"]],["JSON",t.JSON,["stringify","parse"]],["localStorage",t.localStorage,["setItem","getItem","removeItem"]],["sessionStorage",t.sessionStorage,["setItem","getItem","removeItem"]]],o=[];for(let t=0;t<r.length;t++)if(e=r[t],i=e[1],void 0===i)o.push(e[0]||"[root]");else{s=e[2]||[];for(let t=0;t<s.length;t++)n=i[s[t]],void 0===n||Hl.test(String(n))||(null!==e[0]?o.push(`${e[0]}.${s[t]}`):o.push(s[t]))}}}sr(){this.iu=null}};const Jl={socket:!0,buster:1},Gl={childList:!0,attributes:!1,subtree:!1,characterData:!1};class Kl{constructor(t){this.client=t,this._dollarCrisp=null,this.ou(),this.sr()}init(t={}){!1===this._isInitialized?(this._isInitialized=!0,this._dollarCrisp=t.dollarCrisp||null,cl.base.cookie_expire=t.cookieExpire||null,cl.base.cookie_domain=t.cookieDomain||null,cl.base.website.domain=t.websiteDomain||null,cl.base.website.id=t.websiteId||null,cl.base.token_id=t.tokenId||null,cl.base.page_url=t.pageUrl||null,cl.base.page_domain=t.pageDomain||null,cl.base.browser_locales=t.browserLocales||[],cl.base.browser_useragent=t.browserUseragent||null,cl.base.browser_timezone=t.browserTimezone||null,cl.base.browser_capabilities=t.browserCapabilities||[],cl.base.runtime=t.runtimeConfiguration||{},cl.base.runtime.url_client&&(Ve.URL_CLIENT=cl.base.runtime.url_client),cl.base.runtime.url_image&&(Ve.URL_IMAGE=cl.base.runtime.url_image),this.lu=t.readyTrigger||null,this.uu=t.resetHandler||null,Wl.scheduleWarnIncompatible(!1),this.au().then(t=>{this.hu=t.socket,this.cu=t.buster||1,this.du=t.endpoints||{};let e=!document.cookie.includes(this.Du(!0))&&!1!==this.hu&&!0;!1===e&&!0===cl.base.runtime.lock_maximized&&(e=!0),!0===e?this.fu():this.runStatic(),this.client.Event.init()}).catch(t=>{"invalid_website_id"===t&&this.runError()})):cl.base.runtime.mount&&this.pu(0)}reset(){let t=this.uu;this.sr(),this.ou(),this.uu=t,Ye.forEach(t=>{try{"function"==typeof t.fn&&t.fn()}catch(e){Ke.error(e)}})}spawnClient(t=!1){t&&(cl.base.error_mode=!0,Ke.error("Spawn client with error mode")),this._u(),Ti.init(),!0!==t&&(Mr.Config.setIgnorePrivacy(cl.website.chat.ignore_privacy),Mr.Config.setVisitorCompose(cl.website.chat.visitor_compose)),this.client.Trigger.init(Gi.getTriggers()),this.ql(),this._clientEl=Hr.dom('<div class="crisp-client" :lang="$store.locale.code" :dir="$store.locale.direction" aria-live="polite" translate="no" tabindex="-1"><div class="cc-1lkve"></div><div class="cc-yv368" id="crisp-chatbox" :data-hidden="$store.base.is_hidden" :data-force-show="$store.base.force_show || $store.base.error_mode" :data-color-mode="($store.website?.chat.color_mode === \'auto\') ? $store.feature.color_scheme_preference : $store.website?.chat.color_mode" :data-availability="$store.availability?.availability" :data-lock-maximized="$store.base.runtime?.lock_maximized ? true : false" :data-website-logo="$store.website?.chat?.website_logo ? true : false" :data-last-operator-face="($store.website?.chat?.last_operator_face &amp;&amp; $store.base.active_operators?.length &gt; 0) ? true : false" :data-ongoing-operator-face="($store.website?.chat?.ongoing_operator_face &amp;&amp; $store.chat?.current_ongoing_operator?.url) ? true : false" :data-availability-tooltip="$store.website?.chat?.availability_tooltip" :data-hide-vacation="$store.website?.chat?.hide_vacation" :data-blocked="$store.base.is_blocked" :data-mobile-view="$store.base.is_mobile_view" :data-full-view="$store.base.is_full_view" :data-small-view="$store.base.is_small_view" :data-large-view="$store.base.is_large_view" :data-has-local-messages="$store.base.has_local_messages" :data-was-availability-online="$store.availability?.was_availability_online" :data-is-activity-ongoing="$store.base.is_activity_ongoing" :data-hide-on-away="$store.website?.chat?.hide_on_away" :data-hide-on-mobile="$store.website?.chat?.hide_on_mobile" :data-position-reverse="$store.website?.chat?.position_reverse"></div><div class="cc-yv368 cc-vx6i0"></div><div class="cc-yv368 cc-1tx1r"></div><div class="cc-yv368 cc-jcxto" :data-color-mode="($store.website?.chat.color_mode === \'auto\') ? $store.feature.color_scheme_preference : $store.website?.chat.color_mode"></div></div>'),this._containerEl=this._clientEl.querySelector(".cc-yv368"),this.mu(),this.insertStyle()}runStatic(t=!0){!1!==t&&this.gu(!1),this.acquireWebsiteSettings({},this.cu).then(t=>{!0!==t&&(cl.availability.receive(cl.website.website.online||!1,!1),this.spawnClient(t),this.client.Minimized.init(!1,!1,t),vl.nextRender(()=>{this.triggerSessionLoaded()}))})}runError(){Yi.load("en").then(()=>{this.spawnClient(!0),this.client.Minimized.init(!0,!1,!0)}).catch(t=>{Ke.error(t)})}triggerSessionLoaded(){if("function"==typeof this.lu)try{this.lu(),this.lu=null}catch{}this.client.Action.unstackPending(),!0===this.client.Chat._isInitialized&&this.client.Chat.Interface.applyChatFocus(),this.client.Action.event("session:loaded",cl.base.session_id),Wl.scheduleWarnIncompatible(!0)}updateSocketCookieKey(t=!0,e=!1){let s,i=this.Du(t);s=!0===e?new Date(0):new Date((new Date).getTime()+(!0===t?6e5:1728e5)),document.cookie=`${i}; expires=${s.toUTCString()}; path=/; samesite=lax;`}updateConfiguration(t,e=!1){var s;typeof(null==(s=cl.website.chat)?void 0:s[t])==typeof e&&(cl.website.chat[t]=e)}insertStyle(){var t,e;let s=this.Fu;Yr.applyTheme(s.color.theme||(null==(e=null==(t=cl.website)?void 0:t.chat)?void 0:e.color_theme),!!s.color.theme),Yr.applyContainerIndex(s.other.container_index),Yr.applyPosition(s.position)}acquireWebsiteSettings(t,e=null){let s=!1;return this.client.Partial.loadSettings(`settings/website/${encodeURIComponent(cl.base.website.id)}/`,e||t.buster).catch(()=>(Ke.error("Failed to acquire website settings"),Promise.reject(null))).then(e=>(s=!(e&&!e.error),cl.website.updateWebsite(e,t),Yi.load(cl.website.chat.locale))).then(()=>Promise.resolve(s)).catch(t=>(Ke.error(t),Promise.resolve(!0)))}ensureSocket(t=!1){var e;return!0===(null==(e=Mr.socket)?void 0:e.connected)?Promise.resolve():new Promise(e=>{var s;!1!==this.hu&&(this.client.Broker._fnInitialize.actions.push(e),null===this.client.Broker._fnInitialize.master&&(this.client.Broker._fnInitialize.master=()=>{!0===t&&this.client.Minimized.init(!0,!1,!1,!1)}),null==(s=Mr.socket)||s.connect())})}configureConsoleSink(){"production"===Ve.ENVIRONMENT&&(Mr.Issue.configure({project:Ve.PROJECT_NAME,revision:Ve.REVISION,environment:Ve.ENVIRONMENT,useragent:cl.base.browser_useragent,page:cl.base.page_url}),Ke.setLogSink((t,e,s)=>{var i;if("error"===t){Array.isArray(s)&&(s=s[0]),"object"==typeof(null==(i=this._dollarCrisp)?void 0:i.__spool)&&(this._dollarCrisp.__spool.error_last={ns:e,value:s});let n=(new Date).getTime();n-this.vu>=1e4&&(this.vu=n,Mr.Issue.report(t,e,s))}}))}uninsertClient(){var t;"MutationObserver"in window&&(this.wu("html"),this.wu("body")),null==(t=Mr.socket)||t.disconnect(),this._u()}reTriggerLoader(){"function"==typeof this.uu&&this.uu()}au(){let t=new Date,e=`${t.getFullYear()}-${t.getMonth()}-${t.getDate()}-${t.getHours()}-${t.getMinutes()}`;return this.client.Partial.loadSettings(`settings/website/${encodeURIComponent(cl.base.website.id)}/prelude/`,e).then(t=>(Ve.TEST&&window.$mock_prelude&&vl.merge(t,window.$mock_prelude),t.error?Promise.reject(t.error):Promise.resolve(t||Jl))).catch(t=>(Ke.error("Error loading website prelude:",t),Promise.reject(t)))}mu(){this.bu(),"MutationObserver"in window&&(this.yu(document.documentElement),this.Eu(document.body))}bu(){let t=document.querySelector("body");if(cl.base.runtime.mount){let t=document.getElementById(cl.base.runtime.mount);t&&t.appendChild(this._clientEl)}else t&&t.appendChild(this._clientEl);Hr.vue(this._clientEl)}_u(){null!==this._clientEl&&(this._clientEl.remove(),this._clientEl=null)}fu(){this.gu(!0)}gu(t=!1){var e;let s=!0===Ve.SOCKET_AFFINITY,i=this.du.socket||{},n=(null==(e=this.du.rescue)?void 0:e.socket)||{},r=(s?i.client:null)||Ve.URL_RELAY_CLIENT,o=(s?i.stream:null)||Ve.URL_RELAY_STREAM,l=s&&n.client||null;this.client.Broker.init(r,o,l,t)}yu(t){this.wu("html"),this.Cu.html=new window.MutationObserver(t=>{for(let e=0;e<((null==t?void 0:t.length)||0);e++){let s=t[e];if("childList"===s.type&&s.addedNodes)for(let t=0;t<s.addedNodes.length;t++){let e=s.addedNodes[t];if("body"===(e.tagName||"").toLowerCase()){this.Eu(e),this.pu();break}}}}),this.Cu.html.observe(t,Gl)}Eu(t){this.wu("body"),this.Cu.body=new window.MutationObserver(t=>{for(let e=0;e<((null==t?void 0:t.length)||0);e++){let s=t[e];if("childList"===s.type&&s.removedNodes)for(let t=0;t<s.removedNodes.length;t++)if(s.removedNodes[t]===this._clientEl){this.pu();break}}}),this.Cu.body.observe(t,Gl)}wu(t){let e=this.Cu[t];void 0!==e&&(e.disconnect(),delete this.Cu[t])}pu(t=1e3){null===this.ku&&(this.ku=vl.setTimeout(()=>{this.ku=null,this.bu()},t))}Du(t=!0){return`${encodeURIComponent("crisp-client/socket/"+cl.base.website.id)}=${encodeURIComponent(!0===t?"0":"1")}`}ql(){vl.merge(cl.base,{is_full_view:!1,is_small_view:!1,is_large_view:!1}),cl.base.is_full_view=cl.base.checkIsFullView(),cl.base.is_small_view=cl.base.checkIsSmallView(),cl.base.is_large_view=cl.base.checkIsLargeView()}ou(){this._clientEl=null,this._containerEl=null}sr(){this._isInitialized=!1,this.cu=1,this.hu=!0,this.du={},this.uu=null,this.lu=null,this.vu=0,this.ku=null,this.Fu={color:{},other:{}},this.Cu={}}}class Yl extends Ze{constructor(t){super(),this.client=t,this.sr()}init(t,e,s=null,i=!0){Mr.init({ticketGenerator:(t,e)=>{this.client.Ticket.acquire(t,e)},environment:Ve.ENVIRONMENT,urlRelayClient:t,urlRelayStream:e,urlRelayRescueClient:s,websiteDomain:cl.base.website.domain,websiteId:cl.base.website.id,tokenId:cl.base.token_id,cookieExpire:cl.base.cookie_expire,cookieDomain:cl.base.cookie_domain,useragent:cl.base.browser_useragent,timezone:cl.base.browser_timezone,capabilities:cl.base.browser_capabilities,locales:cl.base.browser_locales,runtimeConfiguration:cl.base.runtime,connectSocket:i,sessionChildren:!0,platformName:Ve.PLATFORM_NAME,platformSignatureKey:Ve.PLATFORM_SIGNATURE_KEY}),cl.messages.registerUnreadHandler(),this.$u=Mr.event,this.Au=i,this.client.Base.configureConsoleSink(),this.Bu(),this.xu(),this.ju(),this.Iu(),this.Su(),this.Ru(),this.Ou(),this.zu(),this.Pu(),this.Tu(),this.Lu(),this.Mu(),this.qu(),this.Uu(),this.Vu(),this.Nu(),this.Hu(),this.Wu(),this.Ju(),this.Gu(),this.Ku(),this.Yu(),this.Zu(),this.Xu(),this.Qu(),this.ta(),this.ea(),this.sa(),this.ia(),this.na(),this.ra(),this.oa(),this.la(),this.ua(),this.aa(),this.ha(),this.ca(),this.da(),this.Da(),this.fa(),this.pa(),this.ma(),this.ga(),this.Fa(),this.va(),this.wa(),this.ba(),this.ya(),this.Ea(),this.Ca(),this.ka(),this.$a(),this.Aa(),this.Ba(),this.xa(),this.ja(),this.Ia()}reset(){this.sr()}Bu(){this.$u.on("socket:state",t=>{t.connected===this._socketConnected&&t.failed_reconnect===this.Sa||(this._socketConnected=t.connected||!1,this.Sa=t.failed_reconnect||!1,this.client.Chat.Interface.toggleSocketState(this._socketConnected,this.Sa),cl.minimized.pane.is_offline=!0!==this._socketConnected,!0===this._socketConnected&&this.client.Event.checkActivityAutokill())})}xu(){this.$u.on("socket:rescued",()=>{!1===this.Au?Mr.socket.connect():null===this.client.Base._containerEl&&(this.client.Base.updateSocketCookieKey(!0),this.client.Base.runStatic(!1))})}ju(){this.$u.on("session:created",t=>{t.error?"invalid_website_id"===t.error&&this.client.Base.runError():t.session_id?this.Ra=!0:Ke.error("Unrecognized session creation error")})}Iu(){this.$u.on("session:joined",t=>{t.error?"invalid_session"===t.error&&++this.Oa<=1&&Mr.Session.reset(()=>{Mr.Session.create()},()=>{}):(cl.base.session_id=t.session_id||null,cl.base.session_hash=t.session_hash||null,cl.chat.initializeConversations(t,t.children),!1===t.socket&&!0!==t.initiated&&this.client.Base.updateSocketCookieKey(!0),!0===this.za?(this.za=!1,this.client.Base.acquireWebsiteSettings(t).then(t=>{!0!==t&&(this.client.Base.spawnClient(t),Mr.Website.getUsersAvailable())})):cl.chat.eachSessionId(t=>{cl.messages.synchronizeHistoryAndNew(t)}))})}Su(){this.$u.on("session:state",t=>{let e=t.session_id;delete t.session_id;let s=e===cl.base.session_id;if(s&&1===this.Pa&&(this.Pa++,this.Ta=!0),!1===this.client.Chat._isInitialized)if(s){let e=()=>{vl.nextRender(()=>{this.client.Base.triggerSessionLoaded()})};if(null!==this._fnInitialize.master){this._fnInitialize.master(vl.isEmpty(t)?null:t);for(let t=0;t<this._fnInitialize.actions.length;t++)this._fnInitialize.actions[t]();this._fnInitialize.master=null,this._fnInitialize.actions=[],e()}else vl.isEmpty(t)?(this.client.Minimized.init(!0,this.Ra),Mr.Session.getRequestInitiate(),e()):this.client.Chat.init(t,e)}else cl.state.restore(t,e);cl.state.receive(t,e),s&&this.La()})}Ru(){this.$u.on("session:error",t=>{if("email:invalid_format"===t.type)cl.chatAlert.update("email_invalid","show",t.session_id)})}Ou(){this.$u.on("session:request:purge",()=>{this.client.Action.do_session_reset()})}zu(){this.$u.on("session:request:feedback",t=>{cl.chatFeedback.request(t.session_id)})}Pu(){this.$u.on("session:request:identity",t=>{cl.chatAuthenticate.request(t.session_id,t.method,t.identity,t.annotation)})}Tu(){this.$u.on("session:identity:verified",t=>{let e=t.verification,s=t.error||null;cl.chatAuthenticate.acknowledge(t.session_id,e.method,e.identity,e.annotation,s)})}Lu(){this.$u.on("session:child:create",()=>{})}Mu(){this.$u.on("session:child:created",t=>{t.error,cl.chat.handleConversationStarted(t.session_id,t.error,t.redirect)})}qu(){this.$u.on("website:users:available",t=>{Ve.TEST&&window.$mock_users_available&&(t=window.$mock_users_available),cl.availability.receive(t.available,t.changed),0===this.Pa?(this.Pa++,cl.chat.eachSessionId(t=>{Mr.Session.getState(t)})):cl.availability.apply()})}Uu(){this.$u.on("message:received",t=>{this.Ma(t)})}Vu(){this.$u.on("message:received:local",t=>{this.Ma(t)})}Nu(){this.$u.on("message:send",t=>{cl.messages.handleSent(t,t.session_id)})}Hu(){this.$u.on("message:sent",t=>{cl.messages.handleSentAcknowledgement(t,t.session_id),this.client.Action.event("message:sent",t)})}Wu(){this.$u.on("message:removed",t=>{cl.messages.handleRemoved(t,t.session_id)})}Gu(){this.$u.on("message:compose:send",t=>{this.client.Action.event("message:compose:sent",t)})}Ku(){this.$u.on("message:acknowledge:read:send",t=>{cl.messages.acknowledgeReadSend(t.fingerprints,t.session_id)})}Yu(){this.$u.on("message:error:rejected",t=>{cl.messages.errorRejected(t.fingerprint,t.session_id,t.reason)})}Ju(){this.$u.on("message:compose:received",t=>{var e,s;if(!0!==(null==(s=null==(e=cl.website)?void 0:e.chat)?void 0:s.operator_privacy)||!0===t.automated)switch(t.type){case"start":cl.messages.showCompose(t.timestamp,t.automated,t.session_id);break;case"stop":cl.messages.hideCompose(t.session_id)}this.client.Action.event("message:compose:received",t)})}Zu(){this.$u.on("history:messages",t=>{cl.messages.handleHistory(t.messages,t.session_id)})}Xu(){this.$u.on("overlay:answer:search",t=>{this._responseSpool.overlay_answer_search=t.id})}Qu(){this.$u.on("overlay:answer:search:partial",t=>{this._responseSpool.overlay_answer_search===t.id&&cl.overlay.handleSearchChunk(t.partial.chunk)})}ta(){this.$u.on("overlay:answer:search:processed",t=>{this._responseSpool.overlay_answer_search===t.id&&cl.overlay.handleSearchAnswer(t.result.text,t.search.query)})}ea(){this.$u.on("overlay:answer:search:sources",t=>{this._responseSpool.overlay_answer_search===t.id&&cl.overlay.handleSearchSources(t.result.sources)})}sa(){this.$u.on("overlay:category:suggest",t=>{this._responseSpool.overlay_category_suggest=t.id})}ia(){this.$u.on("overlay:category:suggest:sources",t=>{this._responseSpool.overlay_category_suggest===t.id&&cl.overlay.handleSearchSources(t.result.sources,!0)})}na(){this.$u.on("call:request:initiate",t=>{Mr.Call.init({session_id:t.session_id,call_id:t.call_id,ice:Ve.RTC_ICE,mode:t.mode,has_support:t.has_support},()=>{cl.call.ring(t)},()=>{})})}ra(){this.$u.on("call:action:stopped",()=>{cl.call.stop()})}oa(){this.$u.on("call:peer:local:error",()=>{cl.call.error()})}la(){this.$u.on("call:peer:remote:error",()=>{cl.call.error()})}ua(){this.$u.on("call:media:local:success",()=>{cl.call.success("media_local")})}aa(){this.$u.on("call:media:local:error",()=>{cl.call.error()})}ha(){this.$u.on("call:media:remote:success",()=>{cl.call.success("media_remote")})}ca(){this.$u.on("call:track:local:started",t=>{cl.call.toggleMediaStatus(t.media,!0)})}da(){this.$u.on("call:track:local:ended",t=>{cl.call.toggleMediaStatus(t.media,!1)})}Da(){this.$u.on("browsing:request:initiate",t=>{this.qa.push(()=>{cl.browsing.prepare(t)}),this.La()})}fa(){this.$u.on("browsing:assist:started",()=>{cl.browsing.startAssist()})}pa(){this.$u.on("browsing:assist:stopped",()=>{cl.browsing.stopAssist()})}ma(){this.$u.on("browsing:assist:mouse",t=>{cl.browsing.pipeMouse(t)})}ga(){this.$u.on("browsing:assist:scroll",t=>{cl.browsing.pipeScroll(t)})}Fa(){this.$u.on("browsing:assist:click",t=>{cl.browsing.pipeClick(t)})}va(){this.$u.on("bucket:url:upload:generate",t=>{this._responseSpool.bucket_url_upload_generate=t.id})}wa(){this.$u.on("bucket:url:upload:generated",t=>{var e,s,i;if(this._responseSpool.bucket_url_upload_generate===t.id){if("preparing"===(cl.chatFile.state||null)){let n=(null==(e=t.url)?void 0:e.signed)||"",r=(null==(s=t.url)?void 0:s.resource)||"",o=(null==(i=t.policy)?void 0:i.size_limit)||0;cl.chatFile.uploadGenerated(n,r,o)}}})}ba(){this.$u.on("media:animation:list",t=>{this._responseSpool.media_animation_list=t.id})}ya(){this.$u.on("media:animation:listed",t=>{this._responseSpool.media_animation_list===t.id&&(cl.chatPicker.gif.results=t.results)})}Ea(){this.$u.on("helpdesk:article:search",t=>{this._responseSpool.helpdesk_article_search=t.id})}Ca(){this.$u.on("helpdesk:article:searched",t=>{if(this._responseSpool.helpdesk_article_search===t.id){let e=!!t.search.query;cl.helpdesk.handleArticles(t.results,t.search,e);let s=cl.chat.generateChannelLink("helpdesk");if(s){let e,i=[];for(let n=0;n<t.results.length;n++)e=t.results[n],i.push({title:e.title,url:`${s}${e.locale}/article/${e.slug}/`});this.client.Action.event("helpdesk:queried",{query:t.search.query,results:i})}}})}ka(){this.$u.on("helpdesk:article:list",t=>{this._responseSpool.helpdesk_article_list=t.id})}$a(){this.$u.on("helpdesk:article:listed",t=>{this._responseSpool.helpdesk_article_list===t.id&&cl.helpdesk.handleArticles(t.results)})}Aa(){this.$u.on("helpdesk:article:suggest",t=>{this._responseSpool.helpdesk_article_suggest=t.id})}Ba(){this.$u.on("helpdesk:article:suggested",t=>{this._responseSpool.helpdesk_article_suggest===t.id&&cl.helpdesk.handleAutocomplete(t.results)})}xa(){this.$u.on("helpdesk:category:list",t=>{this._responseSpool.helpdesk_category_list=t.id})}ja(){this.$u.on("helpdesk:category:listed",t=>{this._responseSpool.helpdesk_category_list===t.id&&cl.helpdesk.handleCategories(t.results)})}Ia(){this.$u.on("window:history",t=>{cl.base.page_url=t.page_url,cl.base.page_domain=t.page_domain,null!==this.client.Base._containerEl&&!1===cl.base.is_blocked&&this.client.Chat.Interface.requestDynamicSizingProperties(),this.client.Trigger.reprocessEventsPage()})}Ma(t){this.client.Chat.startMinimized(()=>{let e="network"===t.origin&&!0;cl.messages.handleReceived(t,t.session_id,e,e,!0,!1),this.client.Action.event("message:received",t)})}La(){if(!0===this.Ta)for(;this.qa.length>0;)this.qa.shift()()}sr(){this._socketConnected=!1,this._responseSpool={},this._fnInitialize={master:null,actions:[]},this.$u=null,this.Ra=!1,this.za=!0,this.Au=!1,this.Sa=!1,this.Pa=0,this.Ta=!1,this.qa=[],this.Oa=0}}class Zl extends Ze{constructor(t){super(),this.client=t}loadSettings(t,e=null,s={}){let i=`${Ve.URL_CLIENT}/${t}`,n="?";e&&(i+=`${n}${encodeURIComponent(e)}`,n="&");for(let r in s)null!==s[r]&&(i+=`${n}${r}=${encodeURIComponent(s[r])}`,n="&");return fetch(i).then(t=>t.json()).then(t=>Promise.resolve(t)).catch(t=>(Ke.error("Failed to load settings on",i),Promise.reject(t)))}spawnWorker(t,e,s,i,n=!1){try{if(window.Worker&&window.URL){let r=[`${Ve.URL_CLIENT}/static/javascripts/workers/`,`${t}_${Ve.REVISION}.js`].join(""),o=new window.XMLHttpRequest;o.open("GET",r,!0),o.responseType="blob",o.onload=()=>{try{let t=window.URL.createObjectURL(o.response),r=new window.Worker(t);r.addEventListener("message",e=>{try{s(e.data),!0===n&&(r.terminate(),window.URL.revokeObjectURL(t))}catch(i){Ke.error(i)}}),r.addEventListener("error",t=>{try{let e=t.message||"Cannot spawn";i(e)}catch(e){Ke.error(e)}}),e(r,t)}catch(t){Ke.error(t),i(t)}},o.onerror=()=>{i(new Error("Could not load worker runtime"))},o.send()}else i(new Error("Workers are not supported"))}catch(r){Ke.error(r),i(r)}}spawnFeatureBundle(t,e,s,i){try{cl.partial.bundle.pending[t]=!0,e().then(e=>{s(e),cl.partial.bundle.pending[t]=!1}).catch(t=>{Ke.error(t),i(t)})}catch(n){cl.partial.bundle.pending[t]=!1,Ke.error(n)}}}const Xl="ticket",Ql=["token","expire","session"];class tu extends Ze{constructor(t){super(),this.client=t,this.sr()}reset(){this.sr()}acquire(t,e){let s=()=>{let s=this.Ua(t);s.token?e({token:s.token}):e(null)};this.Va!==t&&(this.Va=t,this.Na(t));let i=new Date;!0===(this.Ua(t).refreshAfter||0)-i.getTime()<=0?this.Ha(t,i,s):s()}Ha(t,e,s){this.Wa.push(s),1===this.Wa.length&&this.Ja(t,e,()=>{for(;this.Wa.length>0;)this.Wa.shift()()})}Ja(t,e,s){let i=`${e.getFullYear()}-${e.getMonth()}-${e.getDate()}-${e.getHours()}-${e.getMinutes()}-${e.getSeconds()}`,n=`settings/session/${encodeURIComponent(t)}`;this.client.Partial.loadSettings(`${n}/challenge/`,i).then(i=>{this.Ga(i.mint||{},r=>{var o;let l={mint_signature:(null==(o=i.mint)?void 0:o.signature)||null,mint_proof:(null==r?void 0:r.token)||null,mint_cost:(null==r?void 0:r.duration)||null};this.client.Partial.loadSettings(`${n}/ticket/`,null,l).then(i=>{i.token&&this.Ka(t,i,e),s()}).catch(()=>{s()})})}).catch(()=>{s()})}Ga(t,e){try{if(1!==t.version)throw new Error(`Mint version unsupported: V${t.version||0}`);this.Ya(t.vector,e)}catch(s){Ke.error(s),e(null,s)}}Ya(t,e){try{this.client.Partial.spawnWorker("ticket",e=>{e.postMessage({action:"mint",data:t})},t=>{e(t)},s=>{setTimeout(()=>{this.Za(t,e)},0)},!0)}catch(s){Ke.error(s)}}Za(t,e){try{Ji(()=>import("./features/chat_default_439a0bf.js").then(t=>t.a),__vite__mapDeps([0,4])).then(s=>{let i=s.default.mint(t,Mr.sha256);e(i)})}catch(s){Ke.error(s),e(null,s)}}Na(t){let e={};for(let s=0;s<Ql.length;s++){let t=Ql[s];e[t]=Mr.Storage.getStampLocal(Xl,this.Xa(t))}if(e.token&&e.expire&&e.session&&e.session===t){let s=this.Ua(t);s.token=e.token,s.refreshAfter=parseInt(e.expire,10)}}Ka(t,e,s){let i=this.Ua(t);i.token=e.token,i.refreshAfter=s.getTime()+Math.floor(.75*e.duration);let n={token:i.token,expire:`${i.refreshAfter}`,session:t};for(let r in n)Mr.Storage.setStampLocal(Xl,this.Xa(r),n[r])}Ua(t){return t in this.Qa||(this.Qa[t]={}),this.Qa[t]}Xa(t){return[cl.base.website.id,t]}sr(){this.Qa={},this.Wa=[],this.Va=null}}function eu(t,e,...s){return t.bind&&/\[native code\]/.test(t.bind.toString())?t.bind(e,...s):function(...i){return t.apply(e,[...s,...i])}}const su=["page","url_parameter"],iu="trigger";class nu extends Ze{constructor(t){super(),this.client=t,this.th={delay:this.eh,leave:this.sh,link:this.ih,page:this.nh,url_parameter:this.rh,user_data:this.oh,user_event:this.uh},this.ah={message:this.hh,open:this.dh,sound:this.Dh},this.fh={page:this.ph,url_parameter:this._h},this.sr()}init(t){this.mh=t,this.gh()}reset(){this.sr()}run(t){var e;let s=null==(e=this.mh)?void 0:e[t];return!0===(null==s?void 0:s.enabled)&&(this.Fh(t,s),!0)}doEvent(t,e){let s=this.wh[t]||[];for(let i=0;i<s.length;i++)s[i](e)}markProcessed(t){this._processed.includes(t)||this._processed.push(t),Mr.Storage.setStampLocal(iu,[cl.base.website.id,"status",t],"1")}reprocessEventsPage(){let t,e,s;for(let i in this.mh)if(t=this.mh[i],!0===t.enabled&&(e=t.events,e))for(let n in e)"page"===n&&(s=e[n],!0===s.enabled&&this.nh(i,t,e))}gh(){let t,e,s,i,n=!1;for(let r in this.mh)if(t=this.mh[r],!0===t.enabled&&(e=t.events,e))for(let o in e)s=e[o],!0===s.enabled&&(i=this.th[o],"function"==typeof i?(eu(i,this)(r,t,e,s.settings||{}),n=!0):Ke.error(`Did not attach ${o} event listener for trigger: ${r} because: no such event listener`));!0===n&&this.bh()}Fh(t,e){if(!0===this.yh(e)&&!1===this.Eh(t)){let s=vl.clone(this._processed);s.push(t),this.Ch(()=>{cl.state.propagate("trigger",s,cl.base.session_id,!1,!0,s=>{if(!0===s&&!0===this.yh(e)&&e.actions){let s,i,n=!1;for(let r in e.actions)s=e.actions[r],!0===s.enabled&&(i=this.ah[r],"function"==typeof i?(eu(i,this)(t,e,s.settings||{}),n=!0):Ke.error(`Did not execute ${r} action for trigger: ${t} because: no such action processor`));!0===n&&Mr.Trigger.fired(t,e.name)}})})}}Ch(t){this.client.Base.ensureSocket().then(()=>{!0!==this.kh?(this.kh=!0,this.client.Chat.startMinimized(t)):t()})}yh(t){var e;let s=!1;if(s=!1===cl.base.is_invisible,!0===this.$h(t,"if_website_online")&&(s=!0===this.client.Action.is_website_available()&&s),!0===this.$h(t,"if_first_visit")){s="1"===Mr.Storage.getStampLocal(iu,this.Ah("count"))&&s}if(!0===this.$h(t,"if_trigger_sole")&&(s=!0!==cl.messages.conversation.has_messages&&s),!0===this.$h(t,"if_countries")){let i=!1,n=null==(e=t.behaviors.if_countries)?void 0:e.settings,r=cl.website.chat.country;if(n)for(let t in n)t===r&&(i=!0);s=!0===i&&s}return!1===cl.base.is_mobile_view&&!1===this.Bh(t,"desktop")&&(s=!1),cl.base.is_mobile_view&&!1===this.Bh(t,"mobile")&&(s=!1),s}xh(t=!1,e={}){let s=100;return!0===t&&e.after&&e.after>0&&(s=1e3*e.after),s}eh(t,e,s,i){if(i.after&&i.after>0){let n=!1;for(let t in s)if("delay"!==t&&!0===s[t].enabled){n=!0;break}!1===n&&this.jh(t,e,{enabled:!0,settings:i})}}sh(t,e,s){var i;let n=!0;for(let r=0;r<su.length;r++){let t=su[r];if(!0===(null==(i=s[t])?void 0:i.enabled)&&(n=eu(this.fh[t],this)(s),!1===n))break}!0===n&&(this.Ih&&vl.removeEventListener("window","mouseout",this.Ih),this.Ih=vl.addEventListener("window","mouseout",i=>{!0===this.Sh&&!i.relatedTarget&&!i.toElement&&i.clientY<=this.Rh&&(this.Sh=!1,null===this.Oh&&(this.Oh=this.jh(t,e,s.delay)))}),vl.removeEventListener("window","mouseover",this.zh),this.zh=vl.addEventListener("window","mouseover",()=>{!0!==this.Sh&&(this.Sh=!0,null!==this.Oh&&(vl.clearTimeout(this.Oh),this.Oh=null))}))}ih(t,e,s,i){var n;(null==(n=i.ids)?void 0:n.length)>0&&(this.Ph&&vl.removeEventListener("document","click",this.Ph),this.Ph=vl.addEventListener("document","click",n=>{try{if((null==n?void 0:n.target)&&"a"===(n.target.nodeName||"").toLowerCase())for(let r=0;r<i.ids.length;r++){let o=document.getElementById(i.ids[r]),l="function"==typeof document.querySelectorAll?document.querySelectorAll(i.ids[r]):null,u=!1;if((null==l?void 0:l.length)>0)for(let t=0;t<l.length;t++)if(l[t]===n.target){u=!0;break}if(o===n.target||!0===u){this.jh(t,e,s.delay);break}}}catch(r){Ke.error(r)}}))}nh(t,e,s){var i;if(!0!==(null==(i=s.leave)?void 0:i.enabled)){!0===this.ph(s)&&this.jh(t,e,s.delay)}}rh(t,e,s){var i;if(!0!==(null==(i=s.leave)?void 0:i.enabled)){!0===this._h(s)&&this.jh(t,e,s.delay)}}oh(t,e,s,i){i.points&&vl.keys(i.points).length>0&&this.Th("user_data",n=>{let r=`${n.value}`;if(n.key&&r){`${i.points[n.key]}`===r&&this.jh(t,e,s.delay)}})}uh(t,e,s,i){var n;(null==(n=i.texts)?void 0:n.length)>0&&this.Th("user_event",n=>{i.texts.includes(n.text)&&this.jh(t,e,s.delay)})}hh(t,e,s){if(s){let i=(s[cl.locale.code]||s.default||"").trim();if(i){let s=vl.toHashCode(`trigger/${t}`),n=!1;!0===this.$h(e,"show_as_website")&&(n=!0),this.client.Action.do_message_show("text",i,s,n)}}}dh(t,e){this.client.Action.do_chat_open()}Dh(t,e){Po.start("events","chat-message-receive")}ph(t){var e,s;let i=!1,n=null==(e=t.page)?void 0:e.settings;return(null==(s=null==n?void 0:n.urls)?void 0:s.length)>0&&(i=vl.comparePageRules(cl.base.page_url,n.urls)),i}_h(t){var e;let s=!1,i=(null==(e=t.url_parameter)?void 0:e.settings)||{};if(vl.keys(i.parameters||{}).length>0){let t=document.location.search||"",e=t.slice(t.indexOf("?")+1).split("&"),n={};for(let s=0;s<e.length;s++){let[t,i]=e[s].split("=");t&&(n[t.toLowerCase()]=decodeURIComponent(i||"").toLowerCase())}for(let r in i.parameters){let t=r.toLowerCase(),e=String(i.parameters[t].toLowerCase());if(n[t]===e){s=!0;break}}}return s}jh(t,e,s={}){let i=null;return i=vl.setTimeout(()=>{this.Fh(t,e)},this.xh(null==s?void 0:s.enabled,null==s?void 0:s.settings)),i}Th(t,e){this.wh[t]=this.wh[t]||[],this.wh[t].push(e)}$h(t,e){var s,i;return!0===(null==(i=null==(s=t.behaviors)?void 0:s[e])?void 0:i.enabled)}Eh(t){let e=this._processed.includes(t)&&!0;if(!0!==e){e="1"===Mr.Storage.getStampLocal(iu,[cl.base.website.id,"status",t])&&!0}return e}Bh(t,e){var s,i;return!1!==(null==(i=null==(s=t.platforms)?void 0:s[e])?void 0:i.enabled)}bh(){let t=this.Ah("last"),e=this.Ah("count"),s=parseInt(Mr.Storage.getStampLocal(iu,t)||"0",10),i=parseInt(Mr.Storage.getStampLocal(iu,e)||"0",10),n=(new Date).getTime();(isNaN(s)||isNaN(i)||i<=0||n-s>=18e5)&&(i+=1,s=n,Mr.Storage.setStampLocal(iu,e,`${i}`)),Mr.Storage.setStampLocal(iu,t,`${n}`)}Ah(t){return[cl.base.website.id,"visit",t]}sr(){this._processed=[],this.mh=null,this.kh=!1,this.Sh=!1,this.Oh=null,this.Rh=10,this.Ph=null,this.Ih=null,this.zh=null,this.wh={}}}new class{constructor(){t=this,this.Partial=new Zl(this),this.Action=new jl(this),this.Ticket=new tu(this),this.Broker=new Yl(this),this.Event=new Ll(this),this.Trigger=new nu(this),this.Base=new Kl(this),this.Minimized=new Nl(this),this.Chat=new Vl(this),function(t){try{var e={push:zl(Ol.push,Ol),get:zl(Ol.get,Ol),set:zl(Ol.set,Ol),is:zl(Ol.is,Ol),on:zl(Ol.on,Ol),off:zl(Ol.off,Ol),do:zl(Ol.do,Ol),config:zl(Ol.config,Ol),safe:zl(Ol.safe,Ol),help:zl(Ol.help,Ol)};if(Object.defineProperty(e,"__init",{enumerable:!1,value:zl(t.Base.init,t.Base)}),Object.defineProperty(e,"__spool",{enumerable:!1,value:{}}),Object.defineProperty(e,"__debug",{enumerable:!1,value:{}}),t._dollarCrisp=e,t.__spool=e.__spool,t.__debug=e.__debug,e.__spool.pending_actions=[],"object"==typeof window.$crisp&&window.$crisp.length>0)for(var s=0;s<window.$crisp.length;s++)e.__spool.pending_actions.push(window.$crisp[s]);window.$__CRISP_INSTANCE=e,window.$crisp=e,t._dollarCrisp=e}catch(i){}}(this)}__init(t={}){this.Base.init(t)}};const ru=(t,e)=>{const s=t.Lh||t;for(const[i,n]of e)s[i]=n;return s},ou="https://client.crisp.chat/static/images/client/avatar-default.svg";var lu="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function uu(t){return t&&t.Ze&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}export{G as $,d as A,h as B,rt as C,A as D,n as E,j as F,L as G,O as H,S as I,ge as J,T as K,Ot as L,ve as M,r as N,u as O,zt as P,me as Q,lt as R,ze as S,Me as T,R as U,je as V,qe as W,v as X,Y,Z,p as _,F as a,K as a0,ru as a1,cl as a2,vl as a3,Ve as a4,Yi as a5,Ti as a6,Ze as a7,Vi as a8,Vr as a9,Nr as aa,Q as ab,Mr as ac,Yo as ad,Ji as ae,Ke as af,dl as ag,uu as ah,Po as ai,tl as aj,e as ak,yo as al,ou as am,Mi as an,lu as ao,Fe as ap,w as b,Ce as c,D as d,a as e,U as f,q as g,be as h,g as i,Ee as j,ye as k,Ae as l,xe as m,J as n,l as o,o as p,Re as q,$e as r,Tt as s,Be as t,Et as u,Ct as v,b as w,i as x,ke as y,P as z};
